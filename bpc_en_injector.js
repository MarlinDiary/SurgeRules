// Inject combined Bypass Paywalls Clean bundle into HTML responses
const hostname = ($request && $request.hostname) || '';
const allowedDomains = new Set(["adage.com", "adweek.com", "afr.com", "ajc.com", "al-monitor.com", "americanbanker.com", "amp.scmp.com", "apollo-magazine.com", "app.historytoday.com", "appan.newscientist.com", "artnet.com", "asia.nikkei.com", "autocar.co.uk", "autonews.com", "autosport.com", "axios.com", "balkaninsight.com", "barandbench.com", "barrons.com", "belfasttelegraph.co.uk", "benzinga.com", "bhaskar.com", "bizjournals.com", "bloomberg.com", "bloombergadria.com", "bostonglobe.com", "brisbanetimes.com.au", "business-standard.com", "businessdesk.co.nz", "businessinsider.com", "businessinsider.jp", "businessoffashion.com", "businesspost.ie", "businesstimes.com.sg", "capital.bg", "chronicle.com", "cnbc.com", "cnn.com", "columbian.com", "computerweekly.com", "crikey.com.au", "csmonitor.com", "cyclingnews.com", "dailyherald.com", "dailywire.com", "dallasnews.com", "decanter.com", "defector.com", "denik.cz", "digiday.com", "discovermagazine.com", "dn.no", "dnevnik.bg", "dwell.com", "economictimes.com", "economictimes.indiatimes.com", "economist.com", "enotes.com", "entrepreneur.com", "epaper.indiatimes.com", "epaper.thetimes.com", "epoch.org.il", "espn.com", "euobserver.com", "european-rubber-journal.com", "fastcompany.com", "fieldandstream.com", "financialexpress.com", "fmrmagazine.com", "fnlondon.com", "forbes.com", "forbes.com.au", "forbes.ua", "foreignaffairs.com", "foreignpolicy.com", "fortune.com", "foxnews.com", "ft.com", "ftm.eu", "gbnews.com", "gitflic.ru", "glossy.co", "granta.com", "haaretz.co.il", "haaretz.com", "harpers.org", "hbr.org", "hilltimes.com", "hindustantimes.com", "historyextra.com", "historytoday.com", "iai.tv", "inc.com", "inc42.com", "independent.ie", "indianexpress.com", "indiatoday.in", "infzm.com", "inkl.com", "insidehighered.com", "interestingengineering.com", "ipolitics.ca", "irishexaminer.com", "japantimes.co.jp", "jgnt.co", "jpost.com", "kathimerini.gr", "kompas.id", "latimes.com", "literaryreview.co.uk", "livelaw.in", "livemint.com", "macrobusiness.com.au", "magazine.atavist.com", "magazine.thediplomat.com", "manoramaonline.com", "marketwatch.com", "medium.com", "medscape.com", "mexiconewsdaily.com", "mid-day.com", "mnimarkets.com", "modernretail.co", "motorsportmagazine.com", "nationalgeographic.com", "nationalreview.com", "nature.com", "nautil.us", "ndtvprofit.com", "newcriterion.com", "newrepublic.com", "newscientist.com", "newsday.com", "newslaundry.com", "newstatesman.com", "newsweek.com", "nola.com", "ntnews.com.au", "nv.ua", "nybooks.com", "nypost.com", "nytimes.com", "nzherald.co.nz", "outlookbusiness.com", "outlookindia.com", "philanthropy.com", "philonomist.com", "pionline.com", "project-syndicate.org", "puck.news", "reuters.com", "rubbernews.com", "rugbypass.com", "scholastic.com", "science.org", "scientificamerican.com", "scmp.com", "scotsman.com", "seattletimes.com", "sfstandard.com", "shreveportbossieradvocate.com", "slate.com", "slideshare.net", "sloanreview.mit.edu", "sltrib.com", "smartcompany.com.au", "smh.com.au", "sofrep.com", "spectator.co.uk", "spectator.com.au", "spglobal.com", "standardmedia.co.ke", "staradvertiser.com", "startribune.com", "statnews.com", "stereogum.com", "stocknews.com", "straitstimes.com", "stratfor.com", "study.com", "stylist.co.uk", "swarajyamag.com", "techinasia.com", "techtarget.com", "telegraph.co.uk", "tes.com", "the-american-interest.com", "the-scientist.com", "the-tls.com", "theadvocate.com", "theage.com.au", "theamericanconservative.com", "theamericanscholar.org", "theatlantic.com", "thebaltimorebanner.com", "thebulletin.org", "thedailybeast.com", "thediplomat.com", "theglobeandmail.com", "thehill.com", "thehindu.com", "thehindubusinessline.com", "thejuggernaut.com", "thelampmagazine.com", "thelawyer.com", "theleaflet.in", "thelogic.co", "themandarin.com.au", "themarker.com", "thenewatlantis.com", "thenewslens.com", "thenewsminute.com", "thenewworld.co.uk", "thepointmag.com", "thequint.com", "thesaturdaypaper.com.au", "thescottishsun.co.uk", "thespectator.com", "thestage.co.uk", "thesun.co.uk", "thetimes.com", "theweek.com", "thewest.com.au", "thewrap.com", "timeshighereducation.com", "tradewindsnews.com", "unherd.com", "vice.com", "vikatan.com", "vogue.co.uk", "voguebusiness.com", "vox.com", "warontherocks.com", "washingtonpost.com", "watoday.com.au", "winnipegfreepress.com", "wsj.com"]);
function isAllowed(host) {
  if (!host) {
    return false;
  }
  if (allowedDomains.has(host)) {
    return true;
  }
  const parts = host.split('.');
  while (parts.length > 2) {
    parts.shift();
    if (allowedDomains.has(parts.join('.'))) {
      return true;
    }
  }
  return false;
}
if (!isAllowed(hostname)) {
  $done({});
}
const headers = Object.assign({}, $response.headers || {});
const contentType = headers['Content-Type'] || headers['content-type'] || '';
if (!$response.body || !$response.body.length || !/text\/html/i.test(contentType)) {
  $done({});
}
const marker = 'bpc-surge-bundle';
let body = $response.body;
if (body.includes(marker)) {
  $done({});
}
const injection = "<script>(function(){if(window.__BPC_SURGE_INSERTED__){return;}window.__BPC_SURGE_INSERTED__=true;const s=document.createElement('script');s.type='text/javascript';s.id='bpc-surge-bundle';s.text=\"// Bypass Paywalls Clean bundle for Surge injection\\nif (!window.__BPC_SURGE_BUNDLE__) {\\n  window.__BPC_SURGE_BUNDLE__ = true;\\n// Polyfill Greasemonkey-only APIs when injected via Surge\\nif (typeof window !== 'undefined') {\\n  window.GM = window.GM || {};\\n  if (typeof window.GM.xmlHttpRequest !== 'function') {\\n    window.GM.xmlHttpRequest = function(details) {\\n      if (!details || !details.url) {\\n        return;\\n      }\\n      const method = details.method || 'GET';\\n      const headers = details.headers || {};\\n      const body = details.data;\\n      fetch(details.url, {\\n        method,\\n        headers,\\n        body,\\n        credentials: 'include'\\n      }).then(async (response) => {\\n        const text = await response.text();\\n        if (typeof details.onload === 'function') {\\n          details.onload({\\n            responseText: text,\\n            finalUrl: response.url,\\n            status: response.status,\\n            statusText: response.statusText,\\n            headers: (() => {\\n              const result = {};\\n              response.headers.forEach((value, key) => {\\n                result[key] = value;\\n              });\\n              return result;\\n            })()\\n          });\\n        }\\n      }).catch((error) => {\\n        if (typeof details.onerror === 'function') {\\n          details.onerror(error);\\n        }\\n      });\\n    };\\n  }\\n}\\n\\n//\\\"use strict\\\";\\nvar func_post;\\nvar fetch_headers = {};\\nvar domain;\\nvar mobile = window.navigator.userAgent.toLowerCase().includes('mobile');\\nvar csDoneOnce;\\nvar cs_param = {};\\n\\nfunction removeDOMElement(...elements) {\\n  for (let element of elements) {\\n    if (element)\\n      element.remove();\\n  }\\n}\\n\\nfunction hideDOMElement(...elements) {\\n  for (let element of elements) {\\n    if (element)\\n      element.style = 'display:none !important;';\\n  }\\n}\\n\\nfunction hideDOMStyle(selector, id = 1) {\\n  let style = document.querySelector('head > style#ext'+ id);\\n  if (!style && document.head) {\\n    let sheet = document.createElement('style');\\n    sheet.id = 'ext' + id;\\n    sheet.innerText = selector + ' {display: none !important;}';\\n    document.head.appendChild(sheet);\\n  }\\n}\\n\\nfunction addStyle(css, id = 1) {\\n  let style = document.querySelector('head > style#add'+ id);\\n  if (!style && document.head) {\\n    let sheet = document.createElement('style');\\n    sheet.id = 'add' + id;\\n    sheet.innerText = css;\\n    document.head.appendChild(sheet);\\n  }\\n}\\n\\nfunction waitDOMElement(selector, tagName = '', callback, multiple = false) {\\n  new window.MutationObserver(function (mutations) {\\n    for (let mutation of mutations) {\\n      for (let node of mutation.addedNodes) {\\n        if (!tagName || (node.tagName === tagName)) {\\n          if (node.matches(selector)) {\\n            callback(node);\\n            if (!multiple)\\n              this.disconnect();\\n          }\\n        }\\n      }\\n    }\\n  }).observe(document, {\\n    subtree: true,\\n    childList: true\\n  });\\n}\\n\\nfunction waitDOMAttribute(selector, tagName = '', attributeName = '', callback, multiple = false) {\\n  let targetNode = document.querySelector(selector);\\n  if (!targetNode)\\n    return;\\n  new window.MutationObserver(function (mutations) {\\n    for (let mutation of mutations) {\\n      if (mutation.target.attributes[attributeName]) {\\n        callback(mutation.target);\\n        if (!multiple)\\n          this.disconnect();\\n      }\\n    }\\n  }).observe(targetNode, {\\n    attributes: true,\\n    attributeFilter: [attributeName]\\n  });\\n}\\n\\nfunction matchDomain(domains, hostname = window.location.hostname) {\\n  if (typeof domains === 'string')\\n    domains = [domains];\\n  return domains.find(domain => hostname === domain || hostname.endsWith('.' + domain)) || false;\\n}\\n\\nfunction urlHost(url) {\\n  if (/^http/.test(url)) {\\n    try {\\n      return new URL(url).hostname;\\n    } catch (e) {\\n      console.log(`url not valid: ${url} error: ${e}`);\\n    }\\n  }\\n  return url;\\n}\\n\\nfunction matchUrlDomain(domains, url) {\\n  return matchDomain(domains, urlHost(url));\\n}\\n\\nfunction makeFigure(url, caption_text, img_attrib = {}, caption_attrib = {}) {\\n  let elem = document.createElement('figure');\\n  let img = document.createElement('img');\\n  img.src = url;\\n  for (let attrib in img_attrib)\\n    if (img_attrib[attrib])\\n      img.setAttribute(attrib, img_attrib[attrib]);\\n  elem.appendChild(img);\\n  if (caption_text) {\\n    let caption = document.createElement('figcaption');\\n    for (let attrib in caption_attrib)\\n      if (caption_attrib[attrib])\\n        caption.setAttribute(attrib, caption_attrib[attrib]);\\n    let cap_par = document.createElement('p');\\n    cap_par.innerText = caption_text;\\n    caption.appendChild(cap_par);\\n    elem.appendChild(caption);\\n  }\\n  return elem;\\n}\\n\\nfunction header_nofix(header, cond_sel = '', msg = 'BPC > no fix') {\\n  if (header && typeof header === 'string')\\n    header = document.querySelector(header);\\n  if (header && !document.querySelector('div#bpc_nofix')) {\\n    if (cond_sel) {\\n      let elem = document.querySelectorAll(cond_sel);\\n      if (elem.length)\\n        removeDOMElement(...elem);\\n      else\\n        return false;\\n    }\\n    let nofix_div = document.createElement('div');\\n    nofix_div.id = 'bpc_nofix';\\n    nofix_div.style = 'margin: 20px; font-size: 20px; font-weight: bold; color: red;';\\n    nofix_div.innerText = msg;\\n    header.before(nofix_div);\\n  }\\n}\\n\\nfunction clearPaywall(paywall, paywall_action) {\\n  if (paywall) {\\n    if (!paywall_action)\\n      removeDOMElement(...paywall);\\n    else {\\n      for (let elem of paywall) {\\n        if (paywall_action.rm_class)\\n          elem.classList.remove(paywall_action.rm_class);\\n        else if (paywall_action.rm_attrib)\\n          elem.removeAttribute(paywall_action.rm_attrib);\\n      }\\n    }\\n  }\\n}\\n\\nfunction getArticleSrc(url, url_src, proxy, base64, selector, text_fail = '', selector_source = selector, selector_archive = selector) {\\n  let url_fetch = url_src || url;\\n  GM.xmlHttpRequest({\\n    method: \\\"GET\\\",\\n    url: url_fetch,\\n    headers: fetch_headers,\\n    onload: function (response) {\\n      let html = response.responseText;\\n      if (proxy && base64) {\\n        html = decode_utf8(atob(html));\\n        selector_source = 'body';\\n      }\\n      let recursive;\\n      if (url.startsWith('https://archive.')) {\\n        if (url_fetch.includes('/https')) {\\n          if (html.includes('<div class=\\\"TEXT-BLOCK\\\"')) {\\n            url_src = html.split('<div class=\\\"TEXT-BLOCK\\\"')[1].split('</div>')[0].split('href=\\\"')[1].split('\\\"')[0];\\n            getArticleSrc(url, url_src, proxy, base64, selector, text_fail, selector_source, selector_archive);\\n            recursive = true;\\n          } else\\n            html = '';\\n        }\\n      }\\n      if (!recursive)\\n        replaceDomElementExtSrc(url, url_src, html, proxy, base64, selector, text_fail, selector_source, selector_archive);\\n    }\\n  });\\n}\\n\\nfunction getArchive(url, paywall_sel, paywall_action = '', selector, text_fail = '', selector_source = selector, selector_archive = selector) {\\n  let url_archive = 'https://' + archiveRandomDomain() + '/' + url.split(/[#\\\\?]/)[0];\\n  let paywall = document.querySelectorAll(paywall_sel);\\n  if (paywall.length) {\\n    clearPaywall(paywall, paywall_action);\\n    replaceDomElementExt(url_archive, true, false, selector, text_fail, selector_source, selector_archive);\\n  }\\n}\\n\\nfunction getExtFetch(url, json_key = '', headers = {}, callback = '', args = []) {\\n  GM.xmlHttpRequest({\\n    method: \\\"GET\\\",\\n    url: url,\\n    headers: headers,\\n    onload: function (response) {\\n      let html = response.responseText;\\n      if (json_key) {\\n        try {\\n          let json = JSON.parse(html);\\n          if (json)\\n            html = getNestedKeys(json, json_key);\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n      callback(url, html, ...args);\\n    }\\n  })\\n}\\n\\nvar selector_level = false;\\nfunction replaceDomElementExt(url, proxy, base64, selector, text_fail = '', selector_source = selector, selector_archive = selector) {\\n  let article = document.querySelector(selector);\\n  if (!article)\\n    return;\\n  if (proxy) {\\n    if (!text_fail) {\\n      if (url.startsWith('https://archive.'))\\n        text_fail = 'BPC > Try for full article text (no need to report issue for external site):\\\\r\\\\n';\\n      else if (!matchUrlDomain(window.location.hostname, url))\\n        text_fail = 'BPC > failed to load from external site:\\\\r\\\\n';\\n    }\\n    getArticleSrc(url, '', proxy, base64, selector, text_fail, selector_source, selector_archive);\\n  } else {\\n    fetch(url, {headers: fetch_headers})\\n    .then(response => {\\n      let article = document.querySelector(selector);\\n      if (response.ok) {\\n        response.text().then(html => {\\n          replaceDomElementExtSrc(url, '', html, false, base64, selector, text_fail, selector_source);\\n        });\\n      } else {\\n        replaceTextFail(url, article, proxy, text_fail);\\n      }\\n    }).catch(function (err) {\\n      replaceTextFail(url, article, proxy, text_fail);\\n    });\\n  }\\n}\\n\\nfunction getSelectorLevel(selector) {\\n  if (selector.replace(/,\\\\s+/g, ',').match(/[>\\\\s]+/))\\n    selector = selector.replace(/,\\\\s+/g, ',').split(',').map(x => x.match(/[>\\\\s]+/) ? x + ', ' + x.split(/[>\\\\s]+/).pop() : x).join(', ');\\n  return selector;\\n}\\n\\nfunction replaceDomElementExtSrc(url, url_src, html, proxy, base64, selector, text_fail = '', selector_source = selector, selector_archive = selector) {\\n  let article = document.querySelector(selector);\\n  let article_link = document.querySelector(selector_archive);\\n  let no_content_msg = '&nbsp;| no article content found! | :';\\n  if (html) {\\n    if (!proxy && base64) {\\n      html = decode_utf8(atob(html));\\n      selector_source = 'body';\\n    }\\n    let parser = new DOMParser();\\n    window.setTimeout(function () {\\n      if (url.startsWith('https://archive.') && url_src) {\\n        let domain_archive = url.match(/^https:\\\\/\\\\/(archive\\\\.\\\\w{2})/)[1];\\n        let pathname = new URL(url_src).pathname;\\n        html = html.replace(new RegExp('https:\\\\\\\\/\\\\\\\\/' + domain_archive.replace('.', '\\\\\\\\.') + '\\\\\\\\/o\\\\\\\\/\\\\\\\\w+\\\\\\\\/', 'g'), '').replace(new RegExp(\\\"(src=\\\\\\\"|background-image:url\\\\\\\\(')\\\" + pathname.replace('/', '\\\\\\\\/'), 'g'), \\\"$1\\\" + 'https://' + domain_archive + pathname);\\n      }\\n      let doc = parser.parseFromString(html, 'text/html');\\n      if (selector_level)\\n        selector_source = getSelectorLevel(selector_source);\\n      let article_new = doc.querySelector(selector_source);\\n      if (article_new) {\\n        if (article && article.parentNode) {\\n          if (url.startsWith('https://archive.')) {\\n            let arch_dom = (selector_archive !== selector) ? (article_new.querySelector(selector_archive) || document.querySelector(selector_archive)) : article_new;\\n            if (arch_dom) {\\n              if (arch_dom.firstChild)\\n                arch_dom = arch_dom.firstChild;\\n              let arch_div = document.createElement('div');\\n              arch_div.appendChild(archiveLink_renew(url_src));\\n              arch_div.appendChild(archiveLink(window.location.href.split(/[#\\\\?]/)[0], 'BPC > Full article text fetched from (no need to report issue for external site):\\\\r\\\\n'));\\n              arch_div.style = 'margin: 0px 0px 50px;';\\n              arch_dom.before(arch_div);\\n            }\\n            let targets = article_new.querySelectorAll('a[target=\\\"_blank\\\"][href^=\\\"' + window.location.origin + '\\\"]');\\n            for (let elem of targets)\\n              elem.removeAttribute('target');\\n            let invalid_links = article_new.querySelectorAll('link[rel*=\\\"preload\\\"]:not([href])');\\n            removeDOMElement(...invalid_links);\\n          }\\n          window.setTimeout(function () {\\n            if (article.parentNode) {\\n              article.parentNode.replaceChild(article_new, article);\\n              if (func_post)\\n                func_post();\\n            }\\n          }, 200);\\n        }\\n      } else\\n        replaceTextFail(url, article_link, proxy, text_fail.replace(':', no_content_msg));\\n    }, 200);\\n  } else {\\n    replaceTextFail(url, article_link, proxy, url_src ? text_fail.replace(':', no_content_msg) : text_fail);\\n  }\\n}\\n\\nfunction replaceTextFail(url, article, proxy, text_fail) {\\n  if (text_fail && article) {\\n    let text_fail_div = document.createElement('div');\\n    text_fail_div.id = 'bpc_fail';\\n    text_fail_div.setAttribute('style', 'margin: 0px 50px; font-weight: bold; color: red;');\\n    text_fail_div.appendChild(document.createTextNode(text_fail));\\n    if (proxy) {\\n      if (url.startsWith('https://archive.')) {\\n        text_fail_div = archiveLink(url.replace(/^https:\\\\/\\\\/archive\\\\.\\\\w{2}\\\\//, ''), text_fail);\\n      } else {\\n        let a_link = document.createElement('a');\\n        a_link.innerText = url;\\n        a_link.href = url;\\n        a_link.target = '_blank';\\n        text_fail_div.appendChild(a_link);\\n      }\\n    }\\n    if (article.firstChild)\\n      article.firstChild.before(text_fail_div);\\n    else\\n      article.appendChild(text_fail_div);\\n  }\\n}\\n\\nfunction amp_images_replace() {\\n  window.setTimeout(function () {\\n    let amp_images = document.querySelectorAll('figure amp-img[src^=\\\"http\\\"]');\\n    for (let amp_image of amp_images) {\\n      let elem = document.createElement('img');\\n      elem.src = amp_image.getAttribute('src');\\n      elem.alt = amp_image.getAttribute('alt');\\n      elem.style = 'width: 100%;';\\n      amp_image.parentNode.replaceChild(elem, amp_image);\\n    }\\n  }, 1000);\\n}\\n\\nfunction amp_iframes_replace(weblink = false, source = '') {\\n  let amp_iframes = document.querySelectorAll('amp-iframe' + (source ? '[src*=\\\"' + source + '\\\"]' : ''));\\n  let par, elem;\\n  for (let amp_iframe of amp_iframes) {\\n    if (!weblink) {\\n      if (amp_iframe.offsetHeight > 10) {\\n        elem = document.createElement('iframe');\\n        elem.src = amp_iframe.getAttribute('src').replace(/^http:/, 'https:');\\n        elem.style = 'height: ' + amp_iframe.offsetHeight + 'px; width: 100%; border: 0px;';\\n        if (amp_iframe.getAttribute('sandbox'))\\n          elem.sandbox = amp_iframe.getAttribute('sandbox');\\n        amp_iframe.parentNode.replaceChild(elem, amp_iframe);\\n      }\\n    } else {\\n      par = document.createElement('p');\\n      par.style = 'margin: 20px 0px;';\\n      elem = document.createElement('a');\\n      elem.innerText = 'Media-link';\\n      elem.setAttribute('href', amp_iframe.getAttribute('src'));\\n      elem.setAttribute('target', '_blank');\\n      par.appendChild(elem);\\n      amp_iframe.parentNode.replaceChild(par, amp_iframe);\\n    }\\n  }\\n}\\n\\nfunction amp_redirect_not_loop(amphtml) {\\n  if (!check_loop()) {\\n    window.location.href = amphtml.href;\\n  } else {\\n    let header = (document.body && document.body.firstChild) || document.documentElement;\\n    header_nofix(header, '', 'BPC > redirect to amp failed (disable amp-to-html extension/add-on or browser setting)');\\n  }\\n}\\n\\nfunction amp_redirect(paywall_sel, paywall_action = '', amp_url = '') {\\n  let paywall = document.querySelectorAll(paywall_sel);\\n  let amphtml = document.querySelector('head > link[rel=\\\"amphtml\\\"]');\\n  if (!amphtml && amp_url)\\n    amphtml = {href: amp_url};\\n  if (paywall.length && amphtml) {\\n    clearPaywall(paywall, paywall_action);\\n    amp_redirect_not_loop(amphtml);\\n  }\\n}\\n\\nfunction amp_unhide_subscr_section(amp_ads_sel = '', replace_iframes = true, amp_iframe_link = false, source = '') {\\n  let preview = document.querySelectorAll('[subscriptions-section=\\\"content-not-granted\\\"]');\\n  removeDOMElement(...preview);\\n  let subscr_section = document.querySelectorAll('[subscriptions-section=\\\"content\\\"]');\\n  for (let elem of subscr_section)\\n    elem.removeAttribute('subscriptions-section');\\n  if (amp_ads_sel)\\n    hideDOMStyle(amp_ads_sel, 5);\\n  if (replace_iframes)\\n    amp_iframes_replace(amp_iframe_link, source);\\n}\\n\\nfunction amp_unhide_access_hide(amp_access = '', amp_access_not = '', amp_ads_sel = '', replace_iframes = true, amp_iframe_link = false, source = '') {\\n  let access_hide = document.querySelectorAll('[amp-access' + amp_access + '][amp-access-hide]:not([amp-access=\\\"error\\\"], [amp-access^=\\\"message\\\"], .piano)');\\n  for (let elem of access_hide)\\n    elem.removeAttribute('amp-access-hide');\\n  if (amp_access_not) {\\n    let amp_access_not_dom = document.querySelectorAll('[amp-access' + amp_access_not + ']');\\n    removeDOMElement(...amp_access_not_dom);\\n  }\\n  if (amp_ads_sel)\\n    hideDOMStyle(amp_ads_sel, 6);\\n  if (replace_iframes)\\n    amp_iframes_replace(amp_iframe_link, source);\\n}\\n\\nfunction ampToHtml() {\\n  window.setTimeout(function () {\\n    let canonical = document.querySelector('head > link[rel=\\\"canonical\\\"][href]');\\n    if (canonical)\\n      window.location.href = canonical.href;\\n  }, 1000);\\n}\\n\\nfunction check_loop(interval = 2000) {\\n  let loop = true;\\n  let loop_date = Number(sessionStorage.getItem('###_loop'));\\n  if (!(loop_date && (Date.now() - loop_date < interval))) {\\n    sessionStorage.setItem('###_loop', Date.now());\\n    loop = false;\\n  }\\n  return loop;\\n}\\n\\nfunction refreshCurrentTab(not_loop = true, not_loop_msg = true) {\\n  if (!not_loop || !check_loop(5000)) {\\n    window.setTimeout(function () {\\n      window.location.reload(true);\\n    }, 500);\\n  } else if (not_loop_msg) {\\n    let header = (document.body && document.body.firstChild) || document.documentElement;\\n    header_nofix(header, '', 'BPC > refresh loop stopped');\\n  }\\n}\\n\\nfunction archiveRandomDomain() {\\n  let tld_array = ['fo', 'is', 'li', 'md', 'ph', 'vn'];\\n  let tld = tld_array[randomInt(6)];\\n  return 'archive.' + tld;\\n}\\n\\nfunction archiveLink(url, text_fail = 'BPC > Try for full article text (no need to report issue for external site):\\\\r\\\\n') {\\n  return externalLink(['archive.today', archiveRandomDomain()], 'https://{domain}?run=1&url={url}', url, text_fail);\\n}\\n\\nfunction archiveLink_renew(url, text_fail = 'BPC > Only use to renew if text is incomplete or updated:\\\\r\\\\n') {\\n  return externalLink([new URL(url).hostname], '{url}/again?url=' + window.location.href.split(/[#\\\\?]/)[0], url, text_fail);\\n}\\n\\nfunction googleSearchToolLink(url, text_fail = 'BPC > Try for full article text (test url & copy html (tab) code to [https://codebeautify.org/htmlviewer]):\\\\r\\\\n') {\\n  return externalLink(['search.google.com'], 'https://search.google.com/test/rich-results?url={url}', encodeURIComponent(url), text_fail);\\n}\\n\\nfunction freediumLink(url, text_fail = 'BPC > Try for full article text:\\\\r\\\\n') {\\n  return externalLink(['freedium.cfd'], 'https://{domain}/{url}', url, text_fail);\\n}\\n\\nfunction readMediumLink(url, text_fail = 'BPC > Try for full article text:\\\\r\\\\n') {\\n  return externalLink(['readmedium.com'], 'https://{domain}/{url}', url, text_fail);\\n}\\n\\nfunction externalLink(domains, ext_url_templ, url, text_fail = 'BPC > Full article text:\\\\r\\\\n') {\\n  let text_fail_div = document.createElement('div');\\n  text_fail_div.id = 'bpc_archive';\\n  text_fail_div.setAttribute('style', 'margin: 20px; font-size: 20px; font-weight: bold; color: red;');\\n  let parser = new DOMParser();\\n  text_fail = text_fail.replace(/\\\\[(?<url>[^\\\\]]+)\\\\]/g, function (match, url) {\\n    return \\\"<a href='\\\" + url + \\\"' target='_blank' style='color: red'>\\\" + new URL(url).hostname + \\\"</a>\\\";\\n  });\\n  let doc = parser.parseFromString('<span>' + text_fail + '</span>', 'text/html');\\n  let elem = doc.querySelector('span');\\n  text_fail_div.appendChild(elem);\\n  for (let domain of domains) {\\n    let ext_url = ext_url_templ.replace('{domain}', domain).replace('{url}', url.split('?')[0]);\\n    let a_link = document.createElement('a');\\n    a_link.innerText = domain;\\n    a_link.href = ext_url;\\n    a_link.target = '_blank';\\n    text_fail_div.appendChild(document.createTextNode(' | '));\\n    text_fail_div.appendChild(a_link);\\n  }\\n  return text_fail_div;\\n}\\n\\nfunction removeClassesByPrefix(el, prefix) {\\n  let el_classes = el.classList;\\n  for (let el_class of el_classes) {\\n    if (el_class.startsWith(prefix))\\n      el_classes.remove(el_class);\\n  }\\n}\\n\\nfunction removeClassesList(list) {\\n  for (let class_item of list) {\\n    let elems = document.querySelectorAll('.' + class_item);\\n    for (let elem of elems)\\n      elem.classList.remove(class_item);\\n  }\\n}\\n\\nfunction cookieExists(name) {\\n  return document.cookie.split(';').some(function (item) {\\n    return item.trim().indexOf(name + '=') === 0\\n  })\\n}\\n\\nfunction matchCookies(name) {\\n  return document.cookie.split(';').filter(x => x.trim().match(name)).map(y => y.split('=')[0].trim())\\n}\\n\\nfunction setCookie(names, value, domain = '', path = '/', days = 0, localstorage_hold = false) {\\n  var max_age = days * 24 * 60 * 60;\\n  let ck_names = Array.isArray(names) ? names : [];\\n  if (names instanceof RegExp)\\n    ck_names = matchCookies(names);\\n  else if (typeof names === 'string')\\n    ck_names = [names];\\n  for (let ck_name of ck_names) {\\n    document.cookie = ck_name + \\\"=\\\" + (value || \\\"\\\") + (domain ? \\\"; domain=\\\" + domain : '') + (path ? \\\"; path=\\\" + path : '') + \\\"; max-age=\\\" + max_age;\\n  }\\n  if (!localstorage_hold) {\\n    window.localStorage.clear();\\n    window.sessionStorage.clear();\\n  }\\n}\\n\\nfunction insert_script(func, insertAfterDom) {\\n  let bpc_script = document.querySelector('script#bpc_script');\\n  if (!bpc_script) {\\n    let script = document.createElement('script');\\n    script.setAttribute('id', 'bpc_script');\\n    script.appendChild(document.createTextNode('(' + func + ')();'));\\n    let insertAfter = insertAfterDom ? insertAfterDom : (document.body || document.head || document.documentElement);\\n    insertAfter.appendChild(script);\\n  }\\n}\\n\\nfunction getSourceJsonScript(filter, attributes = ':not([src], [type])') {\\n  if (typeof filter === 'string')\\n    filter = new RegExp(filter);\\n  let scripts = document.querySelectorAll('script' + attributes);\\n  for (let script of scripts) {\\n    if (script.text.match(filter))\\n      return script;\\n  }\\n  return false;\\n}\\n\\nfunction getArticleJsonScript() {\\n  let scripts = document.querySelectorAll('script[type=\\\"application/ld+json\\\"]');\\n  let json_script;\\n  for (let script of scripts) {\\n    if (script.innerText.match(/\\\"(articlebody|text)\\\":/i)) {\\n      json_script = script;\\n      break;\\n    }\\n  }\\n  return json_script;\\n}\\n\\nfunction restorePugpigLink(node, art_link_sel = '') {\\n  let art_link = !art_link_sel ? node : node.querySelector(art_link_sel);\\n  if (art_link)\\n    art_link.onmousedown = x => window.location.href = art_link.href;\\n}\\n\\nfunction restorePugpigPage() {\\n  let art_link_sel = 'a.pp-widget-article, a.pp-related__link';\\n  document.querySelectorAll(art_link_sel).forEach(e => restorePugpigLink(e));\\n  waitDOMElement(art_link_sel, 'A', restorePugpigLink, true);\\n  waitDOMElement('li[class^=\\\"collection_type-\\\"]', 'LI', node => restorePugpigLink(node, art_link_sel), true);\\n  let modal = 'section.modal';\\n  hideDOMStyle(modal);\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall)\\n    refreshCurrentTab();\\n}\\n\\nfunction getArticleQuintype() {\\n  let article_new;\\n  let json_script = document.querySelector('script#static-page');\\n  if (json_script) {\\n    try {\\n      article_new = document.createElement('div');\\n      let parser = new DOMParser();\\n      let json = JSON.parse(json_script.text);\\n      let slug = decodeURIComponent(json.qt.data.story.slug);\\n      if (slug && !decodeURIComponent(window.location.pathname).includes(slug))\\n        refreshCurrentTab();\\n      let pars = json.qt.data.story.cards;\\n      for (let par of pars) {\\n        let story_elements = par['story-elements'];\\n        for (let elem of story_elements) {\\n          let par_elem;\\n          if (['text', 'title'].includes(elem.type) && elem.text) {\\n            let doc = parser.parseFromString('<div style=\\\"margin: 25px 0px\\\">' + elem.text + '</div>', 'text/html');\\n            par_elem = doc.querySelector('div');\\n          } else if (elem.type === 'image') {\\n            if (elem['image-s3-key']) {\\n              par_elem = document.createElement('figure');\\n              let img = document.createElement('img');\\n              img.src = 'https://media.assettype.com/' + elem['image-s3-key'];\\n              par_elem.appendChild(img);\\n              if (elem.title) {\\n                let caption = document.createElement('figcaption');\\n                if (elem.title.includes('</')) {\\n                  let doc = parser.parseFromString('<div>' + elem.title + '</div>', 'text/html');\\n                  caption.appendChild(doc.querySelector('div'));\\n                } else\\n                  caption.innerText = elem.title;\\n                par_elem.appendChild(caption);\\n              }\\n            }\\n          } else if (elem.type === 'jsembed') {\\n            if (elem.subtype === 'tweet') {\\n              if (elem.metadata && elem.metadata['tweet-url']) {\\n                par_elem = document.createElement('a');\\n                par_elem.href = par_elem.innerText = elem.metadata['tweet-url'];\\n                par_elem.target = '_blank';\\n              } else\\n                console.log(elem);\\n            }\\n          } else if (elem.type === 'youtube-video') {\\n            if (elem['embed-url']) {\\n              par_elem = document.createElement('iframe');\\n              par_elem.src = elem['embed-url'];\\n              par_elem.style = 'width: 100%; height: 400px;';\\n            }\\n          } else if (elem.type === 'file') {\\n            if (elem.url && elem['file-name']) {\\n              par_elem = document.createElement('a');\\n              par_elem.href = elem.url;\\n              par_elem.innerText = elem['file-name'];\\n              par_elem.target = '_blank';\\n            }\\n          } else if (!['widget'].includes(elem.type))\\n            console.log(elem);\\n          if (par_elem)\\n            article_new.appendChild(par_elem);\\n        }\\n      }\\n      if (!article_new.hasChildNodes())\\n        article_new = '';\\n    } catch (err) {\\n      console.log(err);\\n    }\\n  }\\n  return article_new;\\n}\\n\\nfunction filterObject(obj, filterFn, mapFn = function (val, key) {\\n  return [key, val];\\n}) {\\n  return Object.fromEntries(Object.entries(obj).\\n    filter(([key, val]) => filterFn(val, key)).map(([key, val]) => mapFn(val, key)));\\n}\\n\\nfunction matchKeyJson(key, keys) {\\n  let match = false;\\n  if (typeof keys === 'string')\\n    match = (key === keys);\\n  else if (Array.isArray(keys))\\n    match = keys.includes(key);\\n  else if (keys instanceof RegExp)\\n    match = keys.test(key);\\n  return match;\\n}\\n\\nfunction findKeyJson(json, keys, min_val_len = 0) {\\n  let source = '';\\n  if (Array.isArray(json)) {\\n    for (let elem of json)\\n      source = source || findKeyJson(elem, keys, min_val_len);\\n  } else if (typeof json === 'object') {\\n    for (let elem in json) {\\n      let json_elem = json[elem];\\n      if (typeof json_elem === 'string' && matchKeyJson(elem, keys)) {\\n        if (json_elem.length > min_val_len)\\n          return json_elem;\\n      } else if (Array.isArray(json_elem) && json_elem.length > 1 && matchKeyJson(elem, keys)) {\\n        return json_elem;\\n      } else\\n        source = source || findKeyJson(json_elem, keys, min_val_len);\\n    }\\n  }\\n  return source;\\n}\\n\\nfunction getNestedKeys(obj, key) {\\n  if (key in obj)\\n    return obj[key];\\n  let keys = key.split('.');\\n  let value = obj;\\n  for (let i = 0; i < keys.length; i++) {\\n    value = value[keys[i]];\\n    if (value === undefined)\\n      break;\\n  }\\n  return value;\\n}\\n\\nfunction getJsonUrlText(article, callback, article_id = '', key = '', url_rest = false, url_slash = false) {\\n  let json_url_dom = document.querySelector('head > link[rel=\\\"alternate\\\"][type=\\\"application/json\\\"][href]');\\n  let json_url;\\n  if (json_url_dom)\\n    json_url = json_url_dom.href;\\n  if (!json_url && article_id)\\n    json_url = window.location.origin + '/wp-json/wp/v2/posts/' + article_id;\\n  if (url_rest)\\n    json_url = json_url.replace('/wp-json/', '/?rest_route=/');\\n  else if (url_slash)\\n    json_url = json_url.replace('/wp-json/', '//wp-json/');\\n  if (json_url) {\\n    fetch(json_url)\\n    .then(response => {\\n      if (response.ok) {\\n        response.text().then(html => {\\n          try {\\n            let json = JSON.parse(html.replace(/<script>[\\\\S\\\\s]+<\\\\/script>/g, ''));\\n            let json_text = parseHtmlEntities(!key ? json.content.rendered : getNestedKeys(json, key));\\n            if (json_text && json_text !== 'undefined')\\n              callback(json_text, article);\\n          } catch (err) {\\n            console.log(err);\\n          }\\n        });\\n      }\\n    });\\n  }\\n}\\n\\nfunction getJsonUrlAdd(json_text, article, art_options = {}) {\\n  let art_type = 'div';\\n  let art_attrib = '';\\n  if (Object.keys(art_options).length) {\\n    if (art_options.art_type)\\n      art_type = art_options.art_type;\\n    if (art_options.art_class)\\n      art_attrib += ' class=\\\"' + art_options.art_class + '\\\"';\\n    if (art_options.art_id)\\n      art_attrib += ' id=\\\"' + art_options.art_id + '\\\"';\\n    if (art_options.art_style)\\n      art_attrib += ' style=\\\"' + art_options.art_style + '\\\"';\\n    if (art_options.func_text)\\n      json_text = art_options.func_text(json_text);\\n  }\\n  let parser = new DOMParser();\\n  let doc = parser.parseFromString('<' + art_type + art_attrib + '>' + json_text + '</' + art_type + '>', 'text/html');\\n  let article_new = doc.querySelector(art_type);\\n  if (art_options.art_append || !article.parentNode) {\\n    if (!art_options.art_hold)\\n      article.innerHTML = '';\\n    article.appendChild(article_new);\\n  } else\\n    article.parentNode.replaceChild(article_new, article);\\n  if (func_post)\\n    func_post();\\n}\\n\\nfunction getJsonUrl(paywall_sel, paywall_action = '', article_sel, art_options = {}, article_id = '', key = '', url_rest = false, url_slash = false) {\\n  let paywall = document.querySelectorAll(paywall_sel);\\n  let article = document.querySelector(article_sel);\\n  if (paywall.length && article) {\\n    clearPaywall(paywall, paywall_action);\\n    getJsonUrlText(article, (json_text, article) => {\\n      if (json_text && article)\\n        getJsonUrlAdd(json_text, article, art_options);\\n    }, article_id, key, url_rest, url_slash);\\n  }\\n}\\n\\nfunction randomInt(max) {\\n  return Math.floor(Math.random() * Math.floor(max));\\n}\\n\\nfunction randomIP(range_low = 0, range_high = 223) {\\n  let rndmIP = [];\\n  for (let n = 0; n < 4; n++) {\\n    if (n === 0)\\n      rndmIP.push(range_low + randomInt(range_high - range_low + 1));\\n    else\\n      rndmIP.push(randomInt(255) + 1);\\n  }\\n  return rndmIP.join('.');\\n}\\n\\nfunction pageContains(selector, text) {\\n  let elements = document.querySelectorAll(selector);\\n  return Array.prototype.filter.call(elements, function (element) {\\n    return RegExp(text).test(element.textContent);\\n  });\\n}\\n\\nfunction findOverlap(a, b) {\\n  if (b.length === 0)\\n    return \\\"\\\";\\n  if (a.endsWith(b))\\n    return b;\\n  return findOverlap(a, b.substring(0, b.length - 1));\\n}\\n\\nfunction breakText(str, headers = false) {\\n  str = str.replace(/(?:^|[A-Za-z\\\\\\\"\\\\\\u201c\\\\\\u201d\\\\)])(\\\\.+|\\\\?|!)(?=[A-Z\\u00d6\\u00dc\\\\\\u201e\\\\\\u201d\\\\d][A-Za-z\\u00c0-\\u00ff\\\\\\u201e\\\\d]{1,})/gm, \\\"$&\\\\n\\\\n\\\");\\n  if (headers)\\n    str = str.replace(/(([a-z]{2,}|[\\\\\\\"\\\\\\u201c]))(?=[A-Z](?=[A-Za-z\\u00c0-\\u00ff]+))/gm, \\\"$&\\\\n\\\\n\\\");\\n  return str;\\n}\\n\\nfunction parseHtmlEntities(encodedString) {\\n  let parser = new DOMParser();\\n  let doc = parser.parseFromString('<textarea>' + encodedString + '</textarea>', 'text/html');\\n  let dom = doc.querySelector('textarea');\\n  return dom.value;\\n}\\n\\nfunction encode_utf8(str) {\\n  return unescape(encodeURIComponent(str));\\n}\\n\\nfunction decode_utf8(str) {\\n  return decodeURIComponent(escape(str));\\n}\\n\\nfunction ads_hide() {\\n  var overlay = document.querySelector('body.didomi-popup-open');\\n  if (overlay)\\n    overlay.classList.remove('didomi-popup-open');\\n  var ads = 'div.OUTBRAIN, div[id^=\\\"taboola-\\\" i], div.ad-container, div[class*=\\\"-ad-container\\\"], div[class*=\\\"_ad-container\\\"], div.arc_ad, div[id^=\\\"poool-\\\"], amp-ad, amp-embed[type=\\\"mgid\\\"], amp-embed[type=\\\"outbrain\\\"], amp-embed[type=\\\"taboola\\\"]';\\n  hideDOMStyle(ads, 10);\\n}\\n\\nfunction leaky_paywall_unhide() {\\n  if (document.querySelector('head > link[href*=\\\"/leaky-paywall\\\"], script[src*=\\\"/leaky-paywall\\\"], div[id^=\\\"issuem-leaky-paywall-\\\"]')) {\\n    let js_cookie = document.querySelector('script#leaky_paywall_cookie_js-js-extra');\\n    if (js_cookie && js_cookie.text.includes('\\\"post_container\\\":\\\"')) {\\n      let post_sel = js_cookie.text.split('\\\"post_container\\\":\\\"')[1].split('\\\"')[0];\\n      if (post_sel) {\\n        let post = document.querySelector(post_sel);\\n        if (post)\\n          post.removeAttribute('class');\\n      }\\n    }\\n  }\\n}\\n\\n(function() {\\n  //'use strict';\\n\\nif (window.top !== window.self && !matchDomain(['app.historytoday.com', 'appan.newscientist.com']))\\n  return;\\n\\nvar usa_adv_local_domains = ['al.com', 'cleveland.com', 'lehighvalleylive.com', 'masslive.com', 'mlive.com', 'nj.com', 'oregonlive.com', 'pennlive.com', 'silive.com', 'syracuse.com'];\\n\\nif (matchDomain(['adage.com', 'autonews.com', 'pionline.com'])) {\\n  function crain_main() {\\n    if (window.Fusion) {\\n      window.Fusion.globalContent._id = 0;\\n      window.Fusion.globalContent.content_restrictions = {};\\n    }\\n  }\\n  window.setTimeout(function () {\\n    insert_script(crain_main);\\n  }, 100);\\n}\\n\\nelse if (matchDomain('nzherald.co.nz')) {\\n  function nzherald_main() {\\n    if (window.Fusion)\\n      window.Fusion.globalContent.isPremium = false;\\n  }\\n  window.setTimeout(function () {\\n    insert_script(nzherald_main);\\n  }, 100);\\n}\\n\\nelse if (matchDomain(['thehindu.com', 'thehindubusinessline.com'])) {\\n  function hindu_main() {\\n    if (window) {\\n      window.Adblock = false;\\n      window.isNonSubcribed = false;\\n    }\\n  }\\n  window.setTimeout(function () {\\n    insert_script(hindu_main);\\n  }, 100);\\n}\\n\\nelse if (matchDomain(usa_adv_local_domains)) {\\n  function adv_main() {\\n    if (window.adiData) {\\n      window.adiData.entryTags = 0;\\n    }\\n  }\\n  window.setTimeout(function () {\\n    insert_script(adv_main);\\n  }, 100);\\n}\\n\\nwindow.setTimeout(function () {\\n\\nvar ca_torstar_domains = ['niagarafallsreview.ca', 'stcatharinesstandard.ca', 'thepeterboroughexaminer.com', 'therecord.com', 'thespec.com', 'thestar.com', 'wellandtribune.ca'];\\nvar ke_nation_media_domains = ['businessdailyafrica.com', 'nation.africa'];\\nvar medium_custom_domains = ['betterprogramming.pub', 'towardsdatascience.com'];\\nvar no_dn_media_domains = ['dn.no', 'europower.no', 'fiskeribladet.no', 'hydrogeninsight.com', 'intrafish.com', 'intrafish.no', 'kystens.no', 'rechargenews.com', 'tradewindsnews.com', 'upstreamonline.com'];\\nvar sg_sph_media_domains = ['businesstimes.com.sg', 'straitstimes.com'];\\nvar uk_dmg_media_domains = ['dailymail.co.uk', 'mailonsunday.co.uk', 'thisismoney.co.uk'];\\nvar uk_nat_world_domains = ['scotsman.com', 'yorkshirepost.co.uk'];\\nvar usa_arizent_custom_domains = ['accountingtoday.com', 'benefitnews.com', 'bondbuyer.com', 'dig-in.com', 'financial-planning.com', 'nationalmortgagenews.com'];\\nvar usa_conde_nast_domains = ['architecturaldigest.com', 'bonappetit.com', 'cntraveler.com', 'epicurious.com', 'gq.com' , 'newyorker.com', 'vanityfair.com', 'vogue.co.uk', 'vogue.com', 'wired.com'];\\nvar usa_craincomm_domains = ['360dx.com', 'adage.com', 'autonews.com', 'chicagobusiness.com', 'crainscleveland.com', 'crainsdetroit.com', 'crainsgrandrapids.com', 'crainsnewyork.com', 'european-rubber-journal.com', 'genomeweb.com', 'modernhealthcare.com', 'pionline.com', 'plasticsnews.com', 'precisionmedicineonline.com', 'rubbernews.com', 'sustainableplastics.com', 'tirebusiness.com', 'utech-polyurethane.com'];\\nvar usa_gannett_domains = ['azcentral.com', 'cincinnati.com', 'commercialappeal.com', 'courier-journal.com', 'democratandchronicle.com', 'desmoinesregister.com', 'detroitnews.com', 'dispatch.com', 'freep.com', 'indystar.com', 'jacksonville.com', 'jsonline.com', 'knoxnews.com', 'news-press.com', 'northjersey.com', 'oklahoman.com', 'palmbeachpost.com', 'tennessean.com'];\\nvar usa_hearst_comm_domains = ['ctpost.com', 'expressnews.com', 'houstonchronicle.com', 'nhregister.com', 'sfchronicle.com', 'statesman.com', 'timesunion.com'];\\nvar usa_lee_ent_domains = ['buffalonews.com', 'journalnow.com', 'journalstar.com', 'madison.com', 'nwitimes.com', 'omaha.com', 'richmond.com', 'stltoday.com', 'tucson.com', 'tulsaworld.com'];\\nvar usa_mcc_domains = ['bnd.com', 'charlotteobserver.com', 'elnuevoherald.com', 'fresnobee.com', 'kansas.com', 'kansascity.com', 'kentucky.com', 'mcclatchydc.com', 'miamiherald.com', 'newsobserver.com', 'sacbee.com', 'star-telegram.com', 'thestate.com', 'tri-cityherald.com'];\\nvar usa_mng_domains = ['bostonherald.com', 'denverpost.com', 'eastbaytimes.com', 'mercurynews.com', 'ocregister.com', 'pressenterprise.com', 'sandiegouniontribune.com', 'twincities.com'];\\nvar usa_nymag_domains = ['curbed.com', 'grubstreet.com', 'nymag.com', 'thecut.com', 'vulture.com'];\\nvar usa_outside_mag_domains = [\\\"backpacker.com\\\", \\\"betamtb.com\\\", \\\"betternutrition.com\\\", \\\"cleaneatingmag.com\\\", \\\"climbing.com\\\", \\\"outsideonline.com\\\", \\\"oxygenmag.com\\\", \\\"skimag.com\\\", \\\"trailrunnermag.com\\\", \\\"triathlete.com\\\", \\\"vegetariantimes.com\\\", \\\"womensrunning.com\\\", \\\"yogajournal.com\\\"];\\nvar usa_penske_media_domains = ['billboard.com', 'rollingstone.com', 'sourcingjournal.com', 'sportico.com', 'variety.com', 'wwd.com'];\\nvar usa_tribune_domains = ['baltimoresun.com', 'capitalgazette.com', 'chicagotribune.com', 'courant.com', 'dailypress.com', 'mcall.com', 'nydailynews.com', 'orlandosentinel.com', 'pilotonline.com', 'sun-sentinel.com'];\\n\\nif (matchDomain('gitflic.ru')) {\\n  if (window.location.pathname.startsWith('/project/magnolia1234/bpc_uploads') && document.head) {\\n    let sheet = document.createElement('style');\\n    let path_short = window.location.pathname.replace('/project/magnolia1234/bpc_uploads', '');\\n    if (!path_short)\\n      sheet.innerText = 'div[data-cell-type=\\\"commit\\\"], div[data-cell-type=\\\"date\\\"] {display: none !important;} div[data-cell-type=\\\"filename\\\"] {flex: 0 0 100% !important;}';\\n    else if (path_short.match(/^\\\\/(blob|file)/))\\n      sheet.innerText = 'div.project-files-tree, div.project-files-list {flex: 0 0 50% !important; max-width: 50% !important;}';\\n    if (sheet.innerText)\\n      document.head.appendChild(sheet);\\n  }\\n}\\n\\nif (matchDomain('medium.com') || matchDomain(medium_custom_domains) || document.querySelector('head > link[href*=\\\".medium.com/\\\"]')) {\\n  let url = window.location.href;\\n  let paywall = document.querySelector('article.meteredContent');\\n  if (paywall) {\\n    paywall.removeAttribute('class');\\n    let header = paywall.querySelector('h1');\\n    if (header) {\\n      header.before(freediumLink(url));\\n      header.before(readMediumLink(url));\\n    }\\n  }\\n  window.setTimeout(function () {\\n    let banner = pageContains('div > div > p', /author made this story available to/);\\n    if (banner.length)\\n      removeDOMElement(banner[0].parentNode.parentNode);\\n  }, 1000);\\n}\\n\\nelse if (window.location.hostname.match(/\\\\.(au|nz)$/) || matchDomain(['afr.com'])) {//australia & new zealand\\n\\nif (matchDomain('afr.com')) {\\n  let error = document.querySelector('div[data-testid=\\\"DefaultError\\\"]');\\n  if (error)\\n    refreshCurrentTab();\\n  let article_sel = '#endOfArticle:not(:empty)';\\n  let article = document.querySelector(article_sel);\\n  if (!article) {\\n    article_sel = '#body-content';\\n    article = document.querySelector(article_sel);\\n  }\\n  if (article) {\\n    window.setTimeout(function () {\\n      let pars = article.querySelectorAll('p:not([class]), p[class*=\\\"-defaultWrapper\\\"], figure:not(:empty)');\\n      let pagination = document.querySelector('div > span#pagination-top');\\n      if ((pars.length && pars.length < 5) || pagination) {\\n        if (pagination) {\\n          removeDOMElement(pagination.parentNode);\\n        } else {\\n          let loading = pageContains(article_sel + ' div', 'Loading...');\\n          removeDOMElement(...pars, ...loading);\\n        }\\n        let url = window.location.href.split(/[#\\\\?]/)[0];\\n        fetch(url)\\n        .then(response => {\\n          if (response.ok) {\\n            response.text().then(html => {\\n              if (html.includes('__REDUX_STATE__=')) {\\n                try {\\n                  let json = JSON.parse(html.split('__REDUX_STATE__=')[1].split('};')[0].replace(/:undefined([,}])/g, ':0$1').replace(/new\\\\sMap\\\\(\\\\[[^{]*\\\\]\\\\)/g, 0) + '}');\\n                  if (json) {\\n                    let placeholders;\\n                    function find_item(match, p1, offset, string) {\\n                      let placeholder_id = p1;\\n                      let result = '';\\n                      if (placeholder_id && placeholders[placeholder_id]) {\\n                        let item = placeholders[placeholder_id];\\n                        if (item.data) {\\n                          if (['linkArticle', 'linkExternal'].includes(item.type)) {\\n                            if (item.data.text) {\\n                              if (item.data.url)\\n                                result = '<a href=\\\"' + item.data.url + '\\\"' + (item.data.newTab ? 'target=\\\"_blank\\\"' : '') + '>' + item.data.text + '</a>';\\n                              else\\n                                result = item.data.text;\\n                            }\\n                          } else if (item.type === 'image') {\\n                            if (item.data.fileName) {\\n                              let credit = (item.data.credit && item.data.credit.trim()) || item.data.source;\\n                              result = '<figure><img src=\\\"https://static.ffx.io/images/w_960/' + item.data.fileName + '\\\" style=\\\"width: 100%;\\\"><figcaption>' + (item.data.caption ? item.data.caption : '') + (credit ? '<span style=\\\"font-weight: bold;\\\">&nbsp;' + credit + '</span>' : '') + '</figcaption></figure>';\\n                            }\\n                          } else if (item.type === 'youtube') {\\n                            if (item.data.url) {\\n                              if (item.data.url.includes('watch?v='))\\n                                result = '<iframe src=\\\"' + item.data.url.replace('watch?v=', 'embed/') + '\\\" style=\\\"width: 100%; height: 400px;\\\"></iframe>';\\n                              else\\n                                result = '<a href=\\\"' + item.data.url + '\\\" target=\\\"_blank\\\">' + item.data.url + '</a>';\\n                            }\\n                          } else if (['instagram', 'twitter'].includes(item.type)) {\\n                            if (item.data.url)\\n                              result = '<a href=\\\"' + item.data.url + '\\\" target=\\\"_blank\\\">' + item.data.url + '</a>';\\n                          } else if (item.type === 'iframe') {\\n                            if (item.data.url)\\n                              result = '<iframe src=\\\"' + item.data.url + '\\\" style=\\\"width: 100%; height: 400px; border: none;\\\"></iframe>';\\n                          } else if (!['callout', 'quote', 'relatedStory', 'video'].includes(item.type)) {\\n                            console.log(item);\\n                          }\\n                        }\\n                      }\\n                      return result;\\n                    }\\n                    let json_text = json.page.content.asset.body;\\n                    if (json_text) {\\n                      placeholders = json.page.content.asset.bodyPlaceholders;\\n                      if (placeholders)\\n                        json_text = json_text.replace(/<x-placeholder id=\\\"(\\\\w+)\\\"><\\\\/x-placeholder>/g, find_item);\\n                      let parser = new DOMParser();\\n                      let doc = parser.parseFromString('<div>' + json_text + '</div>', 'text/html');\\n                      let content_new = doc.querySelector('div');\\n                      let widget = document.querySelector('div[class$=\\\"-wrapper\\\"] > div#WidgetContainer');\\n                      if (article_sel.startsWith('#endOfArticle')) {\\n                        article.parentNode.replaceChild(content_new, article);\\n                        if (widget)\\n                          content_new.firstChild.before(widget.parentNode);\\n                        window.setTimeout(function () {\\n                          content_new.id = 'endOfArticle';\\n                        }, 500);\\n                      } else\\n                        article.firstChild.before(content_new);\\n                      addStyle(article_sel + ' p {margin: 20px 0px;}');\\n                    } else {\\n                      let parser = new DOMParser();\\n                      let posts = json.page.content.asset.posts;\\n                      article.innerHTML = '';\\n                      for (let post of posts) {\\n                        let asset = post.asset;\\n                        if (asset && asset.body) {\\n                          let json_text = asset.body;\\n                          placeholders = asset.bodyPlaceholders;\\n                          if (placeholders)\\n                            json_text = json_text.replace(/<x-placeholder id=\\\"(\\\\w+)\\\"><\\\\/x-placeholder>/g, find_item);\\n                          let doc = parser.parseFromString('<section>' + json_text + '</section>', 'text/html');\\n                          let par = doc.querySelector('section');\\n                          let header;\\n                          if (asset.headlines && asset.headlines.headline) {\\n                            header = document.createElement('h2');\\n                            header.innerText = asset.headlines.headline;\\n                            header.id = post.id;\\n                          }\\n                          let byline;\\n                          if (asset.byline) {\\n                            byline = document.createElement('p');\\n                            byline.innerText = asset.byline;\\n                            byline.style = 'margin-bottom: 24px;'\\n                          }\\n                          article.append(header, byline, par);\\n                        }\\n                      }\\n                      addStyle('section:not([class]) > p {margin: 24px 0px;}');\\n                      let key_posts = document.querySelectorAll('li > a[href*=\\\"?post=\\\"]');\\n                      for (let elem of key_posts)\\n                        elem.href = elem.href.replace('?post=', '#');\\n                    }\\n                  }\\n                } catch (err) {\\n                  console.log(err);\\n                }\\n              }\\n            });\\n          }\\n        }).catch(function (err) {\\n          false;\\n        });\\n      }\\n    }, 1000);\\n  }\\n}\\n\\nelse if (matchDomain('businessdesk.co.nz')) {\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    paywall.classList.remove('paywall');\\n    let signup_box = document.querySelector('div.signup-box-container');\\n    removeDOMElement(signup_box);\\n    let url = window.location.href.split(/[#\\\\?]/)[0];\\n    fetch(url, {headers: {\\\"User-Agent\\\": \\\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36\\\"}})\\n    .then(response => {\\n      if (response.ok) {\\n        response.text().then(html => {\\n          let match = html.match(/:query=\\\"'([^\\\"]+)'\\\"/);\\n          if (match) {\\n            let parser = new DOMParser();\\n            let src_text = breakText(parseHtmlEntities(match[1])).replace(/\\\\n\\\\n/g, '<br><br>').replace(/\\\\.([^\\\\s\\\\d]|&)/g, \\\". $1\\\");\\n            let doc = parser.parseFromString('<div>' + src_text + '</div>', 'text/html');\\n            let content_new = doc.querySelector('div');\\n            paywall.innerHTML = '';\\n            paywall.appendChild(content_new);\\n          }\\n        })\\n      }\\n    })\\n  }\\n}\\n\\nelse if (matchDomain(['crikey.com.au', 'smartcompany.com.au', 'themandarin.com.au'])) {\\n  let ads = 'div.wp-block-pm-ad-placeholder-block';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('forbes.com.au')) {\\n  setCookie('blaize_session', '', 'forbes.com.au', '/', 0);\\n  getJsonUrl('div[class*=\\\"_gate\\\"]', '', 'div.article-page__content-body');\\n  let fade = document.querySelector('div[style*=\\\"background-image: linear-gradient\\\"]');\\n  removeDOMElement(fade);\\n}\\n\\nelse if (matchDomain('macrobusiness.com.au')) {\\n  let paywall = pageContains('div > p', 'The full text of this article is available');\\n  if (paywall[0]) {\\n    let fade = document.querySelector('div.bg-gradient-to-t');\\n    removeDOMElement(paywall[0].parentNode, fade);\\n    let json_script = document.querySelector('script#__NUXT_DATA__');\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse(json_script.text);\\n        let json_text = json.filter(x => typeof x === 'string' && x.match(/(<|\\\\\\\\u003C)p>/))[0];\\n        if (json_text) {\\n          let parser = new DOMParser();\\n          let doc = parser.parseFromString('<div>' + json_text + '</div>', 'text/html');\\n          let content_new = doc.querySelector('div');\\n          let article = document.querySelector('div.content');\\n          if (article) {\\n            article.innerHTML = '';\\n            article.appendChild(content_new);\\n          }\\n        } else\\n          refreshCurrentTab();\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('nzherald.co.nz')) {\\n  // use bpc adblocker filter\\n  let premium_toaster = '#premium-toaster';\\n  hideDOMStyle(premium_toaster);\\n}\\n\\nelse if (matchDomain('spectator.com.au')) {\\n  getJsonUrl('section.paywall', '', 'div.article-body', {art_append: 1});\\n}\\n\\nelse if (matchDomain('thesaturdaypaper.com.au')) {\\n  let hide_end = document.querySelector('div.hide-end');\\n  if (hide_end)\\n    refreshCurrentTab();\\n  let paywall = document.querySelector('div.paywall-hard-always-show');\\n  removeDOMElement(paywall);\\n}\\n\\nelse if (matchDomain(['brisbanetimes.com.au', 'smh.com.au', 'theage.com.au', 'watoday.com.au'])) {\\n  if (!window.location.hostname.startsWith('amp.')) {\\n    amp_redirect('head > meta[content^=\\\"FOR SUBSCRIBERS\\\"], #paywall_prompt');\\n  } else {\\n    amp_unhide_subscr_section();\\n  }\\n}\\n\\nelse {\\n  // Australian Community Media newspapers\\n  let au_comm_media_domains = ['bendigoadvertiser.com.au', 'bordermail.com.au', 'canberratimes.com.au', 'centralwesterndaily.com.au', 'dailyadvertiser.com.au', 'dailyliberal.com.au', 'examiner.com.au', 'illawarramercury.com.au', 'newcastleherald.com.au', 'northerndailyleader.com.au', 'standard.net.au', 'theadvocate.com.au', 'thecourier.com.au', 'westernadvocate.com.au'];\\n  if (matchDomain(au_comm_media_domains) || document.querySelector('div#footer a[href^=\\\"https://acm.media/\\\"]')) {\\n    let mask = document.querySelector('div[class^=\\\"gradient-mask-\\\"]');\\n    if (mask) {\\n      mask.removeAttribute('class');\\n      let div_hidden = document.querySelectorAll('div.flex-col div.hidden');\\n      for (let elem of div_hidden)\\n        elem.classList.remove('hidden');\\n    } else {\\n      let subscribe_truncate = document.querySelector('.subscribe-truncate');\\n      if (subscribe_truncate)\\n        subscribe_truncate.classList.remove('subscribe-truncate');\\n      let subscriber_hiders = document.querySelectorAll('.subscriber-hider');\\n      for (let subscriber_hider of subscriber_hiders)\\n        subscriber_hider.classList.remove('subscriber-hider');\\n    }\\n    let noscroll = document.querySelectorAll('html[style], body[style]');\\n    for (let elem of noscroll)\\n      elem.removeAttribute('style');\\n    let story_generic_iframe = '.story-generic__iframe';\\n    let blocker = 'div.blocker';\\n    let overlays = 'div.transition-all, div[id^=\\\"headlessui-dialog\\\"]';\\n    let ads = '.ad-placeholder, .sticky, [id*=\\\"-container\\\"], #hindsight-ads-iframe, div.vf3-conversations-list__promo, div#tbl-next-up, iframe[data-ad-id]';\\n    hideDOMStyle(story_generic_iframe + ', ' + blocker + ', ' + overlays + ', ' + ads);\\n  } else if (window.location.hostname.endsWith('.com.au')) {\\n    // Australia News Corp\\n    let au_news_corp_domains = ['adelaidenow.com.au', 'cairnspost.com.au', 'codesports.com.au', 'couriermail.com.au', 'dailytelegraph.com.au', 'geelongadvertiser.com.au', 'goldcoastbulletin.com.au', 'heraldsun.com.au', 'theaustralian.com.au', 'thechronicle.com.au', 'themercury.com.au', 'townsvillebulletin.com.au', 'weeklytimesnow.com.au'];\\n    if (matchDomain(au_news_corp_domains) || matchDomain('ntnews.com.au')) {\\n      let url = window.location.href;\\n      if (window.location.pathname.startsWith('/subscribe/') && !url.includes('/digitalprinteditions')) {\\n        let og_url = document.querySelector('head > meta[property=\\\"og:url\\\"][content]');\\n        if (og_url) {\\n          let url_new = og_url.content;\\n          if (matchDomain('ntnews.com.au')) {\\n            let article = document.querySelector('div.dsf-article-preview');\\n            if (article) {\\n              article.before(googleSearchToolLink(url_new));\\n            }\\n          } else {\\n            url_new += '?amp';\\n            window.setTimeout(function () {\\n              window.location.href = url_new;\\n            }, 500);\\n          }\\n        }\\n      } else if (window.location.search.match(/[&\\\\?]amp/)) {\\n        amp_unhide_subscr_section('[id^=\\\"ad-mrec-\\\"]', false);\\n        let figure_stretch = document.querySelectorAll('figure.stretch');\\n        for (let elem of figure_stretch)\\n          elem.classList.remove('stretch');\\n        let comments = document.querySelector('#comments-load, .comments-module');\\n        removeDOMElement(comments);\\n      } else {\\n        if (window.location.pathname.includes('/video/') && document.querySelector('div.vms-premium-video'))\\n          header_nofix('div.video-hub');\\n        let ads = '.header_ads-container, .ad-block';\\n        hideDOMStyle(ads);\\n      }\\n    } else {\\n      // Australian Seven West Media\\n      if (matchDomain('thewest.com.au') || document.querySelector('head > link[href=\\\"https://images.thewest.com.au\\\"]')) {\\n        function thewest_main(node) {\\n          let filter = /^window\\\\.PAGE_DATA\\\\s?=\\\\s?/;\\n          let json_script = getSourceJsonScript(filter);\\n          if (json_script) {\\n            let json_text = json_script.text.split(filter)[1];\\n            json_text = json_text.replace(/:undefined([,}])/g, ':\\\"undefined\\\"$1');\\n            try {\\n              let json_article = JSON.parse(json_text);\\n              let json_pub;\\n              for (let key in json_article) {\\n                let json_resolution = json_article[key].data.result.resolution;\\n                if (json_resolution && json_resolution.publication) {\\n                  json_pub = json_resolution.publication;\\n                  break;\\n                }\\n              }\\n              let json_content = [];\\n              let url_loaded;\\n              if (json_pub) {\\n                json_content = json_pub.content.blocks;\\n                url_loaded = json_pub._self;\\n              } else\\n                refreshCurrentTab();\\n              //let json_video = json_pub.mainVideo;\\n              let url = window.location.href;\\n              if (!url_loaded || !url.includes(url_loaded.slice(-10)))\\n                refreshCurrentTab();\\n              let par_elem, par_sub1, par_sub2;\\n              let par_dom = document.createElement('div');\\n              let tweet_id = 1;\\n              for (let par of json_content) {\\n                par_elem = '';\\n                if (par.kind === 'text') {\\n                  par_elem = document.createElement('p');\\n                  par_elem.innerText = par.text;\\n                } else if (par.kind === 'subhead') {\\n                  par_elem = document.createElement('h2');\\n                  par_elem.innerText = par.text;\\n                } else if (par.kind === 'pull-quote') {\\n                  par_elem = document.createElement('i');\\n                  par_elem.innerText = (par.attribution ? par.attribution + ': ' : '') + par.text;\\n                } else if (par.kind === 'embed') {\\n                  if (par.reference.includes('https://omny.fm/') || par.reference.includes('https://docdro.id/')) {\\n                    par_elem = document.createElement('embed');\\n                    par_elem.src = par.reference;\\n                    par_elem.style = 'height:500px; width:100%';\\n                    par_elem.frameborder = '0';\\n                  } else {\\n                    par_elem = document.createElement('a');\\n                    par_elem.href = par.reference;\\n                    par_elem.innerText = par.reference.split('?')[0];\\n                  }\\n                } else if (par.kind === 'unordered-list') {\\n                  if (par.items) {\\n                    par_elem = document.createElement('ul');\\n                    for (let item of par.items)\\n                      if (item.text) {\\n                        par_sub1 = document.createElement('li');\\n                        if (item.intentions[0] && item.intentions[0].href) {\\n                          par_sub2 = document.createElement('a');\\n                          par_sub2.href = item.intentions[0].href;\\n                        } else {\\n                          par_sub2 = document.createElement('span');\\n                        }\\n                        par_sub2.innerText = item.text;\\n                        par_sub1.appendChild(par_sub2);\\n                        par_elem.appendChild(par_sub1);\\n                      }\\n                  }\\n                } else if (par.kind === 'inline') {\\n                  if (par.asset.kind === 'image' && par.asset.original && par.asset.original.reference) {\\n                    par_elem = makeFigure(par.asset.original.reference, par.asset.captionText, {style: 'width:100%'});\\n                  }\\n                } else if (par.kind === 'inline-related') {\\n                  par_elem = document.createElement('p');\\n                  if (par.publications) {\\n                    for (let elem of par.publications) {\\n                      let par_link = document.createElement('a');\\n                      par_link.href = elem._self;\\n                      par_link.innerText = elem.heading;\\n                      par_elem.appendChild(par_link);\\n                      par_elem.appendChild(document.createElement('br'));\\n                    }\\n                  }\\n                } else {\\n                  par_elem = document.createElement('p');\\n                  par_elem.innerText = par.text;\\n                  console.log(par.kind);\\n                }\\n                if (par_elem)\\n                  par_dom.appendChild(par_elem);\\n              }\\n              let content = document.querySelector('div[class*=\\\"StyledArticleContent\\\"]');\\n              if (content) {\\n                content.innerHTML = '';\\n                content.appendChild(par_dom);\\n              } else {\\n                par_dom.setAttribute('style', 'margin: 20px;');\\n                node.before(par_dom);\\n              }\\n            } catch (err) {\\n              console.log(err);\\n            }\\n          }\\n          removeDOMElement(node);\\n        }\\n        let paywall_sel = 'div.paywall div[data-testid*=\\\"BreachScreen\\\"], div[class*=\\\"StyledBreachWallContent\\\"]';\\n        let paywall = document.querySelector(paywall_sel);\\n        if (paywall)\\n          thewest_main(paywall);\\n        waitDOMElement(paywall_sel, 'DIV', thewest_main, true);\\n        let ads = 'div.headerAdvertisement, div.disabled-ad, div.ad-no-notice';\\n        hideDOMStyle(ads);\\n      } else if (document.querySelector('head > link[rel=\\\"dns-prefetch\\\"][href=\\\"//static.ew.mmg.navigacloud.com\\\"]')) { // McPherson Media Group\\n        let paywall = document.querySelector('div#content-Load-message');\\n        if (paywall) {\\n          removeDOMElement(paywall);\\n          let lockable = document.querySelectorAll('div[id^=\\\"lockable-\\\"]');\\n          for (let elem of lockable) {\\n            elem.removeAttribute('style');\\n            elem.removeAttribute('id');\\n          }\\n          let gradient = document.querySelector('div.gradienttext');\\n          if (gradient)\\n            gradient.removeAttribute('class');\\n        }\\n      }\\n    }\\n  }\\n}\\n\\n} else if ((window.location.hostname.match(/\\\\.(ie|uk)$/) && !matchDomain(['vogue.co.uk'])) || matchDomain(['apollo-magazine.com', 'autosport.com', 'decanter.com', 'fnlondon.com', 'ft.com', 'gbnews.com', 'granta.com', 'iai.tv', 'irishexaminer.com', 'motorsportmagazine.com', 'newstatesman.com', 'scotsman.com', 'tes.com', 'the-tls.com', 'thelawyer.com', 'thetimes.com', 'unherd.com'])) {//united kingdom/ireland\\n\\nif (matchDomain('apollo-magazine.com')) {\\n  setCookie('blaize_session', '', 'apollo-magazine.com', '/', 0);\\n  let banner = document.querySelector('#subscribe-ribbon');\\n  removeDOMElement(banner);\\n}\\n\\nelse if (matchDomain('autocar.co.uk')) {\\n  let paywall = document.querySelector('div.ms-block, div.register-block');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = json.articleBody;\\n        let article = document.querySelector('div.block-node');\\n        if (json_text && article) {\\n          article.innerHTML = '';\\n          let article_new = document.createElement('p');\\n          article_new.innerText = json_text;\\n          let fade = document.querySelector('div.article-section > div[style*=\\\"max-height\\\"]');\\n          removeDOMElement(fade);\\n          let url = window.location.href;\\n          article.append(article_new, 'Text-only > for missing media/links: ', googleSearchToolLink(url));\\n        }\\n      }\\n    }\\n  }\\n  let ads = 'div[class*=\\\"-ads-\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('autosport.com')) {\\n  header_nofix('div.ms-article-content > p', 'div.ms-piano_article-banner');\\n}\\n\\nelse if (matchDomain(['belfasttelegraph.co.uk', 'independent.ie'])) {\\n  let paywall = document.querySelector('div[class*=\\\"_fadetowhite\\\"]');\\n  if (paywall) {\\n    let content = document.querySelector('script[data-fragment-type=\\\"ArticleContent\\\"]');\\n    if (content) {\\n      removeDOMElement(paywall);\\n      let flip_pay = 'div#flip-pay';\\n      hideDOMStyle(flip_pay, 5);\\n      let intro = document.querySelector('div > div[data-auth-intro=\\\"article\\\"]');\\n      if (intro) {\\n        let intro_par = intro.querySelector('p[class]');\\n        let intro_par_class;\\n        if (intro_par)\\n          intro_par_class = intro_par.getAttribute('class');\\n        let content_text = content.innerText;\\n        if (content_text.includes('__PRELOADED_STATE_GRAPH')) {\\n          content_text = content_text.replace(/window\\\\[\\\"__PRELOADED_STATE_GRAPH__.+\\\"\\\\]\\\\s=\\\\s/, '');\\n          try {\\n            let json = JSON.parse(content_text);\\n            if (Object.keys(json).length) {\\n              let key = Object.keys(json)[0];\\n              let pars = json[key].data.article.body;\\n              let parser = new DOMParser();\\n              for (let par of pars) {\\n                for (let type in par) {\\n                  let item = par[type];\\n                  let elem = document.createElement('p');\\n                  elem.setAttribute('style', \\\"margin: 10px;\\\");\\n                  if (type === 'bullet_list') {\\n                    let ul = document.createElement('ul');\\n                    for (let sub_item of item) {\\n                      li.innerText = parseHtmlEntities(sub_item.replace(/<[^<]*>/g, ''));\\n                      li.innerText = sub_item;\\n                      ul.appendChild(li);\\n                    }\\n                    elem.appendChild(ul);\\n                  } else if (type === 'image') {\\n                    let url = item.url;\\n                    if (item.cropped && item.cropped.url)\\n                      url = item.cropped.url;\\n                    let figure = makeFigure(url, item.caption);\\n                    elem.appendChild(figure);\\n                  } else if (type === 'related') {\\n                    if (item.articles) {\\n                      let articles = item.articles;\\n                      for (let article of articles) {\\n                        let elem_link = document.createElement('a');\\n                        elem_link.href = article.webcmsRelativeUrl;\\n                        elem_link.innerText = article.title;\\n                        elem_link.style = 'text-decoration: underline;';\\n                        elem.append(elem_link, document.createElement('br'));\\n                      }\\n                    }\\n                  } else if (!['ad', 'quote', 'streamone'].includes(type)) {\\n                    let html = parser.parseFromString('<p class=\\\"' + intro_par_class + '\\\">' + item + '</p>', 'text/html');\\n                    elem = html.querySelector('p');\\n                    elem.querySelectorAll('iframe[allow*=\\\"fullscreen\\\"][allowfullscreen]').forEach(e => e.removeAttribute('allowfullscreen'));\\n                    if (!['p', 'subhead', 'legacy-ml'].includes(type)) {\\n                      console.log(type);\\n                      console.log(item);\\n                    }\\n                  }\\n                  window.setTimeout(function () {\\n                    if (elem)\\n                      intro.parentNode.appendChild(elem);\\n                  }, 500);\\n                }\\n              }\\n            }\\n          } catch (err) {\\n            console.log(err);\\n          }\\n        }\\n      }\\n    }\\n  }\\n  let ads = 'div.ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('businesspost.ie')) {\\n  func_post = function () {\\n    if (mobile) {\\n      let lazy_images = document.querySelectorAll('div[style] > img[loading=\\\"lazy\\\"][style]');\\n      for (let elem of lazy_images) {\\n        elem.style = 'width: 95%;';\\n        elem.parentNode.removeAttribute('style');\\n      }\\n    }\\n  }\\n  let url = window.location.href;\\n  getArchive(url, 'div#bp_piano_article_subscription_offer', '', 'div[itemprop=\\\"articleBody\\\"]');\\n  let ads = 'div[id^=\\\"Inline-MPU-article-\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('decanter.com')) {\\n  let paywall = document.querySelector('div[id^=\\\"react_subscriber_content_\\\"]');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let data = document.querySelector('div[data-dom-id^=\\\"react_subscriber_content_\\\"][data-props]');\\n    if (data) {\\n      try {\\n        let json = JSON.parse(data.getAttribute('data-props'));\\n        if (json && json.content) {\\n          let content = decode_utf8(atob(json.content));\\n          let parser = new DOMParser();\\n          let doc = parser.parseFromString('<div>' + content + '</div>', 'text/html');\\n          let content_new = doc.querySelector('div');\\n          data.before(content_new);\\n          header_nofix('div.collection-wrapper', '', 'BPC > no fix for reviews');\\n          let fade = 'div.piano-container-fade';\\n          hideDOMStyle(fade);\\n        }\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('fnlondon.com')) {\\n  func_post = function () {\\n    if (mobile) {\\n      let lazy_images = document.querySelectorAll('picture > img[loading=\\\"lazy\\\"][style]');\\n      for (let elem of lazy_images) {\\n        elem.style = 'width: 95%;';\\n        elem.parentNode.removeAttribute('style');\\n      }\\n    }\\n  }\\n  let url = window.location.href;\\n  getArchive(url, 'div[data-testid=\\\"articleSignInSubscribeWrapper\\\"]', '', 'article');\\n  let fade = 'div#cx-snippet';\\n  hideDOMStyle(fade);\\n  function fnlondon_main(node) {\\n    window.setTimeout(function () {\\n      let signin_links = node.querySelectorAll('a[href^=\\\"https://www.fnlondon.com/client/login?target=\\\"]');\\n      for (let elem of signin_links) {\\n        elem.href = '#';//elem.href.split('target=')[1].split('&')[0];\\n        elem.innerText = 'Open';\\n        elem.addEventListener('click', function () { window.location.reload(); });\\n      }\\n    }, 500);\\n  }\\n  waitDOMElement('div[id^=\\\"continuous_article_\\\"]', 'DIV', fnlondon_main, true);\\n}\\n\\nelse if (matchDomain('ft.com')) {\\n  func_post = function () {\\n    let lazy_images = document.querySelectorAll('figure > picture > img[loading=\\\"lazy\\\"][src^=\\\"data:image/gif\\\"][new-cursrc]');\\n    for (let elem of lazy_images) {\\n      elem.removeAttribute('loading');\\n      elem.style = 'width: 100%;';\\n      let figure = elem.parentNode.parentNode;\\n      if (figure.parentNode && figure.parentNode.nodeName === 'DIV')\\n        figure.parentNode.removeAttribute('style');\\n      elem.src = elem.getAttribute('new-cursrc');\\n    }\\n    if (mobile) {\\n      let grids = document.querySelectorAll('div[style*=\\\"grid-template-areas\\\"], article#site-content');\\n      for (let elem of grids)\\n        elem.style = 'margin: 10px;';\\n    }\\n  }\\n  let url = window.location.href;\\n  getArchive(url, 'div#barrier-page', '', 'div.n-layout__row--content', '', 'div[style*=\\\"article-body\\\"]', 'body');\\n  let banners = '.js-article-ribbon, div.o-ads, pg-slot';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('gbnews.com')) {\\n  let ads = 'div.ad--billboard, div.ad--placeholder, div.video-inbody';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('granta.com')) {\\n  getJsonUrl('div.article-sign-up-container', '', 'div.article-excerpt');\\n}\\n\\nelse if (matchDomain('iai.tv')) {\\n  let paywall = document.querySelector('div.article-paywall-main');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article = document.querySelector('div > div.iai-article--content-inner');\\n    if (article) {\\n      let content_new = document.querySelector('head > meta[name=\\\"twitter:description\\\"][content]');\\n      if (content_new) {\\n        let parser = new DOMParser();\\n        let doc = parser.parseFromString('<div>' + content_new.content + '</div>', 'text/html');\\n        let article_new = doc.querySelector('div');\\n        article.parentNode.replaceChild(article_new, article);\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('irishexaminer.com')) {\\n  setCookie('blaize_session', '', 'irishexaminer.com', '/', 0);\\n  let premium = document.querySelector('head > meta[name=\\\"isPremium\\\"][content=\\\"true\\\"]');\\n  let article = document.querySelector('article');\\n  if (premium && article) {\\n    removeDOMElement(premium);\\n    function stripAppLinks(story) {\\n      story.querySelectorAll('a.readmore-event[href$=\\\"?type=app\\\"]').forEach(e => e.href = e.href.split('?')[0]);\\n    }\\n    let url = window.location.href;\\n    let app = window.location.search.startsWith('?type=app');\\n    if (!app) {\\n      let paywall = document.querySelector('div#paywall-premium');\\n      if (paywall) {\\n        let body_hide = article.querySelector('style:not(:empty)');\\n        removeDOMElement(paywall, body_hide);\\n        let url_src = url.split(/[#\\\\?]/)[0] + '?type=app';\\n        let story = article.querySelector('story');\\n        if (story) {\\n          let podcast = article.querySelector('.bbw-embed');\\n          if (!podcast) {\\n            fetch(url_src)\\n            .then(response => {\\n              if (response.ok) {\\n                response.text().then(html => {\\n                  if (html.includes('<story')) {\\n                    let parser = new DOMParser();\\n                    let doc = parser.parseFromString(html, 'text/html');\\n                    let story_new = doc.querySelector('story');\\n                    if (story_new) {\\n                      stripAppLinks(story_new);\\n                      story.parentNode.replaceChild(story_new, story);\\n                    }\\n                  }\\n                });\\n              }\\n            });\\n          } else\\n            window.location.href = url_src;\\n        } else\\n          window.location.href = url_src;\\n      }\\n    } else {\\n      let longread = document.querySelector('head > meta[name=\\\"isLongRead\\\"][content=\\\"true\\\"]');\\n      if (longread) {\\n        removeDOMElement(longread);\\n        let row = article.querySelector('div.row');\\n        if (row)\\n          row.append(googleSearchToolLink(url.split('?')[0]));\\n      } else {\\n        let div = document.createElement('div');\\n        div.style.margin = '20px';\\n        let home = document.createElement('a');\\n        home.innerText = window.location.hostname;\\n        home.href = 'https://' + window.location.hostname;\\n        div.append(home);\\n        article.before(div);\\n        let story = article.querySelector('story');\\n        if (story)\\n          stripAppLinks(story);\\n        hideDOMStyle('.bbw-embed');\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('literaryreview.co.uk')) {\\n  getJsonUrl('p.subscribe-for-more', '', 'div#_articlereview');\\n}\\n\\nelse if (matchDomain('motorsportmagazine.com')) {\\n  getJsonUrl('aside.paywall', '', 'div[data-behaviour=\\\"post-content\\\"]');\\n  let banner = document.querySelector('div[data-behaviour=\\\"react-paywall-threshold\\\"]');\\n  removeDOMElement(banner);\\n  let ads = 'aside.ad-space';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('newstatesman.com')) {\\n  let ads = 'div.ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('spectator.co.uk')) {\\n  setCookie(['blaize_session', 'userArticleViews'], '', 'spectator.co.uk', '/', 0);\\n  let paywall_sel = 'section.paywall, div.paywall-magazine';\\n  let entry_content = document.querySelector('div.entry-content');\\n  if (entry_content)\\n    getJsonUrl(paywall_sel, '', 'div.entry-content', {art_append: 1});\\n  else\\n    getJsonUrl(paywall_sel, '', 'div.entry-content__wrapper', {art_append:1, art_hold:1, art_class: 'entry-content'});\\n  let ads = '#subscribe-ribbon, div.ad-slot, div[style*=\\\"background-image: linear-gradient\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('stylist.co.uk')) {\\n  let paywall = document.querySelector('div[data-testid=\\\"paywall-component\\\"]');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let paywall_inline = document.querySelector('div.paywall--inline');\\n    if (paywall_inline)\\n      paywall_inline.removeAttribute('class');\\n    let json_script = document.querySelector('script#__NEXT_DATA__');\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse(json_script.text);\\n        if (json.props.pageProps.data.post.acf.widgets) {\\n          let url_next = json.props.pageProps.data.post.id;\\n          if (url_next && !window.location.pathname.endsWith(url_next))\\n            refreshCurrentTab();\\n          let pars = json.props.pageProps.data.post.acf.widgets;\\n          let first_par = document.querySelector('main div[data-column=\\\"true\\\"] > p');\\n          if (first_par) {\\n            let article = first_par.parentNode;\\n            let teaser = article.querySelectorAll('div > p:not([class])');\\n            removeDOMElement(...teaser);\\n            if (article) {\\n              let parser = new DOMParser();\\n              for (let par of pars) {\\n                let elem = document.createElement('p');\\n                if (par.paragraph) {\\n                  let content = par.paragraph;\\n                  let content_new = parser.parseFromString('<div>' + content + '</div>', 'text/html');\\n                  elem = content_new.querySelector('div');\\n                } else if (par.acf_fc_layout === 'heading') {\\n                  if (par.text)\\n                    elem.appendChild(document.createTextNode(par.text));\\n                } else if (['image', 'interactive_image'].includes(par.acf_fc_layout)) {\\n                  let image_array = [];\\n                  if (par.image)\\n                    image_array = [par.image];\\n                  else if (par.image_collection)\\n                    image_array = par.image_collection;\\n                  for (let img_elem of image_array) {\\n                    let figure = makeFigure(img_elem.url, img_elem.caption ? (img_elem.caption + ' ' + img_elem.description) : img_elem.alt, {alt: img_elem.alt, style: 'width: 95%;'});\\n                    elem.appendChild(figure);\\n                  }\\n                } else if (par.acf_fc_layout === 'listicle') {\\n                  let ul = document.createElement('ul');\\n                  for (let sub_item of par.item) {\\n                    let li = document.createElement('li');\\n                    if (sub_item.url) {\\n                      let par_link = document.createElement('a');\\n                      par_link.href = sub_item.url;\\n                      par_link.innerText = sub_item.title;\\n                      par_link.target = '_blank';\\n                      li.appendChild(par_link);\\n                    } else\\n                      li.innerText = sub_item.title;\\n                    if (sub_item.paragraph) {\\n                      let content = sub_item.paragraph;\\n                      let content_new = parser.parseFromString('<div>' + content + '</div>', 'text/html');\\n                      let par_elem = content_new.querySelector('div');\\n                      li.appendChild(par_elem);\\n                    }\\n                    if (sub_item.image) {\\n                      let img = document.createElement('img');\\n                      img.src = sub_item.image.url;\\n                      img.alt = sub_item.image.alt;\\n                      img.style = 'width: 95%;';\\n                      li.appendChild(img);\\n                      li.appendChild(document.createElement('br'));\\n                    }\\n                    li.style = 'font-size: 20px; margin: 20px 0px;';\\n                    ul.appendChild(li);\\n                  }\\n                  elem.appendChild(ul);\\n                } else if (par.embed_link) {\\n                  let par_link = document.createElement('a');\\n                  par_link.href = par.embed_link;\\n                  par_link.innerText = 'Embedded link: ' + par.embed_link;\\n                  par_link.target = '_blank';\\n                  elem.appendChild(par_link);\\n                } else if (par.acf_fc_layout === 'divider') {\\n                  elem.appendChild(document.createElement('hr'));\\n                } else if (par.acf_fc_layout === 'related_articles') {\\n                  if (par.posts) {\\n                    for (let post of par.posts) {\\n                      if (post.link && post.title.rendered) {\\n                        let par_link = document.createElement('a');\\n                        par_link.href = post.link;\\n                        par_link.innerText = 'You may also like: ' + post.title.rendered;\\n                        elem.appendChild(par_link);\\n                        elem.appendChild(document.createElement('br'));\\n                      }\\n                    }\\n                  }\\n                } else if (!['newsletter_signup', 'pull-quote'].includes(par.acf_fc_layout))\\n                  console.log(par);\\n                if (elem.hasChildNodes()) {\\n                  elem.style = 'font-family: \\\"Source Serif Pro\\\"; font-size: 20px; line-height: 34px;';\\n                  article.appendChild(elem);\\n                }\\n              }\\n            }\\n          }\\n        }\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('telegraph.co.uk')) {\\n  let subwall = '[class^=\\\"subwall\\\"]';\\n  let ads = '.advert, .commercial-unit';\\n  hideDOMStyle(subwall + ', ' + ads);\\n}\\n\\nelse if (matchDomain('tes.com')) {\\n  let paywall = document.querySelector('div.tg-paywall-message');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let overlay = document.querySelector('div.tg-paywall-body-overlay');\\n    if (overlay)\\n      overlay.removeAttribute('class');\\n  }\\n  let banner = document.querySelector('div.js-paywall-info');\\n  removeDOMElement(banner);\\n}\\n\\nelse if (matchDomain('the-tls.com')) {\\n  getJsonUrl('div.tls-single-article__closed-paywall', '', 'div.tls-article-body', {art_class: 'tls-article-body'});\\n  let fade = 'div.tls-single-article__closed-paywall-wrapper';\\n  let ads = 'div[class*=\\\"tls-single-article__ad-slot\\\"]';\\n  hideDOMStyle(fade + ', ' + ads);\\n}\\n\\nelse if (matchDomain('thelawyer.com')) {\\n  if (window.location.pathname.startsWith('/mda/')) {\\n    header_nofix('div.sf-content__post', 'div.sf-login-form');\\n  } else if (true) {\\n    let body = document.querySelector('body[class*=\\\"postid-\\\"]');\\n    if (body) {\\n      let article_id = body.className.split('postid-')[1].split(' ')[0];\\n      if (article_id) {\\n        func_post = function () {\\n          let lazy_images = document.querySelectorAll('img.lazy[data-src]:not([src])');\\n          for (let elem of lazy_images) {\\n            elem.src = elem.getAttribute('data-src');\\n            elem.removeAttribute('class');\\n          }\\n        }\\n        getJsonUrl('div.sf-login-form', '', 'div.sf-content-body__text', {art_append: 1}, article_id, '', false, true);\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('thenewworld.co.uk')) {\\n  let paywall = document.querySelector('div[data-show-fade-on-noaccess]');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let content = document.querySelector('div[data-show-has-access]');\\n    if (content)\\n      content.removeAttribute('data-show-has-access');\\n  }\\n  let banners = document.querySelectorAll('div[data-show-subs-blocked]');\\n  removeDOMElement(...banners);\\n}\\n\\nelse if (matchDomain('thenewslens.com')) {\\n  let paywall = document.querySelector('div.article-mask-box');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = json.articleBody;\\n        let article = document.querySelector('section.article-body');\\n        if (json_text && article) {\\n          let article_text = article.innerText.replace(/\\\\n/g, '');\\n          let split = json_text.split('\\u3002');\\n          for (let elem of split) {\\n            if (!elem.includes('(function(') && !article_text.includes(elem)) {\\n              let par_new = document.createElement('p');\\n              par_new.innerText = elem + '\\u3002';\\n              article.append(par_new);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('thestage.co.uk')) {\\n  func_post = function () {\\n    let paywall = document.querySelector(paywall_sel);\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      let article = document.querySelector(article_sel);\\n      if (article)\\n        article.before(googleSearchToolLink(url));\\n    }\\n  }\\n  let paywall_sel = 'div#ao-MeteringDNAllow';\\n  let article_sel = 'div[id^=\\\"aos-FeatureArticle2Col-\\\"], div[id^=\\\"aos-ReviewArticle-\\\"]';\\n  let url = window.location.href;\\n  getArchive(url, paywall_sel, '', article_sel);\\n}\\n\\nelse if (matchDomain(['thesun.co.uk', 'thescottishsun.co.uk'])) {\\n  let ads = 'div.billboard, div.advert-wrapper';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('thetimes.com')) {\\n  if (!matchDomain('epaper.thetimes.com')) {\\n    func_post = function () {\\n      let article = document.querySelector(article_sel);\\n      if (article) {\\n        if (mobile) {\\n          let inline_images = article.querySelectorAll('img[style]');\\n          for (let elem of inline_images) {\\n            elem.style = 'display: block; margin-left: auto; margin-right: auto; width: 90%;';\\n            let parent_node = elem.parentNode;\\n            if (parent_node.tagName === 'PICTURE')\\n              parent_node = parent_node.parentNode;\\n            parent_node.removeAttribute('style');\\n          }\\n          article.querySelectorAll('div[style*=\\\";width:\\\"]').forEach(e => e.style.width = '90%');\\n        }\\n        let embed_iframes = article.querySelectorAll('div > times-embed-iframe-max[src]');\\n        for (let elem of embed_iframes) {\\n          let iframe_link = document.createElement('a');\\n          iframe_link.href = iframe_link.innerText = elem.getAttribute('src');\\n          iframe_link.target = '_blank';\\n          let container = elem.parentNode;\\n          container.parentNode.replaceChild(iframe_link, container);\\n        }\\n      }\\n    }\\n    let article_sel = 'article:not([id]) > div';\\n    if (!window.location.search.startsWith('?shareToken=')) {\\n      let teaser = document.querySelector('body[data-view-name=\\\"teaser-article\\\"]');\\n      if (teaser) {\\n        teaser.classList.remove('TeaserPage');\\n        let url = window.location.href;\\n        getArchive(url, 'div#paywall-portal-article-footer', '', article_sel);\\n        let scroll_style = 'html, body {overflow: auto !important;}';\\n        addStyle(scroll_style);\\n      }\\n    }\\n    let banners = 'div#paywall-portal-page-footer, .subscription-block';\\n    let ads = 'div.channel-header-ad, div[id^=\\\"advert-\\\"], div[class*=\\\"InlineAdWrapper\\\"], div:has(> div > div#ad-header), div[style*=\\\"border-bottom-color:\\\"]:has(> div > div[id^=\\\"ad-article-inline\\\"])';\\n    hideDOMStyle(banners + ', ' + ads);\\n  }\\n}\\n\\nelse if (matchDomain('unherd.com')) {\\n  let preview = document.querySelector('div#premiumpreview');\\n  if (preview) {\\n    removeDOMElement(preview);\\n    let premium = document.querySelector('div#premiumcontent');\\n    if (premium)\\n      premium.removeAttribute('id');\\n  }\\n}\\n\\nelse if (matchDomain(uk_dmg_media_domains)) {\\n  let paywall = document.querySelector('body.is-paywalled-article');\\n  if (paywall)\\n    paywall.classList.remove('is-paywalled-article');\\n  let ads = 'ad-slot, div.billboard-container';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(uk_nat_world_domains) || document.querySelector('footer > div a[href^=\\\"https://corporate.nationalworld.com\\\"]')) {\\n  let premium = document.querySelector('div.premium.no-entitlement');\\n  if (premium)\\n    premium.classList.remove('premium', 'no-entitlement');\\n  let ads = 'div[class^=\\\"MarkupAds__Container-\\\"], div[class*=\\\"_AdContainer-\\\"], div[class^=\\\"Dailymotion__Wrapper-\\\"], div.banner, div#mantis-carousel-wrapper:has( > mantis-ui-widget:empty)';\\n  hideDOMStyle(ads);\\n}\\n\\n} else {\\n\\nif (matchDomain(usa_adv_local_domains)) {\\n  if (!window.location.search.startsWith('?outputType=amp')) {\\n   amp_redirect('div.paywall', '', window.location.pathname + '?outputType=amp');\\n  }\\n  let ads = 'div.ad, div.ad-inner, div.ad-unit, div#below-toprail, div[id^=\\\"taboola\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('adweek.com')) {\\n  setCookie('blaize_session', '', '.www.adweek.com', '/', 0);\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let fade = 'div.adw-article-body div[style*=\\\"linear-gradient\\\"]';\\n    hideDOMStyle(fade);\\n    let article = document.querySelector('div.non-paywall');\\n    if (article) {\\n      let json_script = getArticleJsonScript();\\n      if (json_script) {\\n        try {\\n          let json = JSON.parse(json_script.text);\\n          if (json && json.sharedContent) {\\n            let json_text = json.sharedContent.articleBody;\\n            if (json_text.match(/\\\\[[^\\\\[]+]/)) {\\n              let url = window.location.href;\\n              article.after(googleSearchToolLink(url));\\n              header_nofix('div#bpc_archive', '', 'BPC > no fix (missing (social) media)');\\n            }\\n            json_text = json_text.replace(/\\\\[[^\\\\[]+]/g, '').replace(/((\\\\r)?\\\\n)+/g, '\\\\r\\\\n\\\\r\\\\n');\\n            if (json_text)\\n              article.innerText = json_text;\\n          }\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('ajc.com')) {\\n  let paygate = document.querySelector('div.story-paygate_placeholder');\\n  if (paygate)\\n    paygate.removeAttribute('class');\\n  else {\\n    let article_paywall = document.querySelectorAll('article.is-paywalled');\\n    if (article_paywall.length) {\\n      let intro_len = document.querySelectorAll('article:not(.is-paywalled) > p').length;\\n      let art_pars = document.querySelectorAll('article.is-paywalled > p');\\n      article_paywall.forEach(e => e.classList.remove('is-paywalled'));\\n      let scripts = document.querySelectorAll('script:not([src], [type])');\\n      let json_script;\\n      let script_start = 'self.__next_f.push([1,\\\"';\\n      for (let script of scripts) {\\n        if (script.text.startsWith(script_start)) {\\n          if (script.text.includes('{\\\\\\\\\\\"contentData\\\\\\\\\\\":')) {\\n            json_script = script;\\n            break;\\n          }\\n        }\\n      }\\n      if (json_script) {\\n        let json_pars_text = json_script.text.split('{\\\\\\\\\\\"contentData\\\\\\\\\\\":')[1].split(',\\\\\\\\\\\"contentMeta\\\\\\\\\\\":{')[0].replace(/\\\\\\\\\\\"/g, '\\\"').replace(/\\\\\\\\\\\\\\\"/g, '\\\\\\\"');\\n        try {\\n          let json_pars = JSON.parse(json_pars_text).content_elements.filter(e => e.type === 'text' && e.content);\\n          let par_nr = intro_len;\\n          for (let par of art_pars) {\\n            par.innerHTML = json_pars[par_nr].content;\\n            par_nr++;\\n          }\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n    }\\n  }\\n  let video_blocker = document.querySelector('div.video-blocker');\\n  removeDOMElement(video_blocker);\\n  let ads = 'div.arc_ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('al-monitor.com')) {\\n  func_post = function () {\\n    if (mobile) {\\n      let article = document.querySelector(article_sel);\\n      if (article) {\\n        let lazy_images = article.querySelectorAll('picture > img[loading=\\\"lazy\\\"][style]');\\n        for (let elem of lazy_images) {\\n          elem.style = 'width: 95%;';\\n          elem.parentNode.removeAttribute('style');\\n        }\\n        let art_width = article.offsetWidth - 20 + 'px';\\n        let header = document.querySelector('header');\\n        if (header)\\n          header.style.width = art_width;\\n        let elems = article.querySelectorAll(':not(a, svg)[style*=\\\"width\\\"]');\\n        for (elem of elems) {\\n          elem.style.width = art_width;\\n          elem.style['grid-template-columns'] = '';\\n        }\\n        let lang = article.querySelector('div[style] > ul[style*=\\\"align-items\\\"]');\\n        if (lang)\\n          lang.parentNode.removeAttribute('style');\\n        let par = article.querySelector('div[style] > div[dir=\\\"ltr\\\"]');\\n        if (par)\\n          par.parentNode.style = 'width: ' + art_width;\\n      }\\n    }\\n  }\\n  let url = window.location.href;\\n  let article_sel = 'article';\\n  getArchive(url, 'div.node__paywall-cta', '', article_sel, '', article_sel, article_sel + ' > div');\\n}\\n\\nelse if (matchDomain('americanbanker.com') || matchDomain(usa_arizent_custom_domains)) {\\n  let inline_gate = document.querySelector('.inline-gate');\\n  if (inline_gate) {\\n    inline_gate.classList.remove('inline-gate');\\n    let inline_gated = document.querySelectorAll('.inline-gated');\\n    for (let elem of inline_gated)\\n      elem.classList.remove('inline-gated');\\n  }\\n  let ads = document.querySelectorAll('div.GoogleDfpAd');\\n  removeDOMElement(...ads);\\n}\\n\\nelse if (matchDomain('artnet.com')) {\\n  if (window.location.pathname.endsWith('/amp-page')) {\\n    amp_unhide_subscr_section();\\n  } else {\\n    let body_hidden = document.querySelector('.article-body');\\n    if (body_hidden)\\n      body_hidden.style = 'display:block;';\\n    let banner = document.querySelector('div[id^=\\\"issuem-leaky-paywall-\\\"]');\\n    removeDOMElement(banner);\\n  }\\n}\\n\\nelse if (matchDomain('asia.nikkei.com')) {\\n  let paywall = document.querySelector('div#paywall-offer');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article = document.querySelector('div#article-body-preview > div');\\n    if (article) {\\n      let json_script = document.querySelector('script#__NEXT_DATA__');\\n      if (json_script) {\\n        try {\\n          let json = JSON.parse(json_script.text);\\n          if (json && json.props.pageProps.data.body) {\\n            let json_text = json.props.pageProps.data.body;\\n            if (!json_text.includes('<div>'))\\n              json_text = '<div>' + json_text + '</div>';\\n            let parser = new DOMParser();\\n            let doc = parser.parseFromString(json_text, 'text/html');\\n            let article_new = doc.querySelector('div');\\n            article.parentNode.replaceChild(article_new, article);\\n          } else\\n            refreshCurrentTab();\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n    }\\n  }\\n  let banners = 'div#pianoj_ribbon, div#paywall-offer';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('axios.com')) {\\n  function axios_noscroll(node) {\\n    node.removeAttribute('style');\\n    let overlay = 'div[class^=\\\"Modal_paywall\\\"], div[class^=\\\"Modal_cta\\\"]';\\n    hideDOMStyle(overlay, 2);\\n  }\\n  let noscroll = document.querySelector('html[style]');\\n  if (noscroll)\\n    axios_noscroll(noscroll);\\n  waitDOMAttribute('html', 'HTML', 'style', axios_noscroll, true);\\n  let banners = 'div[data-cy=\\\"pro-paywall\\\"], div.apexAd, div[class*=\\\"NativeAd\\\"], span[data-ad-type]';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('balkaninsight.com')) {\\n  getJsonUrl('div.subscribeWrapper', '', 'div.post_teaser', {art_append: 1, art_hold: 1});\\n}\\n\\nelse if (matchDomain(['barandbench.com', 'theleaflet.in', 'thenewsminute.com'])) {\\n  let paywall = document.querySelector('div[id*=\\\"paywall-banner\\\"]');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article = document.querySelector('div.paywall');\\n    if (article) {\\n      let article_new = getArticleQuintype();\\n      if (article_new && article.parentNode)\\n        article.parentNode.replaceChild(article_new, article);\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('barrons.com')) {\\n  if (window.location.pathname.startsWith('/livecoverage/')) {\\n    window.setTimeout(function () {\\n      fix_dowjones_live();\\n    }, 1500);\\n  } else {\\n    let paywall = document.querySelector('div#cx-interstitial-snippet, div[data-id^=\\\"ArticleRoadblock_\\\"]');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      window.setTimeout(function () {\\n        let articles = document.querySelectorAll('article > div.crawler');\\n        let article;\\n        for (let elem of articles) {\\n          let paragraph = elem.querySelector('p[class*=\\\"Paragraph\\\"]');\\n          if (paragraph) {\\n            article = elem;\\n            break;\\n          }\\n        }\\n        if (article) {\\n          let article_id_dom = document.querySelector('head > meta[name=\\\"article.id\\\"][content]');\\n          if (article_id_dom) {\\n            let article_id = article_id_dom.content;\\n            let url_src = 'https://barrons.djmedia.djservices.io/apps/barrons/theaters/default-article?screen_ids=' + article_id;\\n            let x_access_token = \\\"eyJhbGciOiJSUzI1NiJ9.WFZsaHN3MXd3Smw0V3kwRXBzclQ.qwwBedAUNXHTQchowQZ5zMwmnXqDKeMhoRJlkB7drjWmb0ktZCScIhq5lpIiWaMyNJA_ODYgHAfIoi7DKWkS8g8GunFNAXpJDUOLdI2rtQkTEi_E3o90rdZHunPR7p0ULjRmHCnDofAdpTQdJtTXjQ9eEDZT2xoooVGdBpoVKhE\\\";\\n            getExtFetch(url_src, '', {\\\"app-identifier\\\": \\\"http://com.news.screens\\\", \\\"device-type\\\": \\\"phone\\\", \\\"x-access-token\\\": x_access_token}, fix_dowjones_fetch, [article]);\\n          }\\n        }\\n      }, 2000);\\n    }\\n  }\\n  let signin_links = document.querySelectorAll('p > a[href^=\\\"https://www.barrons.com/client/login\\\"][href*=\\\"target=\\\"]');\\n  for (let elem of signin_links) {\\n    elem.href = decodeURIComponent(elem.href.split('target=')[1].split('&')[0]);\\n    elem.innerText = 'Open';\\n    elem.target = '_top';\\n  }\\n  let ads = document.querySelectorAll('div[class] > div.uds-ad-container');\\n  for (let ad of ads)\\n    hideDOMElement(ad.parentNode);\\n}\\n\\nelse if (matchDomain('benzinga.com')) {\\n  function benz_main(node) {\\n    removeDOMElement(node);\\n    if (!window.location.pathname.startsWith('/report/')) {\\n      let blurred = document.querySelector('div.article-content-paywalled');\\n      if (blurred) {\\n        blurred.classList.remove('article-content-paywalled');\\n        let key_points = document.querySelectorAll('li.blur-sm');\\n        for (let elem of key_points)\\n          elem.classList.remove('blur-sm');\\n        let article = document.querySelector('div#article-body');\\n        if (article) {\\n          let json_script = document.querySelector('script#__NEXT_DATA__');\\n          if (json_script) {\\n            try {\\n              let json = JSON.parse(json_script.text);\\n              if (json && json.props.pageProps.article.primaryImage) {\\n                let img_data = json.props.pageProps.article.primaryImage;\\n                if (img_data.url) {\\n                  let img = document.createElement('img');\\n                  img.src = img_data.url;\\n                  img.alt = img_data.alt;\\n                  article.before(img);\\n                }\\n              }\\n            } catch (err) {\\n              console.log(err);\\n            }\\n          }\\n        }\\n      }\\n    } else {\\n      let blurred = document.querySelector('div.blur-lg');\\n      if (blurred)\\n        blurred.classList.remove('blur-lg');\\n    }\\n  }\\n  waitDOMElement('div.paywall-content', 'DIV', benz_main, false);\\n}\\n\\nelse if (matchDomain('bhaskar.com')) {\\n  if (!window.location.pathname.startsWith('/amp/')) {\\n    let paywall_sel = 'div.paywallBlockedContent';\\n    let paywall = document.querySelector(paywall_sel);\\n    if (paywall) {\\n      let banner = document.querySelector(paywall_sel + ' ~ div');\\n      if (banner)\\n        removeDOMElement(banner);\\n      paywall.removeAttribute('class');\\n    }\\n    let ads = document.querySelectorAll('div[style*=\\\"overflow:hidden\\\"][style*=\\\"max-height:\\\"], div[id^=\\\"Ad--\\\"], article  div:empty');\\n    if (ads)\\n      removeDOMElement(...ads);\\n  } else\\n    ampToHtml();\\n}\\n\\nelse if (matchDomain('bizjournals.com')) {\\n  if (window.location.pathname.includes('/subscriber-only/')) {\\n    header_nofix('div.primary');\\n  } else {\\n    let paywall = document.querySelector('div.paywall-content:empty');\\n    if (paywall) {\\n      paywall.classList.remove('paywall-content');\\n      let article = document.querySelector('div#ContentTease');\\n      if (article) {\\n        let json_script = document.querySelector('script#__NUXT_DATA__');\\n        if (json_script) {\\n          try {\\n            let json = JSON.parse(json_script.text);\\n            if (json) {\\n              let pars_index = json.indexOf('paragraph') + 1;\\n              if (pars_index) {\\n                let intro = article.querySelector('p[class]');\\n                let par_class = intro ? intro.className : 'content mb-4';\\n                article.innerHTML = '';\\n                let parser = new DOMParser();\\n                let hl_index = json.indexOf('highlights') + 1;\\n                if (hl_index) {\\n                  let container = document.createElement('div');\\n                  container.className = 'border border-gray-300 p-2 font-sans';\\n                  container.style = 'margin-bottom: 20px;';\\n                  let title = document.createElement('h3');\\n                  title.className = 'pb-4 font-bold';\\n                  title.innerText = 'Story Highlights';\\n                  let doc = parser.parseFromString('<div class=\\\"' + par_class + '\\\">' + json[hl_index] + '</div>', 'text/html');\\n                  let highlights = doc.querySelector('div');\\n                  container.append(title, highlights);\\n                  article.appendChild(container);\\n                }\\n                let json_images = json.filter(x => x && x.ord && x.url);\\n                for (let i = pars_index; i < json.length; i++) {\\n                  let par = json[i];\\n                  if (!par)\\n                    continue;\\n                  let style;\\n                  if (par === 'header') {\\n                    style = 'font-weight: bold;';\\n                    i++;\\n                    par = json[i];\\n                  } else if (par.type && json[par.type] === 'media') {\\n                    let json_img = json_images.find(x => x.ord === par.ord);\\n                    if (json_img) {\\n                      let figure = makeFigure(json[json_img.url], json[json_img.caption] + (json[json_img.byline] ? '\\\\r\\\\n' + json[json_img.byline].toUpperCase() : ''));\\n                      figure.className = par_class;\\n                      article.appendChild(figure);\\n                    }\\n                  }\\n                  if (typeof par === 'string' && !['default', 'embed', 'horizontal_line', 'image', 'list', 'media', 'top25list'].includes(par)) {\\n                    if (par.match(/^\\\\d{4}-\\\\d{2}-/))\\n                      break;\\n                    let doc = parser.parseFromString('<div class=\\\"' + par_class + '\\\">' + par + '</div>', 'text/html');\\n                    let par_new = doc.querySelector('div');\\n                    par_new.querySelectorAll('iframe[allow*=\\\"fullscreen\\\"][allowfullscreen]').forEach(e => e.removeAttribute('allowfullscreen'));\\n                    if (style)\\n                      par_new.style = style;\\n                    article.appendChild(par_new);\\n                  } else if (par.is_primary || par['primary-channel'])\\n                    break;\\n                }\\n              }\\n            }\\n          } catch (err) {\\n            console.log(err);\\n          }\\n        }\\n      }\\n    }\\n    window.setTimeout(function () {\\n      let dialog = document.querySelector('div[id^=\\\"headlessui-dialog-\\\"], div.sheet-overlay');\\n      if (dialog) {\\n        removeDOMElement(dialog);\\n        let html = document.querySelector('html[style]');\\n        if (html)\\n          html.removeAttribute('style');\\n        let overlays = document.querySelectorAll('html.is-overlaid, body.is-overlaid');\\n        for (let elem of overlays)\\n          elem.classList.remove('is-overlaid');\\n        let nuxt_inert = document.querySelector('div#__nuxt[inert]');\\n        if (nuxt_inert)\\n          nuxt_inert.removeAttribute('inert');\\n      }\\n    }, 1000);\\n  }\\n  let ads = 'div.adwrap, div[data-dev=\\\"MovableAd\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('bloomberg.com')) {\\n  let paywall_sel = 'div[id^=\\\"fortress-\\\"]';\\n  let leaderboard = 'div[id^=\\\"leaderboard\\\"], div[class^=\\\"leaderboard\\\"], div.canopy-container';\\n  let ads = 'div[data-ad-status], div[data-ad-type], div[class*=\\\"FullWidthAd_\\\"], div.adWrapper';\\n  hideDOMStyle(paywall_sel + ', ' + leaderboard + ', ' + ads);\\n  waitDOMElement(paywall_sel, 'DIV', removeDOMElement, true);\\n  waitDOMAttribute('body', 'BODY', 'data-paywall-overlay-status', node => node.removeAttribute('data-paywall-overlay-status'), true);\\n  if (window.location.pathname.startsWith('/live/')) {\\n    setInterval(function () {\\n      window.localStorage.clear();\\n    }, 15 * 60 * 1000);\\n  } else\\n    window.localStorage.clear();\\n  window.setTimeout(function () {\\n    let shimmering = document.querySelector('article.first-story div[class*=\\\"Placeholder_placeholderParagraphWrapper-\\\"]');\\n    if (shimmering) {\\n      header_nofix(shimmering.parentNode, '', 'BPC > enable JavaScript for site');\\n    }\\n  }, 5000);\\n}\\n\\nelse if (matchDomain('bloombergadria.com')) {\\n  let article_hidden = document.querySelector('article.single-news[style]');\\n  if (article_hidden)\\n    article_hidden.removeAttribute('style');\\n  let ads = '.banner';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('bostonglobe.com')) {\\n  if (window.location.search.startsWith('?outputType=amp'))\\n    amp_unhide_subscr_section();\\n}\\n\\nelse if (matchDomain('business-standard.com')) {\\n  function bs_main(node) {\\n    removeDOMElement(node);\\n    let json_script = document.querySelector('script#__NEXT_DATA__');\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse(json_script.text);\\n        if (json && json.props.pageProps.data.htmlContent) {\\n          let json_text = json.props.pageProps.data.htmlContent;\\n          let article = document.querySelector('div[class^=\\\"MainStory_storycontent__\\\"], div[class^=\\\"blueprint-story-detail_storbpcontent_\\\"]');\\n          if (json_text && article) {\\n            removeDOMElement(json_script);\\n            article.innerHTML = '';\\n            let parser = new DOMParser();\\n            let doc = parser.parseFromString('<div>' + json_text + '</div>', 'text/html');\\n            let article_new = doc.querySelector('div');\\n            if (article_new) {\\n              let zoom_images = article_new.querySelectorAll('div > img.zoomimg');\\n              for (let img of zoom_images) {\\n                let caption = img.parentNode.querySelector('div[style]');\\n                if (caption)\\n                  caption.removeAttribute('style');\\n              }\\n              window.setTimeout(function () {\\n                article.appendChild(article_new);\\n              }, 1000);\\n            }\\n          }\\n        } else\\n          refreshCurrentTab();\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n  if (!window.location.pathname.startsWith('/amp/')) {\\n    if (true) {\\n      let paywall_sel = 'div[class^=\\\"subscription_subscriptionPlan_\\\"], div[class^=\\\"BluePrintPaywall_BPstoryPaywall_\\\"]';\\n      let paywall = document.querySelector(paywall_sel);\\n      if (paywall) {\\n        bs_main(paywall)\\n      } else {\\n        csDoneOnce = true;\\n        waitDOMElement(paywall_sel, 'DIV', bs_main, false);\\n      }\\n    }\\n    let banner = 'section.sbcrbtmlfull, div.subscribfixed_artcalLeftBox__hmpMi';\\n    let ads = 'div.advertisement-bg, div[id^=\\\"between_article_content_\\\"]';\\n    hideDOMStyle(banner + ', ' + ads);\\n  } else\\n    ampToHtml();\\n}\\n\\nelse if (matchDomain('businessinsider.com')) {\\n  let ads = 'div.masthead-ad, div.l-ad, div.in-post-sticky, aside.has-video-ad, div.ad-callout-wrapper';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('businessinsider.jp')) {\\n  let paywall = document.querySelector('div.piano-paywall-container[hidden]');\\n  if (paywall)\\n    paywall.removeAttribute('hidden');\\n}\\n\\nelse if (matchDomain('businessoffashion.com')) {\\n  let ads = 'div[class^=\\\"default__AdsBlockWrapper\\\"], div[data-test=\\\"common-nbabanner\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('capital.bg')) {\\n  let paywall = document.querySelector('section > article > footer > a[data-referral=\\\"Paywall\\\"]');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = json.articleBody;\\n        let img_main = document.querySelector('div.story--header picture > img[src]');\\n        let article = document.querySelector('div.story-content');\\n        if (json_text && article) {\\n          article.innerHTML = '';\\n          let article_new = document.createElement('p');\\n          let json_pars = parseHtmlEntities(json_text).replace(/\\\\s{2,}/g, '\\\\r\\\\n\\\\r\\\\n').split(/[\\\\[\\\\]]{2}/);\\n          for (let elem of json_pars) {\\n            let par;\\n            if (!elem.match(/[\\\\[\\\\]]{2}/)) {\\n              if (elem.match(/img:\\\\d+/)) {\\n                if (img_main) {\\n                  let img_new_id = elem.split('img:')[1];\\n                  if (img_new_id) {\\n                    par = document.createElement('img');\\n                    par.src = img_main.src.replace(/_\\\\d+\\\\./, '_' + img_new_id + '.').split('?')[0];\\n                    par.style = 'margin: 20px; width: 90%;';\\n                  }\\n                }\\n              } else if (!elem.match(/(embed|quote):\\\\d+/)) {\\n                par = document.createElement('p');\\n                par.innerText = elem;\\n              }\\n            }\\n            if (par)\\n              article.appendChild(par);\\n          }\\n        }\\n      }\\n    }\\n  } else\\n    header_nofix('div.story-content > p', 'section > header > a[data-referral=\\\"Paywall\\\"]');\\n}\\n\\nelse if (matchDomain(['chronicle.com', 'philanthropy.com'])) {\\n  let preview = document.querySelector('div[data-content-summary]');\\n  removeDOMElement(preview);\\n  let article_hidden = document.querySelector('div[class~=\\\"contentBody\\\" i][hidden]');\\n  if (article_hidden) {\\n    let attributes = [...article_hidden.attributes].filter(x => x.name !== 'class');\\n    for (let elem of attributes)\\n      article_hidden.removeAttribute(elem.name);\\n  }\\n  let ads = 'div.GoogleDfpAd-container';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('cnbc.com')) {\\n  let paywall = document.querySelector('div.ArticleGate-proGate');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article = document.querySelector('div.ArticleBody-articleBody');\\n    if (article)\\n      article.style = \\\"margin: 20px; font-family: Lyon,Helvetica,Arial,sans-serif; font-size: 18px; line-height: 1.66\\\";\\n    let span_hidden = document.querySelectorAll('span[hidden]');\\n    for (let elem of span_hidden) {\\n      elem.removeAttribute('hidden');\\n      elem.removeAttribute('class');\\n      if (elem.innerText)\\n        elem.innerText = elem.innerText.split('DISCLOSURES: (None)')[0];\\n    }\\n    let inline_image = document.querySelector('div[data-test=\\\"InlineImage\\\"]');\\n    if (inline_image)\\n      article.firstChild.before(inline_image);\\n  }\\n}\\n\\nelse if (matchDomain('cnn.com')) {\\n  let subwall = document.querySelector('div[data-component-id=\\\"subwall\\\"]');\\n  if (subwall) {\\n    removeDOMElement(subwall);\\n    let noscroll = document.querySelectorAll('html[style], body[style]');\\n    for (let elem of noscroll)\\n      elem.removeAttribute('style');\\n    waitDOMAttribute('html', 'HTML', 'style', node => node.removeAttribute('style'), true);\\n    waitDOMAttribute('body', 'BODY', 'style', node => node.removeAttribute('style'), true);\\n  }\\n  let regwall_keys = Object.keys(window.localStorage).filter(x => x.match(/reg_?wall/i));\\n  for (let item of regwall_keys)\\n    window.localStorage.removeItem(item);\\n  let ads = 'div[class*=\\\"ad-slot-\\\"], div.container__ads';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('columbian.com')) {\\n  setCookie('blaize_session', '', 'columbian.com', '/', 0);\\n  header_nofix('story', 'div#inline-paywall');\\n  let ads = 'div.modal, div#sticky-footer-cta, div.article-inline, div[id^=\\\"ad-instory-\\\"], div#onesignal-slidedown-container';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('csmonitor.com')) {\\n  let paywall = document.querySelector('div.paywall');\\n  removeDOMElement(paywall);\\n  window.localStorage.clear();\\n}\\n\\nelse if (matchDomain('cyclingnews.com')) {\\n  let paywall = document.querySelector('div.paywall-locker');\\n  if (paywall) {\\n    paywall.classList.remove('paywall-locker');\\n    let banner = 'div.kiosq-main-layer';\\n    hideDOMStyle(banner);\\n  }\\n  let metered_keys = Object.keys(window.localStorage).filter(x => x.match(/^kiosq_article/));\\n  for (let item of metered_keys)\\n    window.localStorage.removeItem(item);\\n}\\n\\nelse if (matchDomain('dailyherald.com')) {\\n  let ads = 'div.dhTopAd, div[data-widget-host=\\\"revcontent\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('dailywire.com')) {\\n  let paywall = document.querySelector('div#payed-article-paywall');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let div_hidden = document.querySelector('#post-body-text > div > div[class]');\\n    if (div_hidden)\\n      div_hidden.removeAttribute('class');\\n  }\\n  let ads = 'div.ad-wrapper';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('dallasnews.com')) {\\n  if (window.location.search.startsWith('?outputType=amp')) {\\n    amp_unhide_subscr_section();\\n  }\\n}\\n\\nelse if (matchDomain('defector.com')) {\\n  let paywall = document.querySelector('div[class^=\\\"ContentGate_wrapper__\\\"]');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article_sel = 'div[class^=\\\"PostContent_wrapper__\\\"]';\\n    let article = document.querySelector(article_sel);\\n    if (article) {\\n      window.setTimeout(function () {\\n        let pars = article.querySelectorAll('p');\\n        if (pars.length < 3) {\\n          let url = window.location.href.split('?')[0];\\n          replaceDomElementExt(url, false, false, article_sel);\\n        }\\n      }, 1000);\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('denik.cz')) {\\n  let video_sources = document.querySelectorAll('video[id] > source[src]');\\n  for (let elem of video_sources) {\\n    let iframe = document.createElement('iframe');\\n    iframe.src = elem.src;\\n    iframe.style = 'width: 100%; height: 100%;';\\n    let video = elem.parentNode;\\n    video.parentNode.replaceChild(iframe, video);\\n  }\\n  let ads = 'div.ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(['digiday.com', 'glossy.co', 'modernretail.co'])) {\\n  let ads = 'div[class^=\\\"ad_\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('discovermagazine.com')) {\\n  window.setTimeout(function () {\\n    let body = document.querySelector('body');\\n    if (body)\\n      body.style = 'overflow: auto !important;';\\n    let banners = 'div.fIkXwQ, div[style*=\\\"fadeIn\\\"], div[role=\\\"button\\\"][aria-label=\\\"Dismiss Dialog\\\"]';\\n    hideDOMStyle(banners);\\n  }, 1000);\\n}\\n\\nelse if (matchDomain('dnevnik.bg')) {\\n  window.setTimeout(function () {\\n    let paywall = document.querySelector('div.paywall-container');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      function addGST() {\\n        let url = window.location.href;\\n        let article = document.querySelector('div.story-body');\\n        if (article)\\n          article.firstChild.before(googleSearchToolLink(url));\\n      }\\n      let article_lock = document.querySelector('div.article-lock');\\n      if (article_lock) {\\n        let intro = article_lock.querySelector('div[role=\\\"paragraph\\\"]');\\n        let intro_start;\\n        if (intro)\\n          intro_start = intro.innerText.substring(0, 25);\\n        let scripts = document.querySelectorAll('script:not([src], [type])');\\n        let json_script;\\n        let link_script;\\n        let script_start = 'self.__next_f.push([1,\\\"';\\n        for (let script of scripts) {\\n          if (script.text.startsWith(script_start)) {\\n            if (!link_script && script.text.includes('significantLink\\\\\\\\\\\":'))\\n              link_script = script;\\n            else if (!json_script && (script.text.includes('[storyid:') || (intro_start && script.text.replace(/\\\\\\\\u003c/g, '<').replace(/\\\\\\\\u003e/g, '>').replace(/<[^<]*>\\\\s?/g, '').replace(/\\\\\\\\\\\"/g, '\\\"').startsWith(script_start + intro_start))))\\n              json_script = script;\\n            if (json_script && link_script)\\n              break;\\n          }\\n        }\\n        if (json_script) {\\n          article_lock.classList.remove('article-lock');\\n          let banner = 'div.paywall-content';\\n          hideDOMStyle(banner);\\n          let img_main = document.querySelector('div.story-gallery-main figure > img[src]');\\n          let links;\\n          if (link_script)\\n            links = link_script.text.split('significantLink\\\\\\\\\\\":[')[1].split('\\\\\\\\\\\"],')[0].replace(/\\\\\\\\\\\"/g, '').split(',');\\n          let json_pars = json_script.text.split('self.__next_f.push([1,\\\"')[1].split('\\\"])')[0].replace(/\\\\\\\\u003c/g, '<').replace(/\\\\\\\\u003e/g, '>').replace(/\\\\\\\\\\\"/g, '\\\"').replace(/<br \\\\/>/g, '').split(/[\\\\[\\\\]]{2}/);\\n          if (json_pars.length) {\\n            article_lock.innerHTML = '';\\n            if (json_pars.find(x => x.includes('embed:') || x === 'gallery'))\\n              addGST();\\n          }\\n          let parser = new DOMParser();\\n          for (let elem of json_pars) {\\n            let par;\\n            if (!elem.match(/[\\\\[\\\\]]{2}/)) {\\n              if (elem.match(/img:\\\\d+/)) {\\n                if (img_main) {\\n                  let img_new_id = elem.split('img:')[1];\\n                  if (img_new_id) {\\n                    par = document.createElement('img');\\n                    par.src = img_main.src.replace(/_\\\\d+\\\\./, '_' + img_new_id + '.').split('?')[0];\\n                    par.style = 'margin: 20px; width: 90%;';\\n                  }\\n                }\\n              } else if (elem.match(/storyid:\\\\d+/)) {\\n                if (links) {\\n                  let story_id = elem.split('storyid:')[1];\\n                  if (story_id) {\\n                    let story = links.find(x => x.includes(story_id + '_'));\\n                    if (story) {\\n                      par = document.createElement('a');\\n                      par.href = story;\\n                      par.innerText = story.split(story_id + '_')[1].replace(/_/g, ' ').replace('/', '');\\n                      par.className = 'story-related';\\n                      if (!matchUrlDomain(window.location.hostname, story))\\n                        par.target = '_blank';\\n                    }\\n                  }\\n                }\\n              } else if (!elem.match(/quote:\\\\d+/)) {\\n                let doc = parser.parseFromString('<div role=\\\"paragraph\\\">' + elem + '</div>', 'text/html');\\n                par = doc.querySelector('div');\\n              }\\n              if (par)\\n                article_lock.appendChild(par);\\n            }\\n          }\\n        }\\n      } else\\n        addGST();\\n    }\\n  }, 1000);\\n}\\n\\nelse if (matchDomain('dwell.com')) {\\n  if (window.location.pathname.match(/^(\\\\/amp)?\\\\/article\\\\//)) {\\n    if (!window.location.search.startsWith('?rel=plus')) {\\n      let paywall = pageContains('div > a', /Try Dwell\\\\+ for FREE/);\\n      if (paywall.length) {\\n        removeDOMElement(paywall[0]);\\n        window.location.href = window.location.pathname.replace(/^\\\\/amp/, '') + '?rel=plus';\\n      }\\n    } else {\\n      let paywall = document.querySelector('div#mainPanel div[class^=\\\"FCR_\\\"]');\\n      let article = document.querySelector('div > section[class]');\\n      if (paywall && article) {\\n        removeDOMElement(paywall);\\n        article.classList.remove('_2S7l9_l2eDI5b8DSR29ijf');\\n        let filter = /^window\\\\.INITIAL_STATE\\\\s?=\\\\s?/;\\n        let json_script = getSourceJsonScript(filter);\\n        if (json_script) {\\n          let split1 = json_script.text.split(filter)[1];\\n          let state = (split1.split('};')[0] + '}');\\n          if (state) {\\n            try {\\n              let json = JSON.parse(state);\\n              if (json) {\\n                let items = json.articles.items;\\n                let id = Object.keys(items)[0];\\n                let photos = json.photos ? json.photos.items : '';\\n                let json_text = items[id].attributes.body.replace(/(<br>|<span style=\\\".+;\\\">|<\\\\/span>)/g, '');\\n                function find_img_url(match, p1, p2, offset, string) {\\n                  let contributorId;\\n                  let format;\\n                  if (photos && photos[p1]) {\\n                    contributorId = photos[p1].attributes.userId;\\n                    format = photos[p1].attributes.format;\\n                  }\\n                  let result = '<p>missing photo: ' + p1 + '</p>';\\n                  if (contributorId)\\n                    result = '<figure><img src=\\\"https://images2.dwell.com/photos/' + contributorId + '/' + p1 + '/original.' + format + '?auto=format&q=35&w=1280\\\"><figcaption>' + p2 + '</figcaption></figure>';\\n                  return result;\\n                }\\n                json_text = json_text.replace(/<dwell-photo photoId=\\\"(\\\\d+)\\\"\\\\scaption=\\\"([^\\\"]+)\\\"[^<]+photoUserId=\\\"\\\\d*\\\"\\\\/>/g, find_img_url);\\n                let parser = new DOMParser();\\n                let doc = parser.parseFromString('<section class=\\\"' + article.className + '\\\">' + json_text + '</section>', 'text/html');\\n                let article_new = doc.querySelector('section');\\n                article.parentNode.replaceChild(article_new, article);\\n              }\\n            } catch (err) {\\n              console.log(err);\\n            }\\n          }\\n        }\\n      }\\n      let photo_links = document.querySelectorAll('div > a[href^=\\\"' + window.location.pathname.replace(/\\\\/\\\\d{8,}/, '') + '\\\"]');\\n      for (let elem of photo_links)\\n        elem.href += '?rel=plus';\\n      let close_button = document.querySelector('header > div > span > svg');\\n      if (!document.querySelector('a#bpc_close') && close_button) {\\n        let elem = document.createElement('a');\\n        elem.href = window.location.pathname.split('?')[0].replace(/\\\\/\\\\d{8,}/, '');\\n        elem.id = 'bpc_close';\\n        elem.innerText = 'close';\\n        elem.style.color = 'white';\\n        close_button.parentNode.parentNode.appendChild(elem);\\n      }\\n    }\\n  }\\n  let ads = 'div.EYrS5iukqzJMkNAcFQ0ho';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('economictimes.com')) {\\n  if (window.location.pathname.includes('/amp_')) {\\n    let paywall = document.querySelector('.paywall_wrap');\\n    if (paywall) {\\n      let content = document.querySelector('.paywall[style=\\\"display:none;\\\"]');\\n      if (content) {\\n        let parser = new DOMParser();\\n        let doc = parser.parseFromString('<div style=\\\"margin: 20px 0px;\\\">' + content.innerText + '</div>', 'text/html');\\n        let content_new = doc.querySelector('div');\\n        let charts = content_new.querySelectorAll('iframe[id^=\\\"datawrapper-chart-\\\"]');\\n        for (let elem of charts) {\\n          elem.width = '100%';\\n          elem.style.margin = '20px 0px';\\n        }\\n        if (content_new && content.parentNode)\\n          content.parentNode.replaceChild(content_new, content);\\n      } else\\n        window.location.href = 'https://economictimes.indiatimes.com' + window.location.pathname.replace('amp_prime', 'prime');\\n      let intro = document.querySelector('.art_wrap');\\n      let article_blocker = document.querySelector('.articleBlocker');\\n      removeDOMElement(paywall, intro, article_blocker);\\n      let ads = 'amp-ad';\\n      hideDOMStyle(ads);\\n    }\\n  } else {\\n    window.setTimeout(function () {\\n      let paywall = document.querySelector('div#blocker_layer');\\n      let data_prime = document.querySelector('div[data-prime=\\\"1\\\"]');\\n      let amphtml = document.querySelector('head > link[rel=\\\"amphtml\\\"]');\\n      if (paywall || data_prime) {\\n        removeDOMElement(paywall);\\n        if (data_prime)\\n          data_prime.removeAttribute('data-prime');\\n        if (amphtml)\\n          amp_redirect_not_loop(amphtml);\\n        else if (window.location.pathname.startsWith('/epaper/'))\\n          window.location.href = 'https://economictimes.indiatimes.com' + window.location.pathname;\\n      } else {\\n        let ads = '.adContainer';\\n        hideDOMStyle(ads);\\n      }\\n    }, 500);\\n  }\\n}\\n\\nelse if (matchDomain('economictimes.indiatimes.com')) {\\n  let paywall = document.querySelector('section.prime_paywall');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let content = document.querySelector('div.content1, div.artText');\\n    let full_text = document.querySelector('div.paywall.p1');\\n    if (content && full_text) {\\n      if (!(full_text.innerText.includes('!function()') && full_text.innerText.includes('datawrapper-height')))\\n        content.innerText = full_text.innerText;\\n      else {\\n        let amphtml = document.querySelector('head > link[rel=\\\"amphtml\\\"]');\\n        if (amphtml)\\n          amp_redirect_not_loop(amphtml)\\n      }\\n    }\\n    addStyle('div.pageContent {height: auto !important;}');\\n    let article_wrap = document.querySelector('div.article_wrap[style]');\\n    if (article_wrap)\\n      article_wrap.removeAttribute('style');\\n  }\\n  if (mobile) {\\n    let pageholder = document.querySelector('main.pageHolder');\\n    if (pageholder) {\\n      pageholder.classList.remove('pageHolder');\\n      let header = document.querySelector('header');\\n      if (header)\\n        header.style = 'width: 100% !important;';\\n      let f_col = document.querySelector('div.f_col');\\n      removeDOMElement(f_col);\\n    }\\n  }\\n  let ads = 'div.topAdContainer, div.vdo_ai_can_ani, div[data-ad-slot]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('economist.com')) {\\n  if (window.location.pathname.includes('/podcasts/')) {\\n    header_nofix('section[data-body-id]', 'div[aria-labelledby=\\\"paywall-heading\\\"]');\\n  } else if (!window.location.pathname.startsWith('/interactive/')) {\\n    let paywall_sel = 'div#tp-regwall';\\n    let article_sel = 'main';\\n    let video = document.querySelector('iframe[src^=\\\"https://www.youtube.com/\\\"]');\\n    func_post = function () {\\n      if (video) {\\n        let video_new = document.querySelector('div[old-src^=\\\"https://www.youtube.com/\\\"]');\\n        if (video_new && video_new.parentNode)\\n          video_new.parentNode.replaceChild(video, video_new);\\n      }\\n      if (mobile) {\\n        let grids = document.querySelectorAll('div[style*=\\\"grid-template-columns\\\"]');\\n        for (let elem of grids)\\n          elem.removeAttribute('style');\\n        let lazy_images = document.querySelectorAll('figure img[loading=\\\"lazy\\\"][style]');\\n        for (let elem of lazy_images)\\n          elem.style = 'width: 95%;';\\n      }\\n    }\\n    let url = window.location.href;\\n    getArchive(url, paywall_sel, '', 'main');\\n  }\\n  let ads = 'div[class*=\\\"adComponent\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('enotes.com')) {\\n  let paywall = document.querySelector('section#enotes-paywall');\\n  if (paywall) {\\n    let section_words = pageContains('p', /\\\\(This entire section contains/);\\n    removeDOMElement(paywall, ...section_words);\\n    setCookie('ENOTESID', '', 'enotes.com', '/', 0);\\n    let blurred = document.querySelectorAll('div.u-paywall');\\n    for (let elem of blurred)\\n      elem.className = 'o-rte-text u-space--top';\\n    let ads = document.querySelectorAll('div:not([class]) > div[id^=\\\"div-gpt-ad-\\\"]');\\n    for (let ad of ads)\\n      hideDOMElement(ad.parentNode);\\n  }\\n}\\n\\nelse if (matchDomain('entrepreneur.com')) {\\n  let ads = 'div.ad__wrapper, div#piano-metered-container';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('epoch.org.il')) {\\n  getJsonUrl('div.register-login-box', '', 'div.paywall');\\n}\\n\\nelse if (matchDomain('espn.com')) {\\n  let url = window.location.href;\\n  getArchive(url, 'aside.espn-plus-container-wrapper', '', 'section#article-feed > article');\\n}\\n\\nelse if (matchDomain('euobserver.com')) {\\n  let paywall = pageContains('div > h4', 'To read this story, log in or subscribe');\\n  if (paywall.length) {\\n    removeDOMElement(paywall[0].parentNode);\\n    let article = document.querySelector('div:has(> p.rte-p)');\\n    if (article) {\\n      let filter = /^window\\\\.__basedcache__\\\\s?=\\\\s?/;\\n      let json_script = getSourceJsonScript(filter);\\n      if (json_script) {\\n        try {\\n          let json = JSON.parse(json_script.text.split(filter)[1]);\\n          if (json) {\\n            let body = findKeyJson(json, ['body']);\\n            if (body) {\\n              article.innerHTML = '';\\n              let parser = new DOMParser();\\n              let doc = parser.parseFromString('<div style=\\\"font-size: 18px; line-height: 30px; position: relative;\\\">' + body + '</div>', 'text/html');\\n              let article_new = doc.querySelector('div');\\n              article.appendChild(article_new);\\n            }\\n          }\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('fastcompany.com')) {\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let filter = /\\\\\\\\\\\"content\\\\\\\\\\\":\\\\[/;\\n    let json_script = getSourceJsonScript(filter, ':not([id], [src], [type])');\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse('[' + json_script.text.split(filter)[1].split(/\\\\],\\\\\\\\\\\"/)[0].replace(/\\\\\\\\\\\\\\\\\\\\\\\\\\\"/g, '\\\\\\\\\\\"').replace(/(\\\\[|,)\\\\\\\\\\\"/g, '$1\\\"').replace(/\\\\\\\\\\\"(\\\\]|,)/g, '\\\"$1').replace(/\\\\\\\\\\\\\\\\n/g, '') + ']');\\n        if (json) {\\n          let article = document.querySelector('article');\\n          if (article) {\\n            article.innerHTML = '';\\n            article.className = 'article-container';\\n            let parser = new DOMParser();\\n            for (let pars of json)\\n              for (let par of pars) {\\n                if (!par.match(/^\\\\$\\\\w{2}$/)) {\\n                  let content_new = parser.parseFromString('<div class=\\\"content-chunk\\\">' + par + '</div>', 'text/html');\\n                  let elem = content_new.querySelector('div');\\n                  let img_srcset_drop = elem.querySelectorAll('figure > img[srcset]');\\n                  for (let img of img_srcset_drop)\\n                    img.removeAttribute('srcset');\\n                  article.appendChild(elem);\\n                }\\n              }\\n          }\\n        }\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n  let ads = 'div[class*=\\\"ad-wrapper\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('fieldandstream.com')) {\\n  let overlay = document.querySelectorAll('div[class^=\\\"mailmunch-\\\"]');\\n  removeDOMElement(...overlay);\\n  let noscroll = document.querySelector('html.mailmunch-pop-open');\\n  if (noscroll)\\n    noscroll.removeAttribute('class');\\n}\\n\\nelse if (matchDomain('financialexpress.com')) {\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall)\\n    paywall.classList.remove('paywall');\\n  let register = 'div.pcl-wrap';\\n  let ads_selector = window.location.pathname.endsWith('/lite/') ? '.ad-bg-container' : 'div[class*=\\\"-ads-blocks-ad-unit\\\"]';\\n  hideDOMStyle(register + ', ' + ads_selector);\\n}\\n\\nelse if (matchDomain('fmrmagazine.com')) {\\n  let paywall = document.querySelector('div.fr-gate-overlay');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article = document.querySelector('div.issue-article-intro');\\n    if (article) {\\n      let url_src = window.location.href.split(/[#\\\\?]/)[0] + '.json';\\n      fetch(url_src)\\n      .then(response => {\\n        if (response.ok) {\\n          response.json().then(json => {\\n            try {\\n              let json_text = json.page.body_html;\\n              if (json_text) {\\n                let parser = new DOMParser();\\n                let doc = parser.parseFromString(json_text, 'text/html');\\n                let article_new = doc.querySelector('div.issue-article-content');\\n                if (article_new)\\n                  article.after(article_new);\\n                addStyle('body {overflow: auto !important;}');\\n              }\\n            } catch (err) {\\n              console.log(err);\\n            }\\n          });\\n        }\\n      })\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('forbes.com')) {\\n  waitDOMAttribute('html', 'HTML', 'class', node => node.removeAttribute('class'), true);\\n  waitDOMAttribute('body', 'BODY', 'class', node => node.removeAttribute('class'), true);\\n  if (window.location.pathname.startsWith('/newsletters/')) {\\n    let paywall = document.querySelector('div > div.newsletter-teaser');\\n    if (paywall) {\\n      paywall.classList.remove('newsletter-teaser');\\n      let header = paywall.parentNode;\\n      header_nofix(header);\\n    }\\n  }\\n  let ads = 'fbs-ad, div[class^=\\\"fbs-ad\\\"], div[data-testid^=\\\"fbs-ad\\\"], div.inlineAdContainer, div[data-testid=\\\"locked-top-ad-container\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('forbes.ua')) {\\n  let paywall = document.querySelector('div.js-closed-part');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = parseHtmlEntities(json.articleBody).replace(/\\\\n/g, \\\"$&\\\\r\\\\n\\\");\\n        let article = document.querySelector('div.c-post-text');\\n        if (json_text && article)\\n          article.innerText = json_text;\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('foreignaffairs.com')) {\\n  let paywall = document.querySelector('.paywall');\\n  let loading_indicator = document.querySelector('.loading-indicator');\\n  let msg_bottom = document.querySelector('.messages--container--bottom');\\n  removeDOMElement(paywall, loading_indicator, msg_bottom);\\n  let article_dropcap = document.querySelectorAll('.article-dropcap');\\n  for (let elem of article_dropcap)\\n    elem.classList.add('loaded');\\n}\\n\\nelse if (matchDomain('foreignpolicy.com')) {\\n  let content_ungated = document.querySelector('div.content-ungated');\\n  if (content_ungated) {\\n    removeDOMElement(content_ungated);\\n    let content_gated = document.querySelector('div.content-gated');\\n    if (content_gated) {\\n      let insider = document.querySelector('body.is-fp-insider');\\n      if (insider) {\\n        getJsonUrl('div.content-gated', {rm_class: 'content-gated'}, 'div.content-gated');\\n        window.setTimeout(function () {\\n          let lazy_images = document.querySelectorAll('img[loading=\\\"lazy\\\"]');\\n          for (let elem of lazy_images)\\n            elem.removeAttribute('loading');\\n        }, 1000);\\n      } else\\n        content_gated.classList.remove('content-gated');\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('fortune.com')) {\\n  setCookie(['xbc', 'pcid'], '', 'fortune.com', '/', 0);\\n  let paywall = document.querySelector('div.paywallActive');\\n  if (paywall)\\n    paywall.removeAttribute('class');\\n  let banners = 'div.tp-container-inner, div[class^=\\\"sc-\\\"]:has( > div[data-cy=\\\"leaderboard\\\"]), div[class^=\\\"sc-\\\"]:has( > div.nativo-tout)';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('foxnews.com')) {\\n  let paywall = document.querySelector('div.article-gating-wrapper');\\n  removeDOMElement(paywall);\\n  let overlay = document.querySelector('div[class*=\\\"gated-overlay\\\"]');\\n  if (overlay)\\n    overlay.removeAttribute('class');\\n}\\n\\nelse if (matchDomain('ftm.eu')) {\\n  let videos = document.querySelectorAll('div.body > div.video-pp');\\n  for (let video of videos) {\\n    let video_id_dom = video.querySelector('a.video[data-youtube-id]');\\n    if (video_id_dom) {\\n      video_new = document.createElement('iframe');\\n      video_new.src = 'https://www.youtube.com/embed/' + video_id_dom.getAttribute('data-youtube-id');\\n      video_new.style = 'width: 95%; height: 400px; margin: 0px 20px;';\\n      video.parentNode.replaceChild(video_new, video);\\n    }\\n  }\\n  let audio_controls = document.querySelectorAll('audio[controls][style]');\\n  for (let elem of audio_controls)\\n    elem.removeAttribute('style');\\n  document.querySelectorAll('div.foldable').forEach(e => e.classList.remove('foldable'));\\n  let banners = 'div.banner-pp';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain(['haaretz.co.il', 'haaretz.com', 'themarker.com'])) {\\n  if (window.location.pathname.match(/\\\\/ty-article/)) {\\n    let body_wrapper_sel = 'section[data-testid=\\\"article-body-wrapper\\\"]';\\n    let paywall_sel = 'div[data-test=\\\"paywallMidpage\\\"], ' + body_wrapper_sel + ' div[data-testid=\\\"logo-loading-indicator\\\"]';\\n    let article_sel = 'main';\\n    let article_link_sel = 'main header, main.article-page p:not([id]), h1#article-header, ' + body_wrapper_sel;\\n    let url = window.location.href;\\n    if (!mobile) {\\n      func_post = function () {\\n        let disabled_items = 'section[data-testid=\\\"zoidberg-list\\\"], section#comments-section, div[old-position=\\\"sticky\\\"]';\\n        hideDOMStyle(disabled_items);\\n      }\\n      getArchive(url, paywall_sel, '', article_sel, '', article_sel, article_link_sel);\\n    } else {\\n      let paywall = document.querySelector(paywall_sel);\\n      if (paywall) {\\n        removeDOMElement(paywall);\\n        let article_link = document.querySelector(article_link_sel);\\n        if (article_link)\\n          article_link.before(archiveLink(url));\\n      }\\n    }\\n  }\\n  let history_keys = Object.keys(window.localStorage).filter(x => x.match(/^(reading(Count)?History|raData)/i));\\n  for (let item of history_keys)\\n    window.localStorage.removeItem(item);\\n}\\n\\nelse if (matchDomain('harpers.org')) {\\n  setCookie('hr_session', '', 'harpers.org', '/', 0);\\n  let paywall = document.querySelector('div#full-paywall');\\n  if (paywall) {\\n    paywall.removeAttribute('id');\\n    header_nofix(paywall, '', 'BPC > no fix (for older articles archive may work)');\\n    let url = window.location.href;\\n    paywall.before(archiveLink(url));\\n  }\\n  let ads = 'div#ctas';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('hbr.org')) {\\n  if (window.location.pathname.startsWith('/data-visuals')) {\\n    let feed_entries = document.querySelectorAll('li.feed-entry');\\n    for (let feed_entry of feed_entries) {\\n      let download = feed_entry.querySelector('span.entry-download > a[href*=\\\"/undefined/\\\"]');\\n      if (download) {\\n        let figure = feed_entry.querySelector('figure.entry-image > img[src]');\\n        if (figure) {\\n          download.href = figure.src;\\n          download.setAttribute('download', '');\\n        }\\n      }\\n    }\\n  } else {\\n    function hbr_main() {\\n      window.top.postMessage({type: 'article-paywall:full-content'}, '*');\\n    }\\n    let popup = document.querySelector('.persistent-banner');\\n    removeDOMElement(popup);\\n    let paywall = document.querySelector('div[id^=\\\"paywall\\\"]');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      insert_script(hbr_main);\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('hilltimes.com')) {\\n  function hilltimes_main(node) {\\n    getJsonUrl('div.paywallcont', '', 'div#entry-content');\\n  }\\n  let paywall_sel = 'div.paywallcont';\\n  let paywall = document.querySelector(paywall_sel);\\n  if (true) {\\n    if (paywall)\\n      hilltimes_main(paywall);\\n    else\\n      waitDOMElement(paywall_sel, 'DIV', hilltimes_main, false);\\n  }\\n  let banner = 'section.hide_this_section';\\n  hideDOMStyle(banner);\\n}\\n\\nelse if (matchDomain('hindustantimes.com')) {\\n  document.querySelectorAll('.freemiumText').forEach(e => e.classList.remove('freemiumText'));\\n  let noscroll = document.querySelector('body.open-popup');\\n  if (noscroll)\\n    noscroll.classList.remove('open-popup');\\n  let banners = 'div[class^=\\\"sub-paywall-version\\\"], div[class^=\\\"adHeight\\\"], .closeStory';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('historyextra.com')) {\\n  let article_masked = document.querySelector('.template-article__masked');\\n  if (article_masked) {\\n    let extra_pars = document.querySelectorAll('div.template-article__masked > p');\\n    removeDOMElement(...extra_pars);\\n    article_masked.classList.remove('template-article__masked');\\n  }\\n  let ads = 'div.ad-slot, div.ad-banner, div.stitcher-ad--dai-placeholder';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('historytoday.com')) {\\n  if (window.location.hostname.startsWith('app.')) {\\n    restorePugpigPage();\\n  } else {\\n    let paywall = document.querySelector('div.nopremium-message');\\n    if (paywall) {\\n      let app_link = document.createElement('a');\\n      let app_url = 'app.historytoday.com';\\n      app_link.href = 'https://' + app_url;\\n      app_link.innerText = 'BPC > no fix, search article on: ' + app_url;\\n      app_link.style = 'color: red; font-weight: bold;';\\n      let app_div = document.createElement('div');\\n      app_div.style = 'margin: 20px;';\\n      app_div.appendChild(app_link);\\n      paywall.before(app_div);\\n      removeDOMElement(paywall);\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('inc.com')) {\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let locked = document.querySelector('div.article-container--locked');\\n    if (locked)\\n      locked.className = 'article-container';\\n  }\\n  let ads = 'div.second-scroll-border';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('inc42.com')) {\\n  if (window.location.pathname.endsWith('/amp/')) {\\n    amp_unhide_access_hide('=\\\"status\\\"', '=\\\"NOT status\\\"', 'div.wru-widget');\\n  } else {\\n    let banner = document.querySelector('div[id*=\\\"_leaderboard_\\\"]');\\n    removeDOMElement(banner);\\n  }\\n}\\n\\nelse if (matchDomain('indianexpress.com')) {\\n  if (window.location.pathname.endsWith('/lite/'))\\n    amp_unhide_access_hide('=\\\"metering.result=\\\\'ALLOW_ACCESS\\\\'\\\"');\\n  else {\\n    let ads = 'div[class^=\\\"adsbox\\\"], div.adboxtop, div.add-first, div.osv-ad-class, div.ie-int-campign-ad';\\n    hideDOMStyle(ads);\\n  }\\n}\\n\\nelse if (matchDomain('indiatoday.in')) {\\n  if (window.location.pathname.match(/(\\\\/amp)?\\\\/magazine\\\\//)) {\\n    let url = window.location.href;\\n    if (!url.includes('/amp/')) {\\n      amp_redirect('div#csc-paywall');\\n    } else {\\n      amp_unhide_access_hide('=\\\"granted\\\"', '=\\\"NOT NOT granted\\\"');\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('infzm.com')) {\\n  let url = window.location.href;\\n  if (url.includes('.com/wap/#/content/')) {\\n    let container = document.querySelector('section.container');\\n    if (container)\\n      container.classList.remove('container');\\n    let overlay = document.querySelector('div.article-content[style]');\\n    if (overlay)\\n      overlay.removeAttribute('style');\\n  } else if (url.includes('.com/contents/')) {\\n    let paywall = document.querySelector('div.nfzm-article-jumbotron--unauth');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      window.location.href = url.replace('.com/contents/', '.com/wap/#/content/').split('?')[0];\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('inkl.com')) {\\n  let url = window.location.href;\\n  if (url.includes('/signin?') && url.includes('redirect_to=')) {\\n    window.setTimeout(function () {\\n      window.location.href = 'https://www.inkl.com' + decodeURIComponent(url.split('redirect_to=')[1]);\\n    }, 500);\\n  } else {\\n    let paywall = document.querySelector('div.paywall');\\n    if (paywall) {\\n      paywall.removeAttribute('class');\\n      let gradient_container = document.querySelector('div.gradient-container');\\n      removeDOMElement(gradient_container);\\n    }\\n    let what_is_inkl = document.querySelector('.what-is-inkl-container, .features-panel');\\n    let signup = document.querySelectorAll('.article-signup-container, .locked-sign-up-container, div[class*=\\\"/inkl-watermark.svg\\\"]');\\n    let shared_banner = document.querySelector('div.shared-article-inline-banner');\\n    removeDOMElement(what_is_inkl, ...signup, shared_banner);\\n    let dismiss_button = document.querySelector('div.dismiss-button-container button.btn');\\n    if (dismiss_button)\\n      dismiss_button.click();\\n    let dive_deeper_summary_bodies = document.querySelectorAll('div.dive-deeper-container div.summary-body');\\n    if (dive_deeper_summary_bodies) {\\n      for (let summary_body of dive_deeper_summary_bodies) {\\n        if (!summary_body.querySelector('a')) {\\n          let ng_click = summary_body.getAttribute('ng-click').replace(\\\"showArticle('\\\", '').replace(\\\"')\\\", '');\\n          let weblink = document.createElement('a');\\n          weblink.text = 'open';\\n          weblink.href = 'https://www.inkl.com/news/' + ng_click;\\n          summary_body.appendChild(weblink);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('insidehighered.com')) {\\n  let ads = 'div[id^=\\\"block-dfptag\\\"], div.wp-block-ihe-ad, section.section-ad_slot, div#roadblock';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('interestingengineering.com')) {\\n  addStyle('body {overflow: auto !important; position: relative !important; top: unset !important;}');\\n  let banners = 'main > div[class*=\\\"t-hidden\\\"], div.t-bg-black';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('ipolitics.ca')) {\\n  let login = document.querySelector('div.login');\\n  if (login) {\\n    removeDOMElement(login);\\n    let json_script = document.querySelector('script#__NEXT_DATA__');\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse(json_script.innerText);\\n        if (json && json.props.pageProps.post && json.props.pageProps.post.content) {\\n          let url_next = json.props.pageProps.post.slug;\\n          if (url_next && !window.location.pathname.includes(url_next))\\n            refreshCurrentTab();\\n          let article_new = json.props.pageProps.post.content;\\n          let article = document.querySelector('.post-body');\\n          if (article) {\\n            article.innerHTML = '';\\n            article.classList.remove('locked');\\n            let parser = new DOMParser();\\n            let doc = parser.parseFromString('<div>' + article_new + '</div>', 'text/html');\\n            let content_new = doc.querySelector('div');\\n            article.appendChild(content_new);\\n          }\\n        } else {\\n          refreshCurrentTab();\\n        }\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('japantimes.co.jp')) {\\n  setCookie('xbc', '', 'japantimes.co.jp', '/', 0);\\n  let url = window.location.href;\\n  getArchive(url, 'div.blocker', '', 'div#jtarticle');\\n  let banner = document.querySelector('div.subscribe');\\n  removeDOMElement(banner);\\n  let ads = 'div.DisplayAd';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('jpost.com')) {\\n  let premium_banners = document.querySelectorAll('.hide-for-premium, #hiddenPremiumForm, #hiddenLink');\\n  removeDOMElement(...premium_banners);\\n}\\n\\nelse if (matchDomain('kathimerini.gr')) {\\n  let ads = 'div.nx-billboard-ad-row';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('kompas.id')) {\\n  let url_artikel = window.location.pathname.startsWith('/artikel/');\\n  let delay = url_artikel ? 2500 : 0;\\n  window.setTimeout(function () {\\n    let paywall = document.querySelector('kompasid-paywall');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      if (url_artikel) {\\n        let intro = document.querySelector('div.paywall');\\n        removeDOMElement(intro);\\n        let art_hidden = document.querySelector('div.non-paywall[style]');\\n        if (art_hidden)\\n          art_hidden.removeAttribute('style');\\n      } else {\\n        let art_hidden = document.querySelector('section.paywall.hidden');\\n        if (art_hidden)\\n          art_hidden.classList.remove('hidden');\\n      }\\n    }\\n  }, delay);\\n}\\n\\nelse if (matchDomain('latimes.com')) {\\n  let subscribers = pageContains('div.infobox > p.infobox-title', /subscribers/i);\\n  if (subscribers.length)\\n    removeDOMElement(subscribers[0].parentNode);\\n  let ads = 'div.google-dfp-ad-wrapper, div.revcontent';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('livelaw.in')) {\\n  let amp = window.location.pathname.startsWith('/amp/');\\n  let paywall = document.querySelector(amp ? 'div.subscribeNow' : 'div#subscription_paid_message');\\n  if (paywall) {\\n    let intro = document.querySelector(amp ? 'div.story' : 'div.details-story-wrapper');\\n    removeDOMElement(paywall, intro);\\n    let paywall_content = document.querySelector('div.paywall-content.hide');\\n    if (paywall_content)\\n      paywall_content.className = amp ? '' : 'news_details_page_row2 details-story-wrapper';\\n  }\\n  let ads = 'inside-post-ad, amp-ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('livemint.com')) {\\n  if (window.location.pathname.includes('/amp-')) {\\n    let paywall = document.querySelectorAll('[amp-access=\\\"NOT subscribed\\\"]');\\n    removeDOMElement(...paywall);\\n  } else {\\n    let paywall = document.querySelector('div.paywall');\\n    if (paywall)\\n      paywall.classList.remove('paywall');\\n    let banners = document.querySelectorAll('div[class^=\\\"storyPaywall_paywallStory_\\\"]');\\n    removeDOMElement(...banners);\\n    let ads = '[class^=\\\"ad\\\"], [id^=\\\"ad\\\"], #subscribeAd, .taboolaHeight';\\n    hideDOMStyle(ads);\\n  }\\n}\\n\\nelse if (matchDomain('magazine.atavist.com')) {\\n  let bottom_notification = document.querySelector('div.bottom-notification');\\n  let overlay = document.querySelector('div.notification-overlay');\\n  removeDOMElement(bottom_notification, overlay);\\n  let paywall = document.querySelector('body.paywall-notification-visible');\\n  if (paywall)\\n    paywall.classList.remove('paywall-notification-visible');\\n  window.localStorage.clear();\\n}\\n\\nelse if (matchDomain('manoramaonline.com')) {\\n  if (!window.location.pathname.endsWith('.amp.html')) {\\n    amp_redirect('ev-engagement');\\n  } else {\\n    amp_unhide_access_hide(\\\"=\\\\\\\"result='ALLOW_ACCESS'\\\\\\\"\\\");\\n  }\\n}\\n\\nelse if (matchDomain('marketwatch.com')) {\\n  if (window.location.pathname.startsWith('/livecoverage/')) {\\n    window.setTimeout(function () {\\n      fix_dowjones_live();\\n    }, 1500);\\n  } else {\\n    let paywall = document.querySelector('div#cx-snippet-container');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      window.setTimeout(function () {\\n        let article_sel = 'section[class*=\\\"-Container\\\"]';\\n        let article = document.querySelector(article_sel);\\n        if (article) {\\n          addStyle(article_sel + '::after {background: none !important;}');\\n          let article_id_dom = document.querySelector('head > meta[name=\\\"article.id\\\"][content]');\\n          if (article_id_dom) {\\n            let article_id = article_id_dom.content;\\n            let url_src = 'https://mwatch.djmedia.djservices.io/apps/marketwatch/theaters/article?screen_ids=' + article_id;\\n            let x_access_token = \\\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJBVVRIX1BIUkFTRV9QUk9EX0FORFJPSUQiOiJjWXhLbURPOENOcm9wOEZINmtkTyJ9.xozUBM2fH4fY5JvdSrpvesZHeNFqS9aIFSZdXsvty5tgE1qb5w26I5Fe-FGQTYQdfPCQmJ60dh-QsxPKmsm3J0l50zF5CiiTAzmvD5D_XWkV_sa_L5eMqLvLyV2Wcrld9-LhKfmyqQlqDSU79276_sgo6yxDA2xqKDzFzwoOj3OILFKdkXvZNbN9NGapoTEV6z8CWt2nOxnBsN-_cXjpeDE_Al2EgWtSLA32nlRcbJ9Nm4ZRpZzCr5AKaUtysnjiAFpWyp1MSnYMJEZImYbt7nm9k2qd3ResXx0vZu-PZkr9bi4zprCUmvbLzopRbVbDwcDJowWpwyo3DnrjOhBKgw\\\";\\n            getExtFetch(url_src, '', {\\\"app-identifier\\\": \\\"com.news.screens\\\", \\\"device-type\\\": \\\"phone\\\", \\\"x-access-token\\\": x_access_token}, fix_dowjones_fetch, [article]);\\n          }\\n        }\\n      }, 2000);\\n    }\\n  }\\n  let ads = 'div.element--ad, div.j-ad, div.adWrapper, div#cx-articlecover';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('medscape.com')) {\\n  let ads = '.AdUnit, [id^=\\\"ads-\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('mexiconewsdaily.com')) {\\n  let div_hidden = document.querySelector('body.single div.td-post-content > div.tdb-block-inner');\\n  if (div_hidden)\\n    div_hidden.classList.remove('tdb-block-inner');\\n}\\n\\nelse if (matchDomain('mid-day.com')) {\\n  if (window.location.pathname.startsWith('/amp/')) {\\n    amp_unhide_access_hide('=\\\"granted\\\"', '=\\\"NOT granted\\\"', '[class*=\\\"BannerAd\\\"], div.midday-wrapper');\\n  } else {\\n    amp_redirect('div#myModalFullscreen');\\n    let read_more = document.querySelector('#read-more-my');\\n    if (read_more)\\n      read_more.click();\\n  }\\n}\\n\\nelse if (matchDomain('mnimarkets.com')) {\\n  let paywall = document.querySelector('div.missing-out-overlay');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article = document.querySelector('div.body-html');\\n    if (article) {\\n      let twitter_description = document.querySelector('head > meta[name=\\\"twitter:description\\\"][content]');\\n      if (twitter_description && twitter_description.content.length > 200) {\\n        let par = article.querySelector('p');\\n        if (par)\\n          par.innerText = parseHtmlEntities(twitter_description.content);\\n      } else {\\n        let intro_start = article.innerText.substring(0, 25);\\n        let scripts = document.querySelectorAll('script:not([src], [type])');\\n        let json_script;\\n        let script_start = 'self.__next_f.push([1,\\\"';\\n        for (let script of scripts) {\\n          if (script.text.startsWith(script_start)) {\\n            if (intro_start && script.text.replace(/\\\\\\\\n/g, ' ').startsWith(script_start + intro_start)) {\\n              json_script = script;\\n              break;\\n            }\\n          }\\n        }\\n        if (json_script) {\\n          let json_text = json_script.text.split('self.__next_f.push([1,\\\"')[1].split('\\\"])')[0].replace(/\\\\\\\\n\\\\\\\\n/g, '\\\\r\\\\n\\\\r\\\\n').replace(/\\\\\\\\n/g, ' ').replace(/\\\\\\\\\\\"/g, '\\\"').replace(/\\\\\\\\u0026/g, '&');\\n          let article_new = document.createElement('p');\\n          article_new.innerText = parseHtmlEntities(json_text);\\n          article.innerHTML = '';\\n          article.appendChild(article_new);\\n        }\\n      }\\n    }\\n  }\\n  let body = document.querySelector('body');\\n  if (body)\\n    body.style = 'user-select: text !important';\\n}\\n\\nelse if (matchDomain('nationalgeographic.com')) {\\n  function natgeo_func(node) {\\n    removeDOMElement(node);\\n    let body = document.querySelector('body[class]');\\n    if (body) {\\n      body.removeAttribute('class');\\n      body.removeAttribute('style');\\n    }\\n  }\\n  let paywall = document.querySelector('div[id^=\\\"fittPortal\\\"]');\\n  if (paywall)\\n    natgeo_func(paywall);\\n  waitDOMElement('div[id^=\\\"fittPortal\\\"]', 'DIV', natgeo_func, false);\\n  window.setTimeout(function () {\\n    let url = window.location.href;\\n    let subscribed = document.querySelector('div.Article__Content--gated');\\n    let msg = document.querySelector('div#bpc_archive');\\n    if (subscribed && !msg) {\\n      subscribed.appendChild(archiveLink(url));\\n      subscribed.setAttribute('style', 'overflow: visible !important;');\\n    }\\n    let overlay = document.querySelector('div.Article__Content__Overlay--gated');\\n    if (overlay)\\n      overlay.classList.remove('Article__Content__Overlay--gated');\\n  }, 2000);\\n  let ads = 'div.ad-slot, div.InsertedAd, div.natgeo-ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('nationalreview.com')) {\\n  if (!window.location.pathname.endsWith('/amp/')) {\\n    let paywall_sel = 'div.continue-reading';\\n    let paywall = document.querySelector(paywall_sel);\\n    if (paywall) {\\n      let amphtml = document.querySelector('head > link[rel=\\\"amphtml\\\"][href]');\\n      if (amphtml && !amphtml.href.includes(window.location.pathname)) {\\n        removeDOMElement(paywall);\\n        refreshCurrentTab();\\n      } else\\n        getJsonUrl(paywall_sel, '', 'div.article-content', {art_class: 'article-content article-content--headless'});\\n    }\\n  }\\n  let banners = 'div.zephr-wrapper, div#bc-root, div.cookie-text';\\n  let ads = 'amp-ad, .ad-unit, .ad-skeleton, amp-connatix-player, div[class*=\\\"-connatix-\\\"]';\\n  hideDOMStyle(banners + ', ' + ads);\\n}\\n\\nelse if (matchDomain('nature.com')) {\\n  func_post = function () {\\n    header_nofix('article', 'h2#access-options', 'BPC > no archive-fix');\\n  }\\n  let url = window.location.href;\\n  getArchive(url, 'div.app-access-wall, h2#access-options', '', 'article');\\n}\\n\\nelse if (matchDomain('nautil.us')) {\\n  window.setTimeout(function () {\\n    let adm_button = document.querySelector('div[class^=\\\"a__sc-np\\\"] button');\\n    if (adm_button)\\n      adm_button.click();\\n  }, 500);\\n  let ads = 'div.article-ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('ndtvprofit.com')) {\\n  if (window.location.pathname.startsWith('/amp/')) {\\n    amp_unhide_subscr_section();\\n  } else {\\n    window.setTimeout(function () {\\n      amp_redirect('div[class^=\\\"hard-paywall\\\"], div[class*=\\\"geotag-container_\\\"]');\\n    }, 1000);\\n  }\\n  let ads = 'div.responsive-ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('newcriterion.com')) {\\n  getJsonUrl('div.paywall-overlay', '', 'div.entry-content');\\n}\\n\\nelse if (matchDomain('newrepublic.com')) {\\n  let modal = document.querySelector('div.article-scheduled-modal');\\n  let pw_popups = document.querySelector('div#pwPopups');\\n  removeDOMElement(modal, pw_popups);\\n  let ads = '.ad-unit';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('newscientist.com')) {\\n  if (!window.location.hostname.startsWith('appan.')) {\\n    let paywall = document.querySelector('section#subscription-barrier');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      let json_script = document.querySelector('script#ns-seo-schema');\\n      if (json_script) {\\n        try {\\n          let json = JSON.parse(json_script.text);\\n          if (json && json.datePublished) {\\n            let date = json.datePublished.split(/T\\\\d/)[0].replace(/-/g, '/');\\n            let path_new = window.location.pathname.split(/\\\\/article\\\\/(\\\\d+-|mg\\\\d+-\\\\d+-)/)[2];\\n            if (path_new) {\\n              let url = 'https://appan.newscientist.com/' + date + '/' + path_new + 'content.html';\\n              func_post = function () {\\n                let lazy_images = document.querySelectorAll('img[src^=\\\"../\\\"][data-src]');\\n                for (let elem of lazy_images) {\\n                  elem.src = elem.getAttribute('data-src');\\n                  elem.removeAttribute('height');\\n                  elem.removeAttribute('width');\\n                }\\n                let videos = document.querySelectorAll('figure > div.pugpig-video[data-video-url]');\\n                for (let elem of videos) {\\n                  let iframe = document.createElement('iframe');\\n                  iframe.src = elem.getAttribute('data-video-url');\\n                  iframe.style = 'width: 100%; height: 400px; margin: 20px 0px;';\\n                  elem.parentNode.replaceChild(iframe, elem);\\n                }\\n              }\\n              replaceDomElementExt(url, false, false, 'section.ArticleContent', 'BPC > no fix (source file)', 'section[class$=\\\"-article__body\\\"]');\\n            }\\n          }\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n    }\\n    let ads = 'div[class*=\\\"Advert\\\"]';\\n    hideDOMStyle(ads);\\n  } else {\\n    restorePugpigPage();\\n  }\\n}\\n\\nelse if (matchDomain('newsday.com')) {\\n  let listen_button = document.querySelector('div.listen-button > button[disabled]');\\n  if (listen_button) {\\n    let audio_src_dom = listen_button.parentNode.querySelector('audio > source[src]');\\n    if (audio_src_dom) {\\n      let audio = document.createElement('audio');\\n      audio.src = audio_src_dom.src;\\n      audio.setAttribute('controls', '');\\n      listen_button.parentNode.replaceChild(audio, listen_button);\\n    }\\n  }\\n  let nd_lock = document.querySelector('html[class]');\\n  if (nd_lock)\\n    nd_lock.removeAttribute('class');\\n  let ads = 'div.ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('newslaundry.com')) {\\n  let paywall = document.querySelector('div > div > img[alt^=\\\"paywall\\\"]');\\n  if (paywall) {\\n    let banner = document.querySelector('div.FrsvM');\\n    removeDOMElement(paywall.parentNode.parentNode, banner);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = parseHtmlEntities(json.articleBody).replace(/<\\\\/p>\\\\./g, '</p>');\\n        let article = document.querySelector('div.story-element-text');\\n        if (json_text && article) {\\n          let parser = new DOMParser();\\n          let doc = parser.parseFromString('<div>' + json_text + '</div>', 'text/html');\\n          let article_new = doc.querySelector('div');\\n          article.innerHTML = '';\\n          article.appendChild(article_new);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('newsweek.com')) {\\n  let ads = 'div#topad, div[id^=\\\"dfp-ad-\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(['nola.com', 'shreveportbossieradvocate.com', 'theadvocate.com'])) {\\n  if (window.location.pathname.endsWith('.amp.html')) {\\n    let body_hidden = document.querySelector('.site-container');\\n    if (body_hidden)\\n      body_hidden.setAttribute('style', 'display:block;');\\n  } else {\\n    let ads = 'div.tnt-ads-container, div.asset-breakout-ads';\\n    hideDOMStyle(ads);\\n  }\\n}\\n\\nelse if (matchDomain('nv.ua')) {\\n  if (!window.location.pathname.includes('/amp/')) {\\n    amp_redirect('div[id^=\\\"media_paywall\\\"]');\\n  } else {\\n    let paywall = document.querySelector('div.paywall-area');\\n    if (paywall) {\\n      paywall.removeAttribute('class');\\n      let subscr = paywall.querySelector('div.make-subscription');\\n      removeDOMElement(subscr);\\n    }\\n    let article = document.querySelector('div.article__content');\\n    if (article)\\n      article.removeAttribute('class');\\n  }\\n}\\n\\nelse if (matchDomain('nybooks.com')) {\\n  let paywall_article = document.querySelector('.paywall-article');\\n  if (paywall_article)\\n    paywall_article.classList.remove('paywall-article');\\n  let banners = 'div.toast-cta, div.inline-ad';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('nypost.com')) {\\n  if (window.location.pathname.includes('/sports/')) {\\n    let paywall = document.querySelectorAll('head > meta[content*=\\\"Sports Plus\\\"]');\\n    if (paywall.length) {\\n      removeDOMElement(...paywall);\\n      let article_sel = 'div.single__content';\\n      let article = document.querySelector(article_sel);\\n      if (article) {\\n        article.classList.remove('entry-content-exclusive-covered');\\n        let json_url_dom = document.querySelector('head > link[rel=\\\"alternate\\\"][type=\\\"application/json\\\"][href]'); ;\\n        if (json_url_dom) {\\n          let match = json_url_dom.href.match(/\\\\d+$/);\\n          if (match) {\\n            let footer = article.querySelector('div.single__footer');\\n            let article_id = match[0];\\n            let url_src = 'https://nypost.nypost.djservices.io/apps/nypost-v3/theaters/sports?screen_ids=' + article_id;\\n            let x_access_token = \\\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJBVVRIX1BIUkFTRV9QUk9EX0FORFJPSUQiOiJGNGYzYnhzZGlIa1M1QzVIWUxUNSJ9.OGooBqisVQznx2FDxZpHAqWu-oG1wPJLUxYBMd3xOKiLakoR2XQC2hXnyS3zb1Dw6AkKcMhWyZfRerUckFjga8Ii59lZtP8Xt92iCUyJjs0yjmLJgkZWEGqZ8szM2UK7jZJ5SsHaYfe2V3c7KrtfbY74aWGwddvg-Ex4O5hwv3aiAJpI_aZMFqniClGM2pYbGNSPxH-I0PMuwTzt-oyofhQsRJWOQES8fmQz1H-opqQVr3B0-ev4MxYZjfk8kKnXxRbf7tDbQvastQh8kLe3KN90ptSp_LWbkPgo0G8Vw9Jzxy1TUd_VNgTE21uNdRAoZbxDly7aw-9CTDtb1OtXVg\\\";\\n            getExtFetch(url_src, '', {\\n              \\\"app-identifier\\\": \\\"com.news.screens\\\",\\n              \\\"device-type\\\": \\\"phone\\\",\\n              \\\"x-access-token\\\": x_access_token\\n            }, fix_dowjones_fetch, data_ext_fetch_id++, [article]);\\n            article.querySelectorAll('p[class]').forEach(e => e.removeAttribute('class'));\\n            if (footer) {\\n              window.setTimeout(function () {\\n                article.appendChild(footer);\\n              }, 1000);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n  let ads = 'div.ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('nytimes.com')) {\\n  if (!window.location.pathname.startsWith('/athletic/')) {\\n    waitDOMElement('div#dock-container', 'DIV', removeDOMElement, false);\\n    let ads = 'div[data-testid=\\\"inline-message\\\"], div[id^=\\\"ad-\\\"], div.pz-ad-box, div[class^=\\\"css-\\\"]:has( > div#top-wrapper)';\\n    hideDOMStyle(ads);\\n  }\\n}\\n\\nelse if (matchDomain('outlookbusiness.com')) {\\n  let paywall = document.querySelector('div#csc-paywall');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = document.querySelector('script#__NEXT_DATA__');\\n    if (json_script) {\\n      let json = JSON.parse(json_script.innerText);\\n      if (json && json.props.initialState.dashboard.ARTICLE_POST_DETAIL_API.data.article_data.description) {\\n        let article_new = json.props.initialState.dashboard.ARTICLE_POST_DETAIL_API.data.article_data.description;\\n        let article = document.querySelector('div.story-content');\\n        if (article) {\\n          article.innerHTML = '';\\n          let parser = new DOMParser();\\n          let doc = parser.parseFromString('<div>' + article_new + '</div>', 'text/html');\\n          let content_new = doc.querySelector('div');\\n          article.appendChild(content_new);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('outlookindia.com')) {\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = parseHtmlEntities(json.articleBody).replace(/\\\\n/g, \\\"$&\\\\r\\\\n\\\");\\n        let content = document.querySelector('div#articleBody');\\n        if (json_text && content) {\\n          content.innerHTML = '';\\n          let article_new = document.createElement('p');\\n          article_new.innerText = json_text;\\n          content.appendChild(article_new);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('philonomist.com')) {\\n  let paywall = document.querySelector('div.content-bandeau');\\n  if (paywall && window.location.pathname.startsWith('/en/')) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = parseHtmlEntities(findKeyJson(json, ['articleBody'])).replace(/\\\\s{2,}/g, '\\\\r\\\\n\\\\r\\\\n');\\n        let article = document.querySelector('div.main-body');\\n        if (json_text && article) {\\n          let par_last = article.querySelector('div > p:last-child');\\n          if (par_last) {\\n            let par_last_str = par_last.innerText.substring(0, 50);\\n            if (json_text.replace(/<[^<]*>/g, '').includes(par_last_str)) {\\n              par_last.innerText = json_text.substring(json_text.indexOf(par_last_str));\\n            } else {\\n              article.innerHTML = ' ';\\n              let article_new = document.createElement('p');\\n              article_new.innerText = json_text;\\n              article.appendChild(article_new);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('project-syndicate.org')) {\\n  func_post = function () {\\n    let hidden_images = document.querySelectorAll('img[src][new-cursrc]');\\n    for (let elem of hidden_images) {\\n      if (elem.src.startsWith('data:image/'))\\n        elem.src = elem.getAttribute('new-cursrc');\\n      elem.style = 'width: 95%;';\\n    }\\n  }\\n  let url = window.location.href;\\n  getArchive(url, 'div.paywall--base', '', 'main > article');\\n}\\n\\nelse if (matchDomain('puck.news')) {\\n  let url = window.location.href;\\n  getArchive(url, 'div[class*=\\\"paywall\\\"]', '', 'article');\\n  let modal = document.querySelector('div#paywall-modal');\\n  removeDOMElement(modal);\\n  let overlay = document.querySelector('body.paywall-active');\\n  if (overlay)\\n    overlay.classList.remove('paywall-active');\\n}\\n\\nelse if (matchDomain('reuters.com')) {\\n  let ads = 'div[data-testid=\\\"ResponsiveAdSlot\\\"], div[data-testid=\\\"Dianomi\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('rugbypass.com')) {\\n  if (window.location.pathname.match(/^\\\\/plus\\\\/\\\\w/)) {\\n    let paywall = document.querySelector('.premium-fold-bottom');\\n    if (paywall) {\\n      paywall.classList.remove('premium-fold-bottom');\\n      let offer = document.querySelector('.plus-article-offer');\\n      removeDOMElement(offer);\\n      let fade = document.querySelector('.fade');\\n      if (fade)\\n        fade.classList.remove('fade');\\n    }\\n    let lazy_images = document.querySelectorAll('figure > img.lazy[data-src]:not([src])');\\n    for (let elem of lazy_images) {\\n      elem.src = elem.getAttribute('data-src');\\n      elem.removeAttribute('class');\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('scientificamerican.com')) {\\n  setCookie('article_meter', '', 'scientificamerican.com', '/', 0);\\n}\\n\\nelse if (matchDomain('scholastic.com')) {\\n  let paywall = document.querySelector('div.paywallModalElement');\\n  if (paywall) {\\n    let modal = document.querySelector('div.modal-backdrop');\\n    removeDOMElement(paywall, modal);\\n    let body_modal = document.querySelector('body.modal-open');\\n    if (body_modal)\\n      body_modal.removeAttribute('class');\\n  }\\n}\\n\\nelse if (matchDomain('science.org')) {\\n  let paywall = document.querySelector('div.alert-read-limit');\\n  removeDOMElement(paywall);\\n  let overlay = document.querySelector('body.alert-read-limit__overlay');\\n  if (overlay)\\n    overlay.classList.remove('alert-read-limit__overlay');\\n}\\n\\nelse if (matchDomain('scmp.com')) {\\n  window.setTimeout(function () {\\n    if (matchDomain('amp.scmp.com')) {\\n      amp_unhide_subscr_section('div.ad-banner, div.advert-fly-carpet-container, div.inline-advert');\\n      let amp_images = document.querySelectorAll('section.article-body amp-img[src]');\\n      for (let elem of amp_images) {\\n        let img = document.createElement('img');\\n        img.src = elem.getAttribute('src');\\n        img.alt = elem.getAttribute('alt');\\n        img.style = 'width: 90%;';\\n        elem.parentNode.replaceChild(img, elem);\\n      }\\n      let default_meters = document.querySelectorAll('div[id^=\\\"default-meter-page-views\\\"]');\\n      removeDOMElement(...default_meters);\\n    } else {\\n      let paywall = document.querySelectorAll('div[data-qa=\\\"GenericArticle-PaywallContainer\\\"], div.js-reading-0-percent-completion-tracker');\\n      if (paywall.length) {\\n        removeDOMElement(...paywall);\\n        let article = document.querySelector('section[data-qa=\\\"ContentBody-ContentBodyContainer\\\"]');\\n        if (article) {\\n          let json_script = document.querySelector('script#__NEXT_DATA__');\\n          if (json_script) {\\n            try {\\n              let json = JSON.parse(json_script.text);\\n              if (json && json.props.pageProps.payload.data.article.body.json) {\\n                let pars = json.props.pageProps.payload.data.article.body.json;\\n                if (pars && pars.length)\\n                  article.innerHTML = '';\\n                for (let par of pars) {\\n                  let elem = document.createElement('p');\\n                  if (window.location.pathname.startsWith('/magazines/'))\\n                    elem.style = 'margin: 20px 0px;';\\n                  if (['p', 'h3'].includes(par.type)) {\\n                    for (let sub_elem of par.children) {\\n                      if (sub_elem.type === 'text') {\\n                        if (sub_elem.data)\\n                          elem.appendChild(document.createTextNode(sub_elem.data));\\n                      } else if (['a', 'em', 'span', 'strong'].includes(sub_elem.type)) {\\n                        let first_child = sub_elem.children && sub_elem.children[0];\\n                        if (sub_elem.children && sub_elem.children.length > 1) {\\n                          let elem_text = sub_elem.children.map(x => x.data || x.children[0].data).join('');\\n                          first_child = {type: 'text', data: elem_text};\\n                        }\\n                        if (first_child) {\\n                          if (first_child.type === 'text') {\\n                            if (first_child.data) {\\n                              let a_link = document.createElement('span');\\n                              if (sub_elem.attribs && sub_elem.attribs.href) {\\n                                a_link = document.createElement('a');\\n                                a_link.style = 'text-decoration: underline;';\\n                                a_link.href = sub_elem.attribs.href;\\n                                if (!matchUrlDomain(window.location.hostname, sub_elem.attribs.href))\\n                                  a_link.target = '_blank';\\n                              } else if (sub_elem.type === 'em')\\n                                a_link.style = 'font-style: italic;';\\n                              else if (sub_elem.type === 'strong')\\n                                a_link.style = 'font-weight: bold;';\\n                              a_link.innerText = first_child.data;\\n                              elem.appendChild(a_link);\\n                            }\\n                          }\\n                        }\\n                      } else if (sub_elem.type === 'img') {\\n                        if (sub_elem.attribs) {\\n                          let attribs = sub_elem.attribs;\\n                          if (attribs.src)\\n                            elem = makeFigure(attribs.src, attribs.title, {alt: attribs.alt, style: 'width: 100%;'}, {style: 'font-size: 80%;'});\\n                        }\\n                      } else {\\n                        console.log(sub_elem);\\n                      }\\n                    }\\n                  } else if (par.type === 'div') {\\n                    if (par.attribs) {\\n                      if (par.attribs.class === 'image-inline-container') {\\n                        if (par.children && par.children[0]) {\\n                          let attribs = par.children[0].attribs;\\n                          if (attribs.src)\\n                            elem = makeFigure(attribs.src, attribs.title, {alt: attribs.alt, style: 'width: 100%;'}, {style: 'font-size: 80%;'});\\n                        }\\n                      } else if (par.attribs.class.match(/(methode-html|oembed|video)-wrapper/) && par.children) {\\n                        addIframe(par.children);\\n                        function addIframe(par_children) {\\n                          for (let sub_elem of par_children) {\\n                            if (sub_elem.children)\\n                              addIframe(sub_elem.children);\\n                            if (sub_elem.type === 'iframe') {\\n                              let attribs = sub_elem.attribs;\\n                              if (attribs.src) {\\n                                let figure = document.createElement('figure');\\n                                let iframe = document.createElement('iframe');\\n                                iframe.src = attribs.src;\\n                                if (attribs.width && attribs.height) {\\n                                  if (!attribs.width.includes('%')) {\\n                                    let ratio = attribs.width / (article.offsetWidth);\\n                                    iframe.width = attribs.width / ratio;\\n                                    iframe.height = attribs.height / ratio;\\n                                  } else {\\n                                    iframe.width = attribs.width;\\n                                    iframe.height = attribs.height;\\n                                  }\\n                                } else if (attribs.style) {\\n                                  iframe.style = attribs.style;\\n                                  if (attribs.height)\\n                                    iframe.height = attribs.height;\\n                                }\\n                                figure.appendChild(iframe);\\n                                if (attribs.title) {\\n                                  let iframe_title = document.createElement('figcaption');\\n                                  iframe_title.innerText = attribs.title;\\n                                  iframe_title.style = 'font-size: 80%;';\\n                                  figure.appendChild(iframe_title);\\n                                }\\n                                elem.appendChild(figure);\\n                              }\\n                            }\\n                          }\\n                        }\\n                      } else if (par.attribs.class)\\n                        console.log(par);\\n                    }\\n                  } else if (!['blockquote-quote', 'inline-ad-slot', 'track-viewed-percentage'].includes(par.type))\\n                    console.log(par);\\n                  if (elem.hasChildNodes())\\n                    article.appendChild(elem);\\n                }\\n              }\\n            } catch (err) {\\n              console.log(err);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }, 0);\\n  let ads = 'div[data-qa*=\\\"AdSlot\\\"], div.adblock-message';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('seattletimes.com')) {\\n  let ads = 'div.top-ad-wrapper, div.ad, div.native-ad-article';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('sfstandard.com')) {\\n  setCookie('zephr-session', '', 'sfstandard.com', '/', 0);\\n  let paywall = document.querySelector('div#paywall-container');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    refreshCurrentTab();\\n  }\\n  let ads = 'div.sticky';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(sg_sph_media_domains)) {\\n  if (matchDomain('straitstimes.com')) {\\n    func_post = function () {\\n      header_nofix('main', 'div#sph_cdp_4:not(:empty)', 'BPC > no archive-fix');\\n    }\\n    let url = window.location.href;\\n    getArchive(url, 'div[id][data-sdkids-campaigntype=\\\"pay_wall\\\"]', '', 'main');\\n  } else if (matchDomain('businesstimes.com.sg')) {\\n    let article = document.querySelector('div.body-content > div[class]');\\n    if (article) {\\n      let par_hidden = article.querySelectorAll('p.hidden');\\n      if (par_hidden.length) {\\n        par_hidden[0].parentNode.removeAttribute('class');\\n        for (let elem of par_hidden)\\n          elem.classList.remove('hidden');\\n        let fade = article.querySelector('p[class*=\\\"bg-gradient-to-t\\\"]');\\n        if (fade)\\n          fade.className = par_hidden[0].className;\\n      }\\n    }\\n  }\\n  let ads = 'div.ads, div[id^=\\\"dfp-ad-\\\"], div.cx_paywall_placeholder, div[data-testid=\\\"cas-block-component\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('slate.com')) {\\n  let slate_roadblock = '.slate-roadblock';\\n  let ads = 'section[class*=\\\"-ad\\\"]';\\n  hideDOMStyle(slate_roadblock + ', ' + ads);\\n}\\n\\nelse if (matchDomain('slideshare.net')) {\\n  window.localStorage.clear();\\n  let limit_overlay = document.querySelector('.limit-overlay');\\n  if (limit_overlay)\\n    limit_overlay.classList.remove('limit-overlay');\\n}\\n\\nelse if (matchDomain('sltrib.com')) {\\n  let ads = 'div.ad, div.stickyAd, div.stickyTopAd, div[class^=\\\"sltrib_medrec\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('sloanreview.mit.edu')) {\\n  if (window.location.pathname.startsWith('/article/')) {\\n    window.setTimeout(function () {\\n      let pars = document.querySelectorAll('div.article-content > p');\\n      if (pars.length && pars.length < 7)\\n        refreshCurrentTab();\\n    }, 1000);\\n  }\\n}\\n\\nelse if (matchDomain('sofrep.com')) {\\n  setCookie('sofrep_news_ids', '', 'sofrep.com', '/', 0);\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    paywall.removeAttribute('class');\\n    let intro = document.querySelector('div.non-paywall');\\n    removeDOMElement(intro);\\n    waitDOMElement('div#paywall_wrap', 'DIV', node => removeDOMElement(node.parentNode));\\n  }\\n  let banners = document.querySelectorAll('#scrollerCTA, #botCta');\\n  removeDOMElement(...banners);\\n}\\n\\nelse if (matchDomain('spglobal.com')) {\\n  setCookie('count', '', 'spglobal.com', '/', 0);\\n}\\n\\nelse if (matchDomain('standardmedia.co.ke')) {\\n  let paywall = document.querySelector('div.fade-out-container');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse(json_script.text.replace(/[\\\\r\\\\n]/g, ''));\\n        if (json) {\\n          let json_text = parseHtmlEntities(breakText(json.articleBody)).replace(/[\\\\r\\\\n]/g, '<br>').replace(/[^<]+<br><br>/, '');\\n          let article = document.querySelector('div.content');\\n          if (json_text && article) {\\n            let parser = new DOMParser();\\n            let doc = parser.parseFromString('<p>' + json_text + '</p>', 'text/html');\\n            let article_new = doc.querySelector('p');\\n            let pars_old = article.querySelectorAll('p:not([class])');\\n            removeDOMElement(...pars_old);\\n            article.appendChild(article_new);\\n          }\\n        }\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n  let ads = 'div.ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('staradvertiser.com')) {\\n  let paywall = document.querySelectorAll('div.fade');\\n  if (paywall.length) {\\n    removeDOMElement(...paywall);\\n    let div_hidden = document.querySelector('div#hsa-paywall-content[style]');\\n    if (div_hidden)\\n      div_hidden.removeAttribute('style');\\n    let noscroll = document.querySelector('body.overflow-hidden');\\n    if (noscroll)\\n      noscroll.classList.remove('overflow-hidden');\\n  }\\n  let ads = 'div.promo-container, div.teads-inread';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('startribune.com')) {\\n  let ads = 'div[data-testid$=\\\"-ad\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('statnews.com')) {\\n  let paywall = document.querySelector('div.restricted-content-breaker');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let article = document.querySelector('div.entry-content, section.the-content');\\n    if (article) {\\n      let url = window.location.href;\\n      article.before(googleSearchToolLink(url));\\n    }\\n  }\\n  let ads = 'div.header-ad-wrap, div[class*=\\\"dfp-ad\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('stereogum.com')) {\\n  let paywall = document.querySelector('div.members-only-overlay-wrapper');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_url_dom = document.querySelector('head > link[rel=\\\"alternate\\\"][type=\\\"application/json\\\"][href]');\\n    if (json_url_dom) {\\n      let json_url = json_url_dom.href;\\n      fetch(json_url)\\n      .then(response => {\\n        if (response.ok) {\\n          response.json().then(json => {\\n            try {\\n              let json_text = json.acf.article_modules[0].copy.replace(/data-src/g, 'src');\\n              let content = document.querySelector('div.article__content div.text-block__inner');\\n              if (json_text && content) {\\n                let parser = new DOMParser();\\n                let doc = parser.parseFromString('<div>' + json_text + '</div>', 'text/html');\\n                let content_new = doc.querySelector('div');\\n                content.innerHTML = '';\\n                content.appendChild(content_new);\\n              }\\n            } catch (err) {\\n              console.log(err);\\n            }\\n          });\\n        }\\n      });\\n      }\\n  }\\n}\\n\\nelse if (matchDomain('stocknews.com')) {\\n  let hideme = document.querySelector('div#hideme');\\n  removeDOMElement(hideme);\\n  let blurmes = document.querySelectorAll('div[id^=\\\"blurme\\\"]');\\n  for (let i = 0; i < blurmes.length; i++)\\n    blurmes[i].setAttribute('id', 'blurmenot' + i);\\n}\\n\\nelse if (matchDomain('stratfor.com')) {\\n  let url = window.location.href;\\n  getArchive(url, 'div#paywallCTAContainer:not(:empty)', '', 'main', '', 'main', 'h1');\\n}\\n\\nelse if (matchDomain('study.com')) {\\n  let faded_content = document.querySelector('div.faded-content');\\n  if (faded_content)\\n    faded_content.removeAttribute('class');\\n  let div_hidden = document.querySelector('div.hidden[ng-non-bindable]');\\n  if (div_hidden)\\n    div_hidden.removeAttribute('class');\\n  let banners = document.querySelectorAll('div.article-cutoff-div');\\n  removeDOMElement(...banners);\\n}\\n\\nelse if (matchDomain('swarajyamag.com')) {\\n  if (!window.location.pathname.startsWith('/amp/')) {\\n    let paywall = pageContains('h2', /Please Sign In To Continue Reading/);\\n    let amphtml = document.querySelector('head > link[rel=\\\"amphtml\\\"]');\\n    if (paywall.length) {\\n      removeDOMElement(...paywall);\\n      if (amphtml)\\n        amp_redirect_not_loop(amphtml);\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('techinasia.com')) {\\n  let paywall = document.querySelector('div.paywall-content');\\n  if (paywall) {\\n    hideDOMStyle('div.paywall-content');\\n    let content_new = paywall.querySelector('div.content');\\n    let empty_par = content_new.querySelector('a.flourish-credit:not(img), h2:not(:has(~ p))');\\n    if (!empty_par) {\\n      let div = document.createElement('div');\\n      div.className = paywall.className.replace('paywall-content', '');\\n      div.append(content_new);\\n      paywall.before(div);\\n      let container = document.querySelector('div.col div > div.container');\\n      if (container)\\n        container.classList.remove('container');\\n    } else {\\n      let url = window.location.href;\\n      let url_xhr = url.replace('.com/', '.com/wp-json/techinasia/2.0/posts/').replace('/visual-story/', '/');\\n      fetch(url_xhr)\\n      .then(response => {\\n        if (response.ok) {\\n          response.json().then(json => {\\n            let json_text = json.posts[0].content;\\n            json_text = json_text.replace(/width\\\\=\\\\\\\"(\\\\d){3,}\\\\\\\"/g, 'width=\\\"100%\\\"').replace(/height\\\\=\\\\\\\"(\\\\d){3,}\\\\\\\"/g, 'height=\\\"100%\\\"');\\n            if (json_text) {\\n              let parser = new DOMParser();\\n              let doc = parser.parseFromString('<div class=\\\"content\\\">' + json_text + '</div>', 'text/html');\\n              let content_new = doc.querySelector('div.content');\\n              let content = document.querySelector('div.content');\\n              if (content)\\n                content_new.className = content.className;\\n              paywall.before(content_new);\\n            }\\n          });\\n        }\\n      });\\n    }\\n  }\\n  let splash_subscribe = document.querySelector('div.splash-subscribe');\\n  let paywall_hard = document.querySelector('div.paywall-hard');\\n  removeDOMElement(splash_subscribe, paywall_hard);\\n}\\n\\nelse if (matchDomain(['techtarget.com', 'computerweekly.com'])) {\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    paywall.classList.remove('paywall');\\n    let banners = document.querySelectorAll('p#firstP, div#inlineRegistrationWrapper');\\n    removeDOMElement(...banners);\\n  }\\n}\\n\\nelse if (matchDomain('the-american-interest.com')) {\\n  let counter = document.getElementById('article-counter');\\n  removeDOMElement(counter);\\n}\\n\\nelse if (matchDomain('the-scientist.com')) {\\n  let paywall = document.querySelector('div.paywall');\\n  if (paywall) {\\n    paywall.classList.remove('paywall');\\n    let fader = document.querySelector('div.gated-fader');\\n    let modal = document.querySelector('div#Modal');\\n    removeDOMElement(fader, modal);\\n  }\\n}\\n\\nelse if (matchDomain('theamericanconservative.com')) {\\n  let paywall_sel = 'section.c-blog-post__body--locked';\\n  let paywall = document.querySelector(paywall_sel);\\n  if (paywall) {\\n    let art_options = {\\n      art_append: 1,\\n      func_text: function (json_text) {\\n        if (json_text.includes('<p class=\\\"has-drop-cap\\\">')) {\\n          let split = json_text.split(/(<p class=\\\"has-drop-cap\\\">)/);\\n          json_text = split[1] + split[2];\\n        };\\n        return json_text;\\n      }\\n    };\\n    getJsonUrl(paywall_sel, {rm_class: 'c-blog-post__body--locked'}, 'div.c-blog-post__content', art_options);\\n  } else {\\n    let img_dark = document.querySelector('div.c-hero-article__image-img.o-image');\\n    if (img_dark)\\n      img_dark.removeAttribute('class');\\n  }\\n  let modal = document.querySelector('div#emailsub-modal');\\n  removeDOMElement(modal);\\n  let noscroll = document.querySelector('body.modal-open');\\n  if (noscroll)\\n    noscroll.classList.remove('modal-open');\\n}\\n\\nelse if (matchDomain('theamericanscholar.org')) {\\n  getJsonUrl('div.ssagk-form', '', 'div.post_summary');\\n}\\n\\nelse if (matchDomain('theatlantic.com')) {\\n  let banners = 'aside#paywall, div[class^=\\\"LostInventoryMessage_\\\"]';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain('thebaltimorebanner.com')) {\\n  let ads = 'div.article-body__inline-ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('thebulletin.org')) {\\n  getJsonUrl('div.article--cropped', '', 'div#body-copy', {art_append: 1});\\n}\\n\\nelse if (matchDomain('thedailybeast.com')) {\\n  let paywall = document.querySelector('div.Body__paywall-container');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = document.querySelector('script[displayName=\\\"initialState\\\"]');\\n    if (json_script) {\\n      let json_str = json_script.text.substring(json_script.textContent.indexOf('{'));\\n      try {\\n        let json = JSON.parse(json_str);\\n        if (json.body) {\\n          let pars = json.body.sections;\\n          let cards = json.body.cards;\\n          if (pars) {\\n            let mobile_doc = document.querySelector('div.Mobiledoc');\\n            if (mobile_doc) {\\n              let mobile_doc_text = mobile_doc.innerText.replace(/(\\\\r|\\\\n)/g, '');\\n              for (let elem of pars) {\\n                let par_elem = '';\\n                if (elem[0] === 1) {\\n                  if (elem[1] === 'p') {\\n                    let par = '';\\n                    for (let part of elem[2])\\n                      par += part[3];\\n                    if (par && !mobile_doc_text.includes(par)) {\\n                      par_elem = document.createElement('p');\\n                      par_elem.innerText = par;\\n                    }\\n                  }\\n                } else if (elem[0] === 10) {\\n                  if (cards && cards[elem[1]]) {\\n                    let card = cards[elem[1]];\\n                    if (card[0] === 'pt-image') {\\n                      par_elem = document.createElement('p');\\n                      let par_fig = makeFigure(card[1].url, card[1].title + ' ' + card[1].credit);\\n                      par_elem.appendChild(par_fig);\\n                    } else if (card[0] === 'pt-fancy-links-card') {\\n                      par_elem = document.createElement('p');\\n                      let par_link = document.createElement('a');\\n                      par_link.href = card[1].links;\\n                      par_link.innerText = card[1].linksData[0].long_headline;\\n                      par_elem.appendChild(par_link);\\n                    }\\n                  }\\n                }\\n                if (par_elem)\\n                  mobile_doc.appendChild(par_elem);\\n              }\\n            }\\n          }\\n        }\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n  let ads = document.querySelectorAll('div > div.tdb-ads-block');\\n  for (let ad of ads)\\n    hideDOMElement(ad.parentNode);\\n}\\n\\nelse if (matchDomain('thediplomat.com')) {\\n  if (matchDomain('magazine.thediplomat.com')) {\\n    let article = document.querySelector('article > section.h-96');\\n    if (article) {\\n      article.classList.remove('h-96');\\n      let art_body = article.querySelector('div.prose');\\n      if (art_body) {\\n        let art_img = article.parentNode.querySelector('figure > picture > img[src]');\\n        let art_img_src;\\n        let art_img_match;\\n        if (art_img) {\\n          art_img_src = art_img.getAttribute('src');\\n          let match = art_img.getAttribute('src').match(/\\\\/media\\\\/\\\\d+\\\\/(\\\\w+)\\\\.\\\\w+/);\\n          if (match)\\n            art_img_match = match[1];\\n        }\\n        let url = window.location.href.split(/[#\\\\?]/)[0];\\n        fetch(url)\\n        .then(response => {\\n          if (response.ok) {\\n            response.text().then(html => {\\n              if (html.includes('<script>window.__remixContext.streamController.enqueue(\\\"')) {\\n                try {\\n                  let source = (html.split('<script>window.__remixContext.streamController.enqueue(\\\"')[1].split(/\\\\](\\\\\\\\n)?\\\"\\\\);<\\\\/script>/)[0] + ']').replace(/\\\\\\\\\\\"/g, '\\\"').replace(/\\\\\\\\\\\\\\\\\\\"/g, '\\\\\\\\\\\"');\\n                  let json = JSON.parse(source);\\n                  if (json) {\\n                    let body_index = json.indexOf('body') + 1;\\n                    if (body_index) {\\n                      art_body.innerHTML = '';\\n                      let parser = new DOMParser();\\n                      for (let i = body_index; i < json.length; i++) {\\n                        let par = json[i];\\n                        if (typeof par === 'string') {\\n                          if (par.startsWith('<p>')) {\\n                            let doc = parser.parseFromString('<div>' + par + '</div>', 'text/html');\\n                            let par_new = doc.querySelector('div');\\n                            let pars = par_new.querySelectorAll('p');\\n                            for (let par of pars)\\n                              art_body.appendChild(par);\\n                          } else if (art_img_match && par !== art_img_match && par.includes(art_img_match.slice(0, -1))) {\\n                            let caption;\\n                            for (let n = i - 5; n < i; n++) {\\n                              let item = json[n];\\n                              if (typeof item === 'string' && !item.startsWith('<p>') && !['caption', 'credit_name', 'file', 'image'].includes(item) && !item.match(/\\\\d+_\\\\d+/))\\n                                caption = caption ? caption + '\\\\r\\\\n' + item : item;\\n                            }\\n                            let figure = makeFigure(art_img_src.replace(art_img_match, par), caption);\\n                            figure.style = 'margin: 20px 0px;';\\n                            art_body.appendChild(figure);\\n                          }\\n                        }\\n                      }\\n                    }\\n                  }\\n                } catch (err) {\\n                  console.log(err);\\n                }\\n              }\\n            });\\n          }\\n        })\\n      }\\n      let fade = 'aside.bg-gradient-to-b';\\n      hideDOMStyle(fade, 2);\\n      let banner = document.querySelector('section > a[href^=\\\"https://thediplomat.com/subscriptions\\\"]');\\n      if (banner)\\n        removeDOMElement(banner.parentNode);\\n    }\\n  }\\n  let ads = 'aside.td-ad-container--labeled, div[data-actirise]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('theglobeandmail.com')) {\\n  let lazy_images = document.querySelectorAll('img[src^=\\\"data:image/\\\"][data-src]');\\n  for (let elem of lazy_images)\\n    elem.src = elem.getAttribute('data-src');\\n  let fusion_script = document.querySelector('script#fusion-metadata');\\n  if (fusion_script && fusion_script.text.includes('Fusion.globalContent=')) {\\n    try {\\n      let json = JSON.parse(fusion_script.text.split('Fusion.globalContent=')[1].split(';Fusion.')[0]);\\n      let audio_tts = document.querySelector('div > div.audio-panel:has(p.audio-anonymous)');\\n      if (audio_tts) {\\n        let audio_json = getNestedKeys(json, 'additional_properties.tts_audio');\\n        if (audio_json) {\\n          let audio_src = audio_json.url_en_M || audio_json.url_en_F;\\n          if (audio_src) {\\n            let audio = document.createElement('audio');\\n            audio.src = audio_src;\\n            audio.setAttribute('controls', '');\\n            audio_tts.parentNode.replaceChild(audio, audio_tts);\\n          }\\n        }\\n      }\\n      window.setTimeout(function () {\\n        let video = document.querySelector('div > div.c-video:empty');\\n        if (video) {\\n          let streams = findKeyJson(json, 'streams');\\n          if (streams && streams.length) {\\n            let stream = streams.pop();\\n            if (stream.url) {\\n              let video_new = document.createElement('video');\\n              video_new.src = stream.url;\\n              video_new.style = 'width: 90%; margin: 0px 15px;';\\n              video_new.setAttribute('controls', '');\\n              video.parentNode.replaceChild(video_new, video);\\n            }\\n          }\\n        }\\n      }, 2000);\\n    } catch (err) {\\n      console.log(err);\\n    }\\n  }\\n  let ads = 'div.c-ad--base';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('thehill.com')) {\\n  let banners = 'div.civic-science-article-container:empty, aside.ad-unit, iframe#instaread_iframe:not([src])';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain(['thehindu.com', 'thehindubusinessline.com'])) {\\n  if (!window.location.pathname.endsWith('/amp/')) {\\n    if (window.location.pathname.match(/\\\\/videos\\\\/[-\\\\/\\\\w]+\\\\.ece/)) {\\n      let video = document.querySelector('div.lead-video-cont');\\n      if (video) {\\n        let player = video.querySelector('div.jwplayer');\\n        if (!player)\\n          header_nofix(video, '', 'BPC > for videos disable extension');\\n      }\\n    }\\n    let read_more = document.querySelector('div.paywallbox-btn > button');\\n    if (read_more)\\n      read_more.click();\\n    let ads = 'div.ad, div.article-ad, div.dfp-ad, div#paywallbox, div[id^=\\\"piano-art-\\\"], #test';\\n    hideDOMStyle(ads);\\n  } else {\\n    let ads = '[class^=\\\"height\\\"], [class^=\\\"advt\\\"], [id^=\\\"piano\\\"]';\\n    hideDOMStyle(ads);\\n  }\\n}\\n\\nelse if (matchDomain(['thejuggernaut.com', 'jgnt.co'])) {\\n  let paywall = pageContains('div.font-mono', /(Read this article and many more by subscribing today|Join today to read the full story)/);\\n  if (paywall.length) {\\n    removeDOMElement(paywall[0].parentNode);\\n    let json_script = document.querySelector('script#__NEXT_DATA__');\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse(json_script.text);\\n        if (json && json.props.pageProps.post.fields) {\\n          let url_next = json.query.slug;\\n          if (url_next && !window.location.pathname.includes(url_next))\\n            refreshCurrentTab();\\n          let fields = json.props.pageProps.post.fields;\\n          let pars = fields.fullText ? fields.fullText.content : fields.textEssay.fields.body.content;\\n          window.setTimeout(function () {\\n          let article = document.querySelector('div[class*=\\\"opacity-\\\"]');\\n          if (article) {\\n            article.innerHTML = '';\\n            article.removeAttribute('class');\\n            let fade = document.querySelectorAll('div.bg-gradient-to-b');\\n            for (let elem of fade)\\n              elem.removeAttribute('class');\\n            let modal = document.querySelector('div#headlessui-portal-root');\\n            removeDOMElement(modal);\\n            let par_first = true;\\n            function attach_text(sub_item, elem) {\\n              if (sub_item.value) {\\n                let sub_elem = document.createElement('span');\\n                sub_elem.innerText = sub_item.value;\\n                if (sub_item.marks && sub_item.marks.length) {\\n                  let style = '';\\n                  for (let mark of sub_item.marks) {\\n                    if (mark.type === 'bold')\\n                      style += 'font-weight: bold;';\\n                    else if (mark.type === 'italic')\\n                      style += 'font-style: italic;';\\n                    else if (mark.type === 'underline')\\n                      style += 'text-decoration: underline;';\\n                  }\\n                  sub_elem.style = style;\\n                }\\n                elem.appendChild(sub_elem);\\n              }\\n            }\\n            function attach_hyperlink(sub_item, elem) {\\n              if (sub_item.content && sub_item.content[0] && sub_item.content[0].value && sub_item.data && sub_item.data.uri) {\\n                let sub_elem = document.createElement('a');\\n                sub_elem.href = sub_item.data.uri;\\n                sub_elem.innerText = sub_item.content[0].value;\\n                if (!matchUrlDomain(['thejuggernaut.com', 'jgnt.co'], sub_item.data.uri))\\n                  sub_elem.target = '_blank';\\n                sub_elem.style = 'text-decoration: underline;';\\n                elem.appendChild(sub_elem);\\n              }\\n            }\\n            function attach_paragraph(par, elem) {\\n              if (par.content && par.content.length) {\\n                let span_elem = document.createElement('span');\\n                for (let item of par.content) {\\n                  if (item.nodeType === 'text') {\\n                    attach_text(item, span_elem);\\n                  } else if (item.nodeType === 'hyperlink') {\\n                    attach_hyperlink(item, span_elem);\\n                  } else\\n                    console.log(item);\\n                }\\n                elem.appendChild(span_elem);\\n              }\\n            }\\n            for (let par of pars) {\\n              let elem = document.createElement('p');\\n              if (par.nodeType.match(/^(paragraph|heading-\\\\d)$/)) {\\n                attach_paragraph(par, elem);\\n              } else if (['blockquote'].includes(par.nodeType)) {\\n                if (par.content && par.content.length) {\\n                  for (let item of par.content) {\\n                    if (item.nodeType === 'paragraph') {\\n                      elem.style = 'margin: 0px 20px; font-style: italic;';\\n                      attach_paragraph(item, elem);\\n                    } else\\n                      console.log(item);\\n                  }\\n                }\\n              } else if (par.nodeType === 'hr') {\\n                elem.appendChild(document.createElement('hr'));\\n              } else if (par.nodeType === 'embedded-asset-block') {\\n                if (!par_first) {\\n                  if (par.data && par.data.target && par.data.target.fields) {\\n                    if (par.data.target.fields.file && par.data.target.fields.file.url) {\\n                      let figure = makeFigure(par.data.target.fields.file.url, par.data.target.fields.description);\\n                      elem.appendChild(figure);\\n                    }\\n                  }\\n                } else\\n                  par_first = false;\\n              } else if (par.nodeType === 'unordered-list') {\\n                if (par.content && par.content.length) {\\n                  let ul = document.createElement('ul');\\n                  for (let item of par.content) {\\n                    if (item.nodeType === 'list-item') {\\n                      if (item.content) {\\n                        for (let sub_item_par of item.content) {\\n                          if (sub_item_par.nodeType === 'paragraph') {\\n                            let li = document.createElement('li');\\n                            attach_paragraph(sub_item_par, li);\\n                            ul.appendChild(li);\\n                          }\\n                        }\\n                      }\\n                    } else\\n                      console.log(item);\\n                  }\\n                  elem.appendChild(ul);\\n                }\\n              } else {\\n                console.log(par);\\n              }\\n              if (elem.hasChildNodes()) {\\n                article.appendChild(document.createElement('br'));\\n                article.appendChild(elem);\\n              }\\n            }\\n          }\\n          }, 1000);\\n        } else\\n          refreshCurrentTab();\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('thelampmagazine.com')) {\\n  let paywall = document.querySelector('div.paywall-gradient');\\n  if (paywall) {\\n    paywall.removeAttribute('class');\\n    let banner = document.querySelector('section.p-8');\\n    removeDOMElement(banner);\\n  }\\n  let login = document.querySelectorAll('a.js-login-modal-trigger');\\n  for (let elem of login) {\\n    elem.removeAttribute('class');\\n    let url_search = '/search?q=' + elem.innerText.replace(/\\\\s/g, '+');\\n    elem.href = url_search;\\n    elem.onclick = x => window.location.href = url_search;\\n  }\\n}\\n\\nelse if (matchDomain('thelogic.co')) {\\n  setCookie('firstarticle', '', 'thelogic.co', '/', 0);\\n}\\n\\nelse if (matchDomain('thenewatlantis.com')) {\\n  let article_gated = document.querySelector('.article-gated');\\n  if (article_gated)\\n    article_gated.classList.remove('article-gated');\\n}\\n\\nelse if (matchDomain('thenewsminute.com')) {\\n  let paywall = document.querySelector('div#paywall-banner');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let fade = document.querySelector('div[class^=\\\"paywall-story-styles-\\\"]');\\n    if (fade)\\n      fade.removeAttribute('class');\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      let json = JSON.parse(json_script.text);\\n      if (json) {\\n        let json_text = breakText(parseHtmlEntities(json.articleBody.replace(/\\\\.\\\\./g, '.\\\\r\\\\n\\\\r\\\\n')));\\n        let article = document.querySelector('div.arr--story-page-card-wrapper');\\n        if (json_text && article) {\\n          article.innerHTML = '';\\n          let article_new = document.createElement('p');\\n          article_new.innerText = json_text;\\n          article.appendChild(article_new);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('thepointmag.com')) {\\n  setCookie('monthly_history', '', 'thepointmag.com', '/', 0);\\n  let overlay = document.querySelectorAll('div.overlay, div#tpopup-');\\n  removeDOMElement(...overlay);\\n}\\n\\nelse if (matchDomain('thequint.com')) {\\n  window.setTimeout(function () {\\n    let lock = document.querySelector('div > img[alt^=\\\"lock\\\"]');\\n    if (lock) {\\n      lock.removeAttribute('alt');\\n      let paywall = document.querySelector('div#paywall-widget');\\n      if (paywall) {\\n        removeDOMElement(paywall);\\n        let article = document.querySelector('div.story-element');\\n        if (article) {\\n          let article_new = getArticleQuintype();\\n          if (article_new && article.parentNode)\\n            article.parentNode.replaceChild(article_new, article);\\n        }\\n      }\\n      let body_hidden = document.querySelector('div#story-body-wrapper');\\n      if (body_hidden) {\\n        body_hidden.removeAttribute('class');\\n        body_hidden.removeAttribute('style');\\n      }\\n      function thequint_unhide(node) {\\n        node.removeAttribute('style');\\n      }\\n      waitDOMAttribute('div#story-body-wrapper', 'DIV', 'style', thequint_unhide, true);\\n    }\\n  }, 4000);\\n}\\n\\nelse if (matchDomain('thespectator.com')) {\\n  let div_hidden = document.querySelector('div.ev-meter-content-class');\\n  if (div_hidden)\\n    div_hidden.classList.remove('ev-meter-content-class');\\n  let newsletter = pageContains('p', /^\\\\[special_offer\\\\]/);\\n  removeDOMElement(...newsletter);\\n  let ads = 'ins.adsbygoogle';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('theweek.com')) {\\n  let paywall = document.querySelector('div.kiosq-main-layer');\\n  removeDOMElement(paywall);\\n  let locker = document.querySelector('div.paywall-locker');\\n  if (locker)\\n    locker.classList.remove('paywall-locker');\\n}\\n\\nelse if (matchDomain('thewrap.com')) {\\n  setCookie('blaize_session', '', 'thewrap.com', '/', 0);\\n  getJsonUrl('div#zephr-payment-form-root', '', 'div.entry-content', {art_append: 1});\\n  let fade = document.querySelector('div.content-area div[style*=\\\"background-image: linear-gradient\\\"]');\\n  removeDOMElement(fade);\\n}\\n\\nelse if (matchDomain('timeshighereducation.com')) {\\n  let paywall = document.querySelector('div.paywall-active');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let fade = document.querySelectorAll('div.paywall-fade');\\n    for (let elem of fade)\\n      elem.classList.remove('paywall-fade');\\n  }\\n  let hidden_images = document.querySelectorAll('img.b-lazy[src^=\\\"data:image/\\\"][data-src]');\\n  for (let hidden_image of hidden_images) {\\n    hidden_image.setAttribute('src', hidden_image.getAttribute('data-src'));\\n    hidden_image.classList.remove('b-lazy');\\n    hidden_image.parentElement.classList.remove('media--loading');\\n  }\\n  let ads = 'div[data-ad-page], section.block-the-dfp';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('epaper.indiatimes.com')) {\\n  let blocker = document.querySelector('div.epaperBlockerWrap');\\n  removeDOMElement(blocker);\\n  if (window.location.pathname.startsWith('/english-news-paper-today-toi-print-edition/')) {\\n    let paywall = document.querySelector('section#blocker');\\n    if (paywall) {\\n      let fq = document.querySelector('section#fq');\\n      removeDOMElement(paywall, fq);\\n      let json_script = getArticleJsonScript();\\n      if (json_script) {\\n        let json = JSON.parse(json_script.text);\\n        if (json) {\\n          let json_text = json.articleBody;\\n          let content = document.querySelector('section[type=\\\"synopsis\\\"]');\\n          if (json_text && content) {\\n            let article_new = document.createElement('p');\\n            article_new.innerText = breakText(json_text);\\n            content.innerHTML = '';\\n            addStyle('[type=\\\"synopsis\\\"]::after {background: none !important;}');\\n            content.appendChild(article_new);\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain(no_dn_media_domains)) {\\n  if (matchDomain('tradewindsnews.com') && window.location.pathname.startsWith('/markets/')) {\\n    let paywall = document.querySelector('iframe[src]');\\n    removeDOMElement(paywall);\\n    let overflow = document.querySelector('body[style]');\\n    if (overflow)\\n      overflow.removeAttribute('style');\\n    let blurred = document.querySelector('body > div[style]');\\n    if (blurred)\\n      blurred.removeAttribute('style');\\n  } else {\\n    window.setTimeout(function () {\\n      function dn_main(node) {\\n        let article = document.querySelector('div#dn-content');\\n        let json_script = document.querySelector('script#__NUXT_DATA__');\\n        if (article && json_script) {\\n          removeDOMElement(node.parentNode);\\n          try {\\n            let pars = JSON.parse(json_script.text);\\n            let article_id_index = (pars.indexOf('global-article') + 1) || (pars.indexOf('dn-article') + 1);\\n            if (article_id_index) {\\n              let article_id = pars[article_id_index];\\n              if (article_id && !window.location.pathname.endsWith(article_id)) {\\n                refreshCurrentTab();\\n                return;\\n              }\\n            } else {\\n              refreshCurrentTab();\\n              return;\\n            }\\n            article.innerHTML = '';\\n            article.classList.remove('shadow');\\n            let img_first = true;\\n            let parser = new DOMParser();\\n            for (let par of pars) {\\n              let elem;\\n              if (par && par.type) {\\n                let type = pars[par.type];\\n                if (['text', 'subhead'].includes(type)) {\\n                  if (par.html || par.value) {\\n                    let index = par.html || par.value;\\n                    let json_text = pars[index];\\n                    let content_new = parser.parseFromString('<p class=\\\"dn-text\\\">' + json_text + '</p>', 'text/html');\\n                    elem = content_new.querySelector('p');\\n                    if (par.value)\\n                      elem.style = 'font-weight: bold;';\\n                  }\\n                } else if (type === 'picture') {\\n                  if (img_first)\\n                    img_first = false;\\n                  else {\\n                    let caption_text = pars[par.caption];\\n                    if (par.credit)\\n                      caption_text += ' (' + pars[par.credit] + ')';\\n                    elem = makeFigure(pars[par.src], caption_text);\\n                    elem.className = 'dn-image';\\n                  }\\n                } else if (type === 'embed') {\\n                  elem = document.createElement('div');\\n                  if (par.value) {\\n                    let content_new = parser.parseFromString('<div>' + pars[par.value] + '</div>', 'text/html');\\n                    let video = content_new.querySelector('div');\\n                    elem.appendChild(video);\\n                  }\\n                } else if (type === 'factbox') {\\n                  elem = document.createElement('p');\\n                  if (par.title)\\n                    elem.innerText = pars[par.title];\\n                  if (par.html) {\\n                    let content_new = parser.parseFromString('<div>' + pars[par.html] + '</div>', 'text/html');\\n                    let box = content_new.querySelector('div');\\n                    elem.appendChild(box);\\n                  }\\n                } else if (type === 'summary') {\\n                  if (par.bullets) {\\n                    elem = document.createElement('ul');\\n                    for (let item of pars[par.bullets]) {\\n                      let li = document.createElement('li');\\n                      li.innerText = pars[item];\\n                      elem.appendChild(li);\\n                    }\\n                  }\\n                } else if (type === 'news' && par.title && par.url) {\\n                  elem = document.createElement('p');\\n                  let sub_elem = document.createElement('a');\\n                  sub_elem.href = pars[par.url];\\n                  sub_elem.innerText = 'Related: ' + pars[par.title];\\n                  sub_elem.style = 'font-weight: bold;';\\n                  elem.appendChild(sub_elem);\\n                } else if (!['ad', 'ad_group', 'adobetarget', 'author', 'break', 'Emne', 'job', 'Location', 'ma_frame', 'news', 'Organisasjon', 'Organisation', 'Organization', 'promobox', 'Person', 'Personer', 'quote', 'readpeak', 'Region', 'Regions', 'related', 'Sector', 'Sectors', 'Selskap', 'Shiptype', 'Sted', 'Steder', 'Topic', 'ukens_stilling', 'video'].includes(type)) {\\n                  for (let item in par) {\\n                    console.log(item);\\n                    console.log(pars[par[item]]);\\n                  }\\n                }\\n                if (elem)\\n                  article.appendChild(elem);\\n              }\\n            }\\n          } catch (err) {\\n            console.log(err);\\n          }\\n        }\\n      }\\n      let paywall_sel = 'div#sub-paywall-container';\\n      let paywall = document.querySelector(paywall_sel);\\n      if (paywall) {\\n        if (matchDomain('dn.no') && window.location.pathname.match(/^\\\\/(d2|magasinet|smak)\\\\//)) {\\n          removeDOMElement(paywall);\\n          let article = document.querySelector('article');\\n          if (article) {\\n            let url = window.location.href;\\n            article.firstChild.before(googleSearchToolLink(url));\\n            if (mobile) {\\n              let body = document.querySelector('body');\\n              if (body)\\n                body.style.width = '80%';\\n            }\\n          }\\n        } else {\\n          if (window.location.pathname.match(/^\\\\/(e-avis|editions)/)) {\\n            removeDOMElement(paywall);\\n            header_nofix('section.wrapper');\\n          } else\\n            dn_main(paywall);\\n        }\\n      }\\n    }, 1000);\\n  }\\n  let ads = 'div.top-ad-placeholder, div.dn-dfp-container';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_conde_nast_domains)) {\\n  let maps = document.querySelectorAll('div.map_wrapper');\\n  for (let elem of maps)\\n    elem.style.visibility = 'visible';\\n  let banners = 'div.ad, aside.paywall-bar, div[class^=\\\"MessageBannerWrapper-\\\"], div.ad-stickyhero, div.ad_wrapper';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if (matchDomain(usa_craincomm_domains)) {\\n  if (matchDomain('european-rubber-journal.com')) {\\n    let paywall = document.querySelector('div.article-overlay');\\n    if (paywall) {\\n      let fade = document.querySelector('div.gradient');\\n      removeDOMElement(paywall, fade);\\n      let truncated = document.querySelector('div.truncated');\\n      if (truncated)\\n        truncated.classList.remove('truncated');\\n    }\\n  } else if (matchDomain(['pionline.com', 'rubbernews.com'])) {\\n    let body_hidden = document.querySelector('body[class]');\\n    if (body_hidden)\\n      body_hidden.removeAttribute('class');\\n    let lazy_images = document.querySelectorAll('img.lazy[data-src]');\\n    for (let lazy_image of lazy_images) {\\n      lazy_image.src = lazy_image.getAttribute('data-src');\\n      lazy_image.removeAttribute('class');\\n    }\\n    let lazy_sources = document.querySelectorAll('source[srcset^=\\\"data:image\\\"]');\\n    removeDOMElement(...lazy_sources);\\n  } else {\\n    let sponsored_article = document.querySelector('div.sponsored-article');\\n    if (sponsored_article)\\n      sponsored_article.classList.remove('sponsored-article');\\n  }\\n  let ads = 'div.footer__ads-footer';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_nymag_domains)) {\\n  let ads = 'div.m-ad, section.ad-splash, aside.ad_static';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_outside_mag_domains)) {\\n  let ads = 'div.js-ad';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_penske_media_domains)) {\\n  let ads = 'div.admz';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_tribune_domains)) {\\n  getJsonUrl('div.paywall-container', '', 'div.body-copy', {art_class: 'body-copy'});\\n  let ads = 'div.dfp-ad, div.bx-slab, div.sbn-widget-body, div#mobile-adhesion';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('vice.com')) {\\n  getJsonUrl('section.unlock-container', '', 'div.entry-content');\\n  let ads = 'div.lngtd-dyn-ph, div.lngtd-ad-wrapper-banner';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('vikatan.com')) {\\n  window.setTimeout(function () {\\n    let paywall = document.querySelector('div#paywallDisplay');\\n    if (paywall) {\\n      removeDOMElement(paywall);\\n      let json_script = getArticleJsonScript();\\n      if (json_script) {\\n        try {\\n          let json = JSON.parse(json_script.text);\\n          if (json) {\\n            let article = document.querySelector('div.story-element');\\n            if (article) {\\n              let parser = new DOMParser();\\n              let json_text = parseHtmlEntities(json.articleBody);\\n              let doc = parser.parseFromString('<div>' + json_text + '</div>', 'text/html');\\n              let content_new = doc.querySelector('div');\\n              let content = document.querySelector('div.story-element > div');\\n              if (content)\\n                content.parentNode.replaceChild(content_new, content);\\n              else\\n                article.appendChild(content_new);\\n            }\\n          }\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n      let story_hidden = document.querySelector('div[class^=\\\"styles-m__story-card-wrapper_\\\"]');\\n      if (story_hidden)\\n        story_hidden.removeAttribute('class');\\n    }\\n  }, 1500);\\n  let ads = 'div[class^=\\\"styles-m__popup-wrapper-adb\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('voguebusiness.com')) {\\n  setCookie('userId', '', 'voguebusiness.com', '/', 0);\\n  let article = document.querySelector('article');\\n  if (article) {\\n    let pars = article.querySelectorAll('p:not([class]), p.paywall');\\n    if (pars.length < 5) {\\n      removeDOMElement(...pars);\\n      let filter = /^window\\\\.__PRELOADED_STATE__\\\\s?=\\\\s?/;\\n      let json_script = getSourceJsonScript(filter, '[type]:not([src])');\\n      if (json_script) {\\n        try {\\n          let json = JSON.parse(json_script.text.split(filter)[1].split('};')[0] + '}');\\n          let body = document.querySelector('div.body__inner-container');\\n          if (body) {\\n            let pars = json.transformed.article.body;\\n            function makeElem(elem, par_elem) {\\n              if (Array.isArray(elem) && elem.length) {\\n                let elem_new;\\n                let item = elem[0];\\n                if (typeof item === 'string') {\\n                  if (['p', 'h2', 'em', 'strong'].includes(item)) {\\n                    elem_new = document.createElement(item);\\n                    par_elem.appendChild(elem_new);\\n                    elem.shift();\\n                    makeElem(elem, elem_new);\\n                  } else if (item === 'a' && elem.length > 2) {\\n                    elem_new = document.createElement('a');\\n                    let a_data = elem[1];\\n                    elem_new.href = a_data.href;\\n                    if (a_data.isExternal)\\n                      elem_new.target = '_blank';\\n                    makeElem(elem.slice(2), elem_new);\\n                    par_elem.appendChild(elem_new);\\n                  } else if (item === 'inline-embed' || !(['ad', 'cm-unit', 'inline-newsletter', 'journey-inline-newsletter', 'native-ad'].includes(item) || (item.length < 30 && item.includes('inline-embed')))) {\\n                    if (item === 'inline-embed') {\\n                      let img_data = elem[1];\\n                      if (img_data && img_data.type === 'image') {\\n                        if (img_data.props && img_data.props.image && img_data.props.image.sources) {\\n                          let caption_text;\\n                          if (img_data.props.dangerousCaption) {\\n                            caption_text = img_data.props.dangerousCaption.replace(/<\\\\/?\\\\w+>/g, '');\\n                            if (img_data.props.dangerousCredit)\\n                              caption_text += ' ' + img_data.props.dangerousCredit;\\n                          }\\n                          let figure = makeFigure(img_data.props.image.sources.lg.url, caption_text);\\n                          par_elem.appendChild(figure);\\n                        }\\n                      }\\n                    } else {\\n                      elem_new = document.createTextNode(item);\\n                      par_elem.appendChild(elem_new);\\n                      elem.shift();\\n                      makeElem(elem, par_elem);\\n                    }\\n                  }\\n                } else if (Array.isArray(item)) {\\n                  if (['a', 'em', 'strong'].includes(item[0])) {\\n                    makeElem(item, par_elem);\\n                    elem.shift();\\n                    makeElem(elem, par_elem);\\n                  } else {\\n                    console.log(item);\\n                  }\\n                } else if (typeof item === 'object') {\\n                  if (!item.class)\\n                    console.log(item);\\n                  elem.shift();\\n                  makeElem(elem, par_elem);\\n                }\\n              } else if (typeof elem === 'string' && !['div'].includes(elem)) {\\n                par_elem.appendChild(document.createTextNode(elem));\\n              }\\n            }\\n            for (let par of pars)\\n              makeElem(par, body);\\n          }\\n        } catch (err) {\\n          console.log(err);\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nelse if (matchDomain('vox.com')) {\\n  let ads = 'div[id^=\\\"div-gpt-ad-\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('warontherocks.com')) {\\n  getJsonUrl('a[href^=\\\"https://warontherocks.com/subscribe\\\"]', '', 'div.tw\\\\\\\\:container.tw\\\\\\\\:mb-20>div');\\n}\\n\\nelse if (matchDomain('washingtonpost.com')) {\\n  let paywall_sel = 'div.meteredContent';\\n  let paywall = document.querySelector(paywall_sel);\\n  if (paywall) {\\n    let article = document.querySelector('div:not(.teaser-content) > div.article-body');\\n    if (!article) {\\n      let url = window.location.href;\\n      getArchive(url, paywall_sel, {rm_class: 'meteredContent'}, 'div.teaser-content', '', 'article > div > div[style*=\\\"grid-column-end\\\"]');\\n    }\\n  }\\n  let ads = 'wp-ad-wrapper, div[data-qa$=\\\"-ad\\\"], div[data-component=\\\"Ad\\\"], div[data-qa=\\\"outbrain\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('winnipegfreepress.com')) {\\n  let ads = '.billboard-ad-space, .ad, .article-ad, .fixed-sky';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain('wsj.com')) {\\n  if (window.location.pathname.startsWith('/livecoverage/')) {\\n    window.setTimeout(function () {\\n      fix_dowjones_live();\\n    }, 1500);\\n  } else {\\n    let paywall_sel = '.snippet-promotion, div[id*=\\\"-snippet-overlay\\\"]';\\n    let paywall = document.querySelector(paywall_sel);\\n    if (paywall) {\\n      let url = window.location.href;\\n      let article_sel = 'article section';\\n      let wsj_pro = paywall.querySelector('a[href^=\\\"https://wsjpro.com/\\\"]');\\n      if (wsj_pro) {\\n        header_nofix(article_sel, paywall_sel);\\n      } else {\\n        let video_sel = 'div[data-type=\\\"video\\\"]';\\n        let video = document.querySelector(video_sel);\\n        let schema_script = document.querySelector('script#articleschema');\\n        func_post = function () {\\n          let pars = document.querySelectorAll(article_sel + ' > div[data]');\\n          if (pars.length < 5)\\n            header_nofix(article_sel, '', 'BPC > no archive-fix');\\n          if (video) {\\n            let video_new = document.querySelector(video_sel);\\n            if (video_new && video_new.parentNode)\\n              video_new.parentNode.replaceChild(video, video_new);\\n          }\\n          let inline_videos = document.querySelectorAll('div[id^=\\\"video\\\"]');\\n          for (let inline_video of inline_videos) {\\n            let video_id = inline_video.id.replace('video', '');\\n            if (video_id && schema_script) {\\n              try {\\n                let video_data = JSON.parse(schema_script.text).find(x => x['@type'] === 'VideoObject' && x.embedUrl.includes(video_id));\\n                if (video_data && inline_video.parentNode) {\\n                  let elem = document.createElement('iframe');\\n                  elem.src = video_data.embedUrl;\\n                  elem.style = 'width: ' + inline_video.offsetWidth + 'px; height: ' + inline_video.offsetWidth * 3 / 4 + 'px;';\\n                  inline_video.parentNode.replaceChild(elem, inline_video);\\n                }\\n              } catch (err) {\\n                console.log(err);\\n              }\\n            }\\n          }\\n          if (mobile) {\\n            let inline_images = document.querySelectorAll('div[style] > figure > picture > img');\\n            for (let elem of inline_images) {\\n              elem.style = 'width: 100%;';\\n              elem.removeAttribute('height');\\n              elem.removeAttribute('width');\\n              elem.parentNode.removeAttribute('style');\\n              elem.parentNode.parentNode.parentNode.removeAttribute('style');\\n            }\\n            let inline_data = document.querySelectorAll('div[data-layout=\\\"inline\\\"][style]');\\n            for (let elem of inline_data)\\n              elem.removeAttribute('style');\\n          }\\n          let read_next = document.querySelector('div#cx-what-to-read-next');\\n          removeDOMElement(read_next);\\n          let inline_wrappers = document.querySelectorAll('div[style*=\\\"background-position\\\"] > div[id^=\\\"wrapper-INLINEIMM_\\\"]');\\n          for (let elem of inline_wrappers)\\n            removeDOMElement(elem.parentNode);\\n        }\\n        getArchive(url, paywall_sel, '', article_sel);\\n      }\\n    }\\n  }\\n  let ads = 'div.wsj-ad, div.adWrapper, div.css-xgokil-Box, div#cx-article-cover-overlay';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(ke_nation_media_domains)) {\\n  let paywall = document.querySelectorAll('div.modal, [id*=\\\"wall\\\"], section.wall-guard');\\n  if (paywall.length) {\\n    removeDOMElement(...paywall);\\n    func_post = function () {\\n      let div_hidden = document.querySelectorAll('div.article-page .nmgp');\\n      for (let elem of div_hidden)\\n        elem.classList.remove('nmgp');\\n      let page_hidden = document.querySelector('div.article-page .hidden');\\n      if (page_hidden)\\n        page_hidden.classList.remove('hidden');\\n      let lazy_images = document.querySelectorAll('img.lazy-img[data-srcset]:not([src])');\\n      for (let elem of lazy_images) {\\n        elem.src = elem.getAttribute('data-srcset').split(',').pop().split(' ')[0];\\n        elem.classList.remove('lazy-img');\\n        elem.style = 'margin: 0px 20px';\\n      }\\n      let videos = document.querySelectorAll('iframe.lazy-iframe_iframe[data-src]:not([src])');\\n      for (let elem of videos) {\\n        elem.src = elem.getAttribute('data-src');\\n        elem.removeAttribute('class');\\n      }\\n    }\\n    let url = window.location.href;\\n    replaceDomElementExt(url, false, false, 'div.blk-txt');\\n  }\\n  let banners = 'div.banner, div.spinner';\\n  hideDOMStyle(banners);\\n}\\n\\nelse if ((domain = matchDomain(usa_gannett_domains)) || document.querySelector('head > link[href*=\\\".gannettdigital.com/\\\"], head > link[href*=\\\".gannett-cdn.com/\\\"]')) {\\n  if (!domain)\\n    domain = window.location.hostname.replace(/^(www|amp|eu)\\\\./, '');\\n  setCookie('firefly_akamai_meter', '', domain, '/', 0);\\n  if (window.location.pathname.endsWith('/restricted/') && window.location.search.startsWith('?return=')) {\\n    let url = decodeURIComponent(window.location.href.split('?return=')[1]);\\n    let paywall = pageContains('div.message', 'This content is only available to subscribers.');\\n    if (paywall.length) {\\n      removeDOMElement(...paywall);\\n      let article = document.querySelector('article');\\n      if (article)\\n        article.firstChild.before(archiveLink(url));\\n    }\\n  }\\n  let ads = 'aside[aria-label=\\\"advertisement\\\"]';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_hearst_comm_domains) || document.querySelector('head > script[src*=\\\"/treg.hearstnp.com/\\\"]')) {\\n  addStyle('body {overflow: visible!important;}');\\n  let ads = 'div[data-block-type=\\\"ad\\\"], div[data-widget-host=\\\"revcontent\\\"], div.b-gray300, div#mod-target-div';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_lee_ent_domains.concat(ca_torstar_domains, ['abqjournal.com'])) || document.querySelector('head > meta[name=\\\"tncms-access-version\\\"]')) {\\n  if (window.location.pathname.endsWith('.amp.html')) {\\n    amp_unhide_access_hide('=\\\"hasAccess\\\"', '=\\\"NOT hasAccess\\\"', '.amp-ads-container');\\n    let elem_hidden = document.querySelectorAll('html[class], body[class]');\\n    for (let elem of elem_hidden)\\n      elem.removeAttribute('class');\\n    let amp_images = document.querySelectorAll('div.main-content amp-img[src^=\\\"https://\\\"]');\\n    for (let amp_image of amp_images) {\\n      let elem = document.createElement('img');\\n      Object.assign(elem, {\\n        src: amp_image.getAttribute('src'),\\n        alt: amp_image.getAttribute('alt'),\\n        height: '400'\\n      });\\n      amp_image.parentNode.replaceChild(elem, amp_image);\\n    }\\n  } else {\\n    if (true) {\\n      function unscramble(t) {\\n        for (var n = \\\"\\\", i = 0, r = t.length; i < r; i++) {\\n          var s = t.charCodeAt(i);\\n          if (s >= 33 && s <= 126) {\\n            var sTmp = String.fromCharCode(33 + (s - 33 + 47) % 94);\\n            n += sTmp;\\n          } else\\n            n += t.charAt(i);\\n        }\\n        return n;\\n      }\\n      let paywall = document.querySelector('div.subscriber-offers');\\n      removeDOMElement(paywall);\\n      let subscriber_only = document.querySelectorAll('div.subscriber-only');\\n      for (let elem of subscriber_only) {\\n        if (elem.classList.contains('encrypted-content')) {\\n          elem.innerHTML = unscramble(elem.textContent);\\n        }\\n        elem.removeAttribute('style');\\n        elem.removeAttribute('class');\\n      }\\n      let banners = document.querySelectorAll('div.subscription-required, div.redacted-overlay');\\n      removeDOMElement(...banners);\\n    }\\n    let ads = 'div.tnt-ads-container, div[class*=\\\"adLabelWrapper\\\"], div.globalHeaderBillboard';\\n    hideDOMStyle(ads);\\n  }\\n}\\n\\nelse if (matchDomain(usa_mcc_domains) || document.querySelector('head > link[href^=\\\"https://mcclatchy-d.openx.net\\\"], footer a[href^=\\\"https://www.mcclatchy.com/privacy-policy\\\"]')) {\\n  if (window.location.hostname.startsWith('amp.')) {\\n    amp_unhide_subscr_section();\\n    let subscriptions_action = document.querySelector('div[subscriptions-action][subscriptions-display=\\\"NOT data.hasError\\\"]');\\n    if (subscriptions_action)\\n      subscriptions_action.removeAttribute('subscriptions-action');\\n    let art_cropped = document.querySelector('div.article-body.cropped');\\n    if (art_cropped)\\n      art_cropped.classList.remove('cropped');\\n    let subscr_tag = document.querySelector('div#subscriber-exclusive-tag');\\n    let amp_players = document.querySelectorAll('amp-connatix-player, amp-iframe.trinity-player');\\n    removeDOMElement(subscr_tag, ...amp_players);\\n    let amp_images = document.querySelectorAll('amp-img[srcset]:not([src])');\\n    for (let elem of amp_images) {\\n      let img = document.createElement('img');\\n      img.src = elem.getAttribute('srcset').split(' ')[0],\\n      img.alt = elem.getAttribute('alt'),\\n      img.style = 'width: 100%;';\\n      elem.parentNode.replaceChild(img, elem);\\n    }\\n  } else {\\n    window.setTimeout(function () {\\n      let paywall = document.querySelector('p#yzwall');\\n      if (paywall) {\\n        removeDOMElement(paywall);\\n        let pars_hidden = document.querySelectorAll('.yzfade, .yzarret');\\n        for (let elem of pars_hidden)\\n          elem.removeAttribute('class');\\n      }\\n    }, 1000);\\n  }\\n  let ads = 'div[data-type=\\\"ad\\\"], div.vf-promo, div#ymovrly';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (matchDomain(usa_mng_domains) || document.querySelector('head > link[rel=\\\"stylesheet\\\"][id^=\\\"dfm-accuweather-\\\"], footer li > a[href^=\\\"https://www.medianewsgroup.com\\\"]')) {\\n  if (window.location.pathname.endsWith('/amp/'))\\n    amp_unhide_subscr_section('div.ampWrapperInside, div#paywall');\\n  else if (true) {\\n    let paywall_sel = '#server-paywall';\\n    let paywall = document.querySelector(paywall_sel);\\n    let article_sel = 'div.body-copy';\\n    let article = document.querySelector(article_sel);\\n    if (paywall && article) {\\n      func_post = function () {\\n        let slideshow = article.querySelector('div.article-slideshow');\\n        if (slideshow) {\\n          slideshow.removeAttribute('class');\\n          let image_wrappers = slideshow.querySelectorAll('div.image-wrapper');\\n          for (let elem of image_wrappers) {\\n            elem.removeAttribute('class');\\n            elem.style = 'margin: 20px 0px;';\\n          }\\n          let caption = 'div.mng-gallery-information-container, button.icon-close';\\n          hideDOMStyle(caption, 2);\\n        }\\n        if (iframe)\\n          article.appendChild(iframe);\\n      }\\n      let iframe = article.querySelector('iframe');\\n      getJsonUrl(paywall_sel, '', article_sel, {art_append: 1, art_class: 'body-copy'});\\n    }\\n    let ads = 'div.dfp-ad';\\n    hideDOMStyle(ads);\\n  }\\n}\\n\\nelse if (document.querySelector('head > script[src*=\\\".axate.io/\\\"]')) {\\n  let premium = document.querySelector('.premium, div[class*=\\\"-premium\\\"]');\\n  if (premium)\\n    premium.removeAttribute('class');\\n}\\n\\nelse if (document.querySelector('head > meta[property][content^=\\\"https://cdn.forumcomm.com/\\\"]')) {\\n  let ads = 'div.GoogleDfpAd-Content';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (document.querySelector('head > script[src*=\\\".postmedia.digital/\\\"], head > meta[content*=\\\".postmedia.digital/\\\"]')) {\\n  let ads = 'div.ad__section-border, div[id^=\\\"tbl_\\\"], div.js-widget-content';\\n  hideDOMStyle(ads);\\n}\\n\\nelse if (document.querySelector('head > link[href$=\\\".wallkit.net\\\"]')) {\\n  let paywall = document.querySelector('div.wkwp-paywall');\\n  if (paywall)\\n    paywall.removeAttribute('class');\\n  hideDOMStyle('div.wkwp-paywall-block');\\n}\\n\\n}\\n\\nads_hide();\\nleaky_paywall_unhide();\\n\\n}, 1000);\\n\\n// General Functions\\n\\n// import (see @require)\\n\\nfunction fix_dowjones_live() {\\n  let paywall = document.querySelector('div#cx-lc-snippet');\\n  if (paywall) {\\n    removeDOMElement(paywall);\\n    let json_script = getArticleJsonScript();\\n    if (json_script) {\\n      try {\\n        let json = JSON.parse(json_script.text);\\n        if (json) {\\n          let article = document.querySelector('div[data-id=\\\"StreamBody_index_MainContainer\\\"]');\\n          if (article) {\\n            let pars = json[0].liveBlogUpdate;\\n            for (let par of pars) {\\n              if (par.headline && par.articleBody) {\\n                let headline = document.createElement('p');\\n                headline.innerText = par.headline;\\n                headline.style = 'font-weight: bold;';\\n                let author = document.createElement('a');\\n                if (par.author && par.author.sameAs) {\\n                  author.href = par.author.sameAs[0];\\n                  author.innerText = par.author.name;\\n                }\\n                let date = document.createElement('p');\\n                if (par.dateModified && par.datePublished) {\\n                  date.innerText = 'Updated ' + par.dateModified.replace(/(T|:\\\\d+\\\\.\\\\d+Z$)/g, ' ') + ' ET / Original ' + par.datePublished.replace(/(T|:\\\\d+\\\\.\\\\d+Z$)/g, ' ') + ' ET';\\n                }\\n                let body = document.createElement('p');\\n                body.innerText = par.articleBody;\\n                article.after(headline, author, date, body);\\n              }\\n            }\\n          }\\n        }\\n      } catch (err) {\\n        console.log(err);\\n      }\\n    }\\n    let fade = document.querySelectorAll('div[class*=\\\"-CardWrapper\\\"]');\\n    for (let elem of fade)\\n      elem.removeAttribute('class');\\n  }\\n}\\n\\nfunction fix_dowjones_fetch(url_src, data, article) {\\n  try {\\n    if (data) {\\n      let json = JSON.parse(data);\\n      if (json && json.screens[0] && json.screens[0].frames) {\\n        let pars = json.screens[0].frames;\\n        let par_class;\\n        let intro = article.querySelector('p[class], [data-type=\\\"hed\\\"]');\\n        if (intro) {\\n          if (intro.tagName === 'P')\\n            par_class = intro.className;\\n          else {\\n            let par_first = article.querySelector('p[class]');\\n            if (par_first)\\n              par_class = par_first.className;\\n          }\\n        }\\n        if (matchDomain('barrons.com')) {\\n          let style_fl = document.querySelector('head > style[data-emotion-css]');\\n          if (style_fl && style_fl.innerHTML.includes(':first-letter')) {\\n            let styles_fl = document.querySelectorAll('head > style[data-emotion-css], head > style[data-emotion=\\\"emotion\\\"]');\\n            for (let style of styles_fl) {\\n              if (style.innerHTML.includes(':first-letter'))\\n                removeDOMElement(style);\\n            }\\n          }\\n        }\\n        let body_first = true;\\n        let img_lead = document.querySelector('div.img__lead img[src], div.featured-image img[src]');\\n        let img_lead_url;\\n        if (img_lead)\\n          img_lead_url = img_lead.src.split('?')[0];\\n        article.innerHTML = '';\\n        for (let par of pars) {\\n          let elem = document.createElement('p');\\n          if (par_class)\\n            elem.className = par_class;\\n          if (par.type === 'body') {\\n            if (par.body && par.styleID.match(/(default|bodyFrame)/)) {\\n              if (body_first && intro) {\\n                elem = intro;\\n                body_first = false;\\n              } else\\n                elem.innerText = par.body.text.replace(/\\\\s_/g, '');\\n            }\\n          } else if (par.type === 'listelement') {\\n            if (par.body)\\n              elem.innerText = ' \\u2022 ' + par.body.text;\\n          } else if (par.type === 'image') {\\n            if (par.image && par.image.url && !(img_lead_url && par.image.url.startsWith(img_lead_url))) {\\n              let caption = (par.caption ? par.caption.text + ' - ' : '') + (par.credit ? par.credit.text : '');\\n              elem = makeFigure(par.image.url, caption, {\\n                style: 'width: 80%; margin: auto;'\\n              });\\n            }\\n          } else if (['article', 'inlineArticle'].includes(par.type) && par.title && par.title.text && par.shareUrl) {\\n            let sub_elem = document.createElement('a');\\n            sub_elem.href = par.shareUrl;\\n            sub_elem.innerText = par.title.text;\\n            sub_elem.style = 'font-weight: bold;';\\n            elem.appendChild(sub_elem);\\n          } else if (par.type === 'dynamicinset') {\\n            if (par.webview && par.webview.value) {\\n              let iframe = document.createElement('iframe');\\n              iframe.src = par.webview.value;\\n              iframe.style = 'height: 600px; width: 100%; border: none;';\\n              elem.appendChild(iframe);\\n            }\\n          } else if (par.type === 'screen') {\\n            if (par.screen && par.screen.frames) {\\n              elem = document.createElement('p');\\n              let sub_elem = document.createElement('table');\\n              let row_new = true;\\n              let tr;\\n              for (let frame of par.screen.frames) {\\n                if (row_new) {\\n                  tr = document.createElement('tr');\\n                  row_new = false;\\n                }\\n                if (frame.body) {\\n                  let td = document.createElement('td');\\n                  td.innerText = frame.body.text;\\n                  tr.appendChild(td);\\n                } else if (frame.type === 'divider') {\\n                  sub_elem.appendChild(tr);\\n                  row_new = true;\\n                }\\n              }\\n              sub_elem.appendChild(tr);\\n              elem.appendChild(sub_elem);\\n            } else\\n              console.log(par);\\n          } else if (par.type === 'video') {\\n            let video_thumbnail = makeFigure(par.thumbnail.url, par.description.text, {\\n              style: 'width: 80%; margin: auto;'\\n            });\\n            let video_link = document.createElement('a');\\n            video_link.href = par.url;\\n            video_link.innerText = 'Video-link (open in media player): ' + par.url;\\n            elem.append(video_thumbnail, video_link);\\n          } else if (par.type === 'youtube') {\\n             if (par.videoId) {\\n               elem = document.createElement('p');\\n               let sub_elem = document.createElement('iframe');\\n               sub_elem.src = 'https://www.youtube.com/embed/' + par.videoId;\\n               sub_elem.style = 'width: 100%; height: 400px;';\\n               elem.appendChild(sub_elem);\\n             }\\n          } else if (!['ad', 'audioplayer', 'authorBios', 'byline', 'caption', 'columnistHeader', 'divider', 'inlineComment', 'paywall-promotion', 'pullquotebody', 'scrollinggallery', 'sectionTitle', 'tags', 'title', 'verticalContainer', 'webview'].includes(par.type)) {\\n            console.log(par);\\n          }\\n          if (elem.hasChildNodes())\\n            article.appendChild(elem);\\n        }\\n      }\\n    }\\n  } catch (err) {\\n    console.log(err);\\n  }\\n}\\n\\n})();\\n\\n}\\n\";(document.head||document.documentElement).appendChild(s);})();</script>";
if (/<\/head>/i.test(body)) {
  body = body.replace(/<\/head>/i, injection + '</head>');
} else if (/<body[^>]*>/i.test(body)) {
  body = body.replace(/<body([^>]*)>/i, '<body$1>' + injection);
} else {
  body = injection + body;
}
delete headers['Content-Length'];
delete headers['content-length'];
delete headers['Content-Security-Policy'];
delete headers['content-security-policy'];
delete headers['Content-Security-Policy-Report-Only'];
delete headers['content-security-policy-report-only'];
$done({ body, headers });
